function debugLine(e,t,i){!0===e&&(e="true"),!1===e&&(e="false");var n=e;if("object"==typeof e){n="";for(name in e){var r=e[name];n+=" "+name+": "+r}}if(1!=t||i||(n+=" "+Math.random()),1==i){var o=jQuery("#debug_line");o.width(200),o.height()>=500&&o.html("");n=o.html()+"<br> -------------- <br>"+n}jQuery("#debug_line").show().html(n)}function debugSide(e){var t="";for(name in e){var i=e[name];t+=name+" : "+i+"<br>"}jQuery("#debug_side").show().html(t)}function trace(e){"undefined"!=typeof console&&console.log(e)}function UGFunctions(){function e(e,t,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent?t.attachEvent("on"+e,i):t[e]=i}var t=null,i=this,n={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,handle:null};this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(e,t){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(0==i.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(t){document.webkitCancelFullScreen?e("webkitfullscreenchange",document,t):document.msExitFullscreen?e("MSFullscreenChange",document,t):document.mozCancelFullScreen?e("mozfullscreenchange",document,t):e("fullscreenchange",document,t)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},this.isFullScreen=function(){var e=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e=!!e},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==t)return t;var e=["webkit","Moz","ms","O"],i=document.createElement("div");for(var n in e){var r=e[n];if(r+"Transform"in i.style)return r=r.toLowerCase(),t=r,r}return t="",""},this.getImageInsideParentDataByImage=function(e,t,n){var r=e.parent(),o=i.getImageOriginalSize(e);return i.getImageInsideParentData(r,o.width,o.height,t,n)},this.getImageInsideParentData=function(e,t,i,n,r,o,a){if(!r)r={};var s={};if(void 0===o)o=e.width();if(void 0===a)a=e.height();r.padding_left&&(o-=r.padding_left),r.padding_right&&(o-=r.padding_right),r.padding_top&&(a-=r.padding_top),r.padding_bottom&&(a-=r.padding_bottom);var l=null,u="100%",d=null,_=null,g="display:block;margin:0px auto;";if(t>0&&i>0){if("down"==n&&t<o&&i<a)_=(o-(l=t))/2,d=(a-(u=i))/2;else if("fill"==n){(l=(u=a)*(c=t/i))<o?(u=(l=o)/c,_=0,d=Math.round((u-a)/2*-1)):(d=0,_=Math.round((l-o)/2*-1))}else{var c;d=0,_=(o-(l=(u=a)*(c=t/i)))/2,"fitvert"!=n&&l>o&&(_=0,d=(a-(u=(l=o)/c))/2)}l=Math.floor(l),u=Math.floor(u),d=Math.floor(d),_=Math.floor(_),g="position:absolute;"}return r.padding_top&&(d+=r.padding_top),r.padding_left&&(_+=r.padding_left),s.imageWidth=l,s.imageHeight=u,s.imageTop=d,s.imageLeft=_,s.imageRight=_+l,s.imageBottom=0==d||"100%"==u?null:d+u,s.style=g,s},this.getElementCenterPosition=function(e,t){var n=e.parent(),r=i.getElementSize(e),o=i.getElementSize(n),a=o.width,s=o.height;t&&void 0!==t.padding_top&&(s-=t.padding_top),t&&void 0!==t.padding_bottom&&(s-=t.padding_bottom),t&&void 0!==t.padding_left&&(a-=t.padding_left),t&&void 0!==t.padding_right&&(a-=t.padding_right);var l={};return l.left=Math.round((a-r.width)/2),l.top=Math.round((s-r.height)/2),t&&void 0!==t.padding_top&&(l.top+=t.padding_top),t&&void 0!==t.padding_left&&(l.left+=t.padding_left),l},this.getElementCenterPoint=function(e,t){if(!t)t=!1;var n=i.getElementSize(e),r={};return r.x=n.width/2,r.y=n.height/2,1==t&&(r.x+=n.left,r.y+=n.top),r.x=Math.round(r.x),r.y=Math.round(r.y),r},this.getMousePosition=function(e,t){var i={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(i.pageX=e.originalEvent.touches[0].pageX,i.pageY=e.originalEvent.touches[0].pageY,i.clientX=e.originalEvent.touches[0].clientX,i.clientY=e.originalEvent.touches[0].clientY),t){var n=t.offset();i.mouseX=i.pageX-n.left,i.mouseY=i.pageY-n.top}return i},this.getMouseElementPoint=function(e,t){var n={x:e.pageX,y:e.pageY};return i.getElementLocalPoint(n,t)},this.getElementLocalPoint=function(e,t){var i={},n=t.offset();return i.x=Math.round(e.x-n.left),i.y=Math.round(e.y-n.top),i},this.getImageOriginalSize=function(e,t,i){if(void 0!==t&&void 0!==i)return{width:t,height:i};var n=e[0];if(void 0===n)throw new Error("getImageOriginalSize error - Image not found");var r={};if(void 0===n.naturalWidth){if("number"==typeof e.data("naturalWidth")){return(r={}).width=e.data("naturalWidth"),r.height=e.data("naturalHeight"),r}var o=new Image;return o.src=n.src,o.complete?(r.width=o.width,r.height=o.height,e.data("naturalWidth",r.width),e.data("naturalHeight",r.height),r):{width:0,height:0}}return r.width=n.naturalWidth,r.height=n.naturalHeight,r},this.getimageRatio=function(e){var t=i.getImageOriginalSize(e);return i.getElementSize(e).width/t.width},this.isImageFitParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width<=r.width&&n.height<=r.height},this.getElementSize=function(e){if(void 0===e)throw new Error("Can't get size, empty element");var t=e.position();return t.height=e.outerHeight(),t.width=e.outerWidth(),t.left=Math.round(t.left),t.top=Math.round(t.top),t.right=t.left+t.width,t.bottom=t.top+t.height,t},this.isElementBiggerThenParent=function(e){var t=e.parent(),n=i.getElementSize(e),r=i.getElementSize(t);return n.width>r.width||n.height>r.height},this.isPointInsideElement=function(e,t){if(0==(e.x>=0&&e.x<t.width))return!1;return 0!=(e.y>=0&&e.y<t.height)},this.getElementRelativePos=function(e,t,n,r){if(!r)r=e.parent();if("number"==typeof e)var o={width:e,height:e};else o=i.getElementSize(e);var a=i.getElementSize(r);switch(t){case"top":case"left":t=0,n&&(t+=n);break;case"center":t=Math.round((a.width-o.width)/2),n&&(t+=n);break;case"right":t=a.width-o.width,n&&(t-=n);break;case"middle":t=Math.round((a.height-o.height)/2),n&&(t+=n);break;case"bottom":t=a.height-o.height,n&&(t-=n)}return t},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(e,t,n,r,o,a,s){if(!n)n=1.2;if(!o)o="fit";var l,u,d,_,g=n,c=e.parent(),h=i.getElementSize(e),p=i.getImageOriginalSize(e),m=!1,f=0,b=0,v=0,y=0;if(r){var I=i.getMouseElementPoint(r,e);m=i.isPointInsideElement(I,h),v=I.x,y=I.y}else m=!1;if(0==m){var w=i.getElementCenterPoint(e);v=w.x,y=w.y}if(1==t)l=h.height*g,u=h.width*g,0!=v&&(f=-(v*g-v)),0!=y&&(b=-(y*g-y));else{l=h.height/g;if((u=h.width/g)<i.getImageInsideParentData(c,p.width,p.height,o,s).imageWidth)return i.scaleImageFitParent(e,p.width,p.height,o,s),!0;1==m&&(0!=v&&(f=-(v/g-v)),0!=y&&(b=-(y/g-y)))}if(a){var E=1;if(0!=p.width&&(E=u/p.width),E>a)return!1}if(i.setElementSize(e,u,l),0==t&&0==m){var T=i.getElementCenterPosition(e);d=T.left,_=T.top}else d=h.left+f,_=h.top+b;return i.placeElement(e,d,_),!0},this.placeElement=function(e,t,n,r,o,a){if(0==jQuery.isNumeric(t)||0==jQuery.isNumeric(n)){if(!a)a=e.parent();var s=i.getElementSize(e),l=i.getElementSize(a)}if(0==jQuery.isNumeric(t))switch(t){case"left":t=0,r&&(t+=r);break;case"center":t=Math.round((l.width-s.width)/2),r&&(t+=r);break;case"right":t=l.width-s.width,r&&(t-=r)}if(0==jQuery.isNumeric(n))switch(n){case"top":n=0,o&&(n+=o);break;case"middle":case"center":n=Math.round((l.height-s.height)/2),o&&(n+=o);break;case"bottom":n=l.height-s.height,o&&(n-=o)}var u={position:"absolute",margin:"0px"};null!==t&&(u.left=t),null!==n&&(u.top=n),e.css(u)},this.placeElementInParentCenter=function(e){i.placeElement(e,"center","middle")},this.setElementSizeAndPosition=function(e,t,i,n,r){var o={width:n+"px",height:r+"px",left:t+"px",top:i+"px",position:"absolute",margin:"0px"};e.css(o)},this.setElementSize=function(e,t,i){var n={width:t+"px"};null!==i&&void 0!==i&&(n.height=i+"px"),e.css(n)},this.cloneElementSizeAndPos=function(e,t,n,r,o){var a=e.position();if(void 0==a)throw new Error("Can't get size, empty element");!0===n?(a.height=e.outerHeight(),a.width=e.outerWidth()):(a.height=e.height(),a.width=e.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),r&&(a.left+=r),o&&(a.top+=o),i.setElementSizeAndPosition(t,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(e,t,n,r,o,a){var s=i.getImageInsideParentData(t,n,r,o,a),l="<img";null!==s.imageWidth&&(l+=" width = '"+s.imageWidth+"'",s.style+="width:"+s.imageWidth+";"),null!=s.imageHeight&&("100%"==s.imageHeight?(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+";"):(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+"px;")),null!==s.imageTop&&(s.style+="top:"+s.imageTop+"px;"),null!==s.imageLeft&&(s.style+="left:"+s.imageLeft+"px;"),e=i.escapeDoubleSlash(e),l+=" style='"+s.style+"'",l+=' src="'+e+'"',l+=">",t.html(l);return t.children("img")},this.scaleImageCoverParent=function(e,t,n){if("number"==typeof t)var r=t,o=n;else r=t.outerWidth(),o=t.outerHeight();var a=i.getImageOriginalSize(e),s=a.width/a.height,l=o,u=l*s,d=0,_=0;u<r?(l=(u=r)/s,_=0,d=Math.round((l-o)/2*-1)):(d=0,_=Math.round((u-r)/2*-1)),u=Math.round(u),l=Math.round(l),e.css({width:u+"px",height:l+"px",left:_+"px",top:d+"px"})},this.scaleImageFitParent=function(e,t,n,r,o){var a=e.parent(),s=i.getImageInsideParentData(a,t,n,r,o),l=!1,u={};return null!==s.imageWidth&&(l=!0,e.removeAttr("width"),u.width=s.imageWidth+"px"),null!=s.imageHeight&&(l=!0,e.removeAttr("height"),u.height=s.imageHeight+"px"),null!==s.imageTop&&(l=!0,u.top=s.imageTop+"px"),null!==s.imageLeft&&(l=!0,u.left=s.imageLeft+"px"),1==l&&(u.position="absolute",u.margin="0px 0px",e.css(u)),s},this.scaleImageByHeight=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t*a);t=Math.round(t),i.setElementSize(e,s,t)},this.scaleImageByWidth=function(e,t,n,r){var o=i.getImageOriginalSize(e,n,r),a=o.width/o.height,s=Math.round(t/a);t=Math.round(t),i.setElementSize(e,t,s)},this.scaleImageExactSizeInParent=function(e,t,n,r,o,a){var s=e.parent(),l=i.getElementSize(s);l.width<r&&(r=l.width),l.height<o&&(o=l.height);var u=i.getImageInsideParentData(null,t,n,a,null,r,o),d=r,_=o,g=u.imageLeft,c=u.imageLeft,h=u.imageTop,p=u.imageTop,m=Math.round((l.width-r)/2),f=Math.round((l.height-o)/2);0!=(b=r-(u.imageWidth+g+c))&&(c+=b);var b;0!=(b=o-(u.imageHeight+h+p))&&(p+=b),e.removeAttr("width"),e.removeAttr("height");var v={position:"absolute",margin:"0px 0px"};v.width=d+"px",v.height=_+"px",v.left=m+"px",v.top=f+"px",v["padding-left"]=g+"px",v["padding-top"]=h+"px",v["padding-right"]=c+"px",v["padding-bottom"]=p+"px",e.css(v);var y={};return y.imageWidth=d,y.imageHeight=_,y},this.showElement=function(e,t,i){e.show().fadeTo(0,1),t&&t.show().fadeTo(0,1),i&&i.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(e,t){if(!t)t="ug-button-disabled";0==i.isButtonDisabled(e,t)&&e.addClass(t)},this.convertCustomPrefixOptions=function(e,t,i){if(!t)return e;var n={};return jQuery.each(e,function(e,r){if(0===e.indexOf(t+"_"+i+"_")){var o=e.replace(t+"_"+i+"_",i+"_");n[o]=r}else n[e]=r}),n},this.enableButton=function(e,t){if(!t)t="ug-button-disabled";1==i.isButtonDisabled(e,t)&&e.removeClass(t)},this.isButtonDisabled=function(e,t){if(!t)t="ug-button-disabled";return!!e.hasClass(t)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(e,t,i,n,r,o){if(!o)o=!1;return r=e+(t-e)*((r-i)/(n-i)),1==o&&(r<e&&(r=e),r>t&&(r=t)),r},this.getNormalizedValue=function(e,t,i,n,r){return r=e+(n-i)*((r-e)/(t-e))},this.getDistance=function(e,t,i,n){return Math.round(Math.sqrt(Math.abs((i-e)*(i-e)+(n-t)*(n-t))))},this.getMiddlePoint=function(e,t,i,n){var r={};return r.x=e+Math.round((i-e)/2),r.y=t+Math.round((n-t)/2),r},this.getNumItemsInSpace=function(e,t,i){return Math.floor((e+i)/(t+i))},this.getNumItemsInSpaceRound=function(e,t,i){return Math.round((e+i)/(t+i))},this.getSpaceByNumItems=function(e,t,i){return e*t+(e-1)*i},this.getItemSizeInSpace=function(e,t,i){return Math.floor((e-(t-1)*i)/t)},this.getColX=function(e,t,i){return e*(t+i)},this.getColByIndex=function(e,t){return t%e},this.getColRowByIndex=function(e,t){var i=Math.floor(e/t);return{col:Math.floor(e%t),row:i}},this.getIndexByRowCol=function(e,t,i){if(e<0)return-1;if(t<0)return-1;return e*i+t},this.getPrevRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t);return i.getIndexByRowCol(n.row-1,n.col,t)},this.getNextRowSameColIndex=function(e,t){var n=i.getColRowByIndex(e,t);return i.getIndexByRowCol(n.row+1,n.col,t)},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(e,t){jQuery.data(document.body,e,t)},this.getGlobalData=function(e){return jQuery.data(document.body,e)},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(e){if(0==i.isTouchDevice())return null;var t=i.getStoredEventData(e);if(null===t.scrollDir&&(Math.abs(t.diffMouseX)>15?t.scrollDir="hor":Math.abs(t.diffMouseY)>15&&Math.abs(t.diffMouseY)>Math.abs(t.diffMouseX)&&(t.scrollDir="vert",t.scrollStartY=t.lastMouseClientY,t.scrollOrigin=jQuery(document).scrollTop(),n.dataCache[e].scrollStartY=t.lastMouseClientY,n.dataCache[e].scrollOrigin=t.scrollOrigin),n.dataCache[e].scrollDir=t.scrollDir),"vert"!==t.scrollDir)return t.scrollDir;jQuery(document).scrollTop();var r=t.scrollOrigin-(t.lastMouseClientY-t.scrollStartY);return r>=0&&jQuery(document).scrollTop(r),t.scrollDir},this.wasVerticalScroll=function(e){return"vert"===i.getStoredEventData(e).scrollDir},this.storeEventData=function(e,t,r){var o=i.getMousePosition(e),a=jQuery.now(),s={startTime:a,lastTime:a,startMouseX:o.pageX,startMouseY:o.pageY,lastMouseX:o.pageX,lastMouseY:o.pageY,startMouseClientY:o.clientY,lastMouseClientY:o.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};r&&(s=jQuery.extend(s,r)),n.dataCache[t]=s},this.updateStoredEventData=function(e,t,r){if(!n.dataCache[t])throw new Error("updateEventData error: must have stored cache object");var o=n.dataCache[t],a=i.getMousePosition(e);o.lastTime=jQuery.now(),void 0!==a.pageX&&(o.lastMouseX=a.pageX,o.lastMouseY=a.pageY,o.lastMouseClientY=a.clientY),r&&(o=jQuery.extend(o,r)),n.dataCache[t]=o},this.getStoredEventData=function(e,t){if(!n.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var i=n.dataCache[e];return i.diffMouseX=i.lastMouseX-i.startMouseX,i.diffMouseY=i.lastMouseY-i.startMouseY,i.diffMouseClientY=i.lastMouseClientY-i.startMouseClientY,i.diffTime=i.lastTime-i.startTime,!0===t?(i.startMousePos=i.lastMouseY,i.lastMousePos=i.lastMouseY,i.diffMousePos=i.diffMouseY):(i.startMousePos=i.lastMouseX,i.lastMousePos=i.lastMouseX,i.diffMousePos=i.diffMouseX),i},this.isApproveStoredEventClick=function(e,t){if(!n.dataCache[e])return!0;var r=i.getStoredEventData(e,t),o=Math.abs(r.diffMousePos);return!(r.diffTime>400)&&!(o>30)},this.clearStoredEventData=function(e){n.dataCache[e]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){return"function"==typeof jQuery('<canvas width="500" height="500" > </canvas>')[0].getContext},this.isScrollbarExists=function(){return window.innerWidth>document.documentElement.clientWidth},this.isTouchDevice=function(){if(-1!==n.isTouchDevice)return n.isTouchDevice;try{document.createEvent("TouchEvent"),n.isTouchDevice=!0}catch(e){n.isTouchDevice=!1}return n.isTouchDevice},this.isRgbaSupported=function(){if(-1!==n.isRgbaSupported)return n.isRgbaSupported;var e=document.getElementsByTagName("script")[0],t=e.style.color;try{e.style.color="rgba(1,5,13,0.44)"}catch(e){}var i=e.style.color!=t;return e.style.color=t,n.isRgbaSupported=i,i},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(e){for(var t=jQuery.fn.jquery.split("."),i=e.split("."),n=0,r=t.length;n<r;n++){var o=parseInt(t[n]),a=parseInt(i[n]);if(void 0===i[n])return!0;if(a>o)return!1;if(o>a)return!0}return!0},this.getCssSizeParam=function(e){return jQuery.isNumeric(e)?e+"px":e},this.convertHexToRGB=function(e,t){var i=e.replace("#","");return i===e?e:(r=parseInt(i.substring(0,2),16),g=parseInt(i.substring(2,4),16),b=parseInt(i.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t+")",result)},this.timestampToString=function(e){var t=new Date(e),i=t.getDate()+"/"+t.getMonth();return i+=" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()},this.getArrTouches=function(e){var t=[];return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),t},this.getArrTouchPositions=function(e){for(var t=[],i=0;i<e.length;i++){var n={pageX:e[i].pageX,pageY:e[i].pageY};t.push(n)}return t},this.startTimeDebug=function(){n.starTime=jQuery.now()},this.showTimeDebug=function(){debugLine({"Time Passed":jQuery.now()-n.starTime},!0)},this.initProgressIndicator=function(e,t,n){switch("bar"!=e&&0==i.isCanvasExists()&&(e="bar"),e){case"bar":(r=new UGProgressBar).putHidden(n,t);break;default:case"pie":(r=new UGProgressPie).putHidden(n,t);break;case"pie2":t.type_fill=!0;var r;(r=new UGProgressPie).putHidden(n,t)}return r},this.setButtonMobileReady=function(e){e.on("touchstart",function(e){jQuery(this).addClass("ug-nohover")}),e.on("mousedown touchend",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})},this.registerTheme=function(e){n.arrThemes.push(e)},this.getArrThemes=function(){return n.arrThemes},this.isThemeRegistered=function(e){return-1!==jQuery.inArray(e,n.arrThemes)},this.getFirstRegisteredTheme=function(){if(0==n.arrThemes.length)return"";return n.arrThemes[0]},this.isTimePassed=function(e,t){if(!t)t=100;var i=jQuery.now();0==n.timeCache.hasOwnProperty(e)?lastTime=0:lastTime=n.timeCache[e];var r=i-lastTime;return n.timeCache[e]=i,!(r<=t)},this.whenContiniousEventOver=function(e,t,i){if(!i)i=300;1==n.timeCache.hasOwnProperty(e)&&null!=n.timeCache[e]&&(clearTimeout(n.timeCache[e]),n.timeCache[e]=null),n.timeCache[e]=setTimeout(t,i)},this.validateClickTouchstartEvent=function(e){var t=!0,i=jQuery.now()-n.lastEventTime;return"click"==e&&"touchstart"==n.lastEventType&&i<1e3&&(t=!1),n.lastEventTime=jQuery.now(),n.lastEventType=e,t},this.addClassOnHover=function(e,t){if(!t)t="ug-button-hover";e.hover(function(){jQuery(this).addClass(t)},function(){jQuery(this).removeClass(t)})},this.destroyButton=function(e){e.off("mouseenter"),e.off("mouseleave"),e.off("click"),e.off("touchstart"),e.off("touchend"),e.off("mousedown")},this.setButtonOnClick=function(e,t){i.setButtonMobileReady(e),e.on("click touchstart",function(e){if(objThis=jQuery(this),e.stopPropagation(),e.stopImmediatePropagation(),0==i.validateClickTouchstartEvent(e.type))return!0;t(objThis,e)})},this.loadJs=function(e,t){!0===t&&(e=location.protocol+"//"+e);var i=document.createElement("script");i.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(i,n)},this.loadCss=function(e,t){!0===t&&(e=location.protocol+"//"+e);var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(i)},this.addEvent=function(e,t,i){void 0!==e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},this.checkImagesLoaded=function(e,t,i){function n(e,n){r++,"function"==typeof i&&setTimeout(function(){i(e,n)}),r==o&&"function"==typeof t&&setTimeout(function(){t()})}var r=0,o=e.length;if(0==o&&t)return t(),!1;setTimeout(function(){for(var t=0;t<o;t++){var i=e[t];if(void 0!==i.naturalWidth&&0!==i.naturalWidth)n(e[t],!1);else{var r=jQuery("<img/>");r.data("index",t),r.on("load",function(){var t=jQuery(this).data("index");n(e[t],!1)}),r.on("error",function(){var t=jQuery(this).data("index");n(e[t],!0)}),r.attr("src",i.src)}}})},this.waitForWidth=function(e,t){var i=e.width();if(0!=i)return t(),!1;n.handle=setInterval(function(){0!=(i=e.width())&&(clearInterval(n.handle),t())},300)},this.arrayShuffle=function(e){if("object"!=typeof e)return e;for(var t,i,n=e.length;n;t=parseInt(Math.random()*n),i=e[--n],e[n]=e[t],e[t]=i);return e},this.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},this.normalizePercent=function(e){return e<0&&(e=0),e>1&&(e=1),e},this.stripTags=function(e){return e.replace(/(<([^>]+)>)/gi,"")},this.escapeDoubleSlash=function(e){return e.replace('"','"')},this.htmlentitles=function(e){return jQuery("<div/>").text(e).html()},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}function UGThumbsGeneral(){function e(e,t,i,n){var r={width:e+"px",height:t+"px"},o={width:e-y.thumbInnerReduce+"px",height:t-y.thumbInnerReduce+"px"},a=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";i?(!0!==n&&i.css(r),i.children(a).css(o)):(h.children(".ug-thumb-wrapper").css(r),h.find(a).css(o))}function t(e,t,i,n){if(!n)n=!1;f.isFakeFullscreen()&&(n=!0);var r=e.children(".ug-thumb-border-overlay"),o={};o["border-width"]=t+"px",0!=t&&(o["border-color"]=i),n&&!0===n?(r.css(o),0==t?r.hide():r.show()):(0==t?r.stop().fadeOut(v.thumb_transition_duration):r.show().stop().fadeIn(v.thumb_transition_duration),function(e,t){e.stop(!0).animate(t,{duration:v.thumb_transition_duration,easing:v.thumb_transition_easing,queue:!1})}(r,o))}function i(e,t,i){var n=e.children(".ug-thumb-overlay"),r=v.thumb_transition_duration;i&&!0===i&&(r=0),t?n.stop(!0).fadeTo(r,y.colorOverlayOpacity):n.stop(!0).fadeTo(r,0)}function n(e,t,i){var n=e.children("img.ug-thumb-image"),r=e.children("img.ug-thumb-image-overlay"),o=v.thumb_transition_duration;i&&!0===i&&(o=0),t?r.stop(!0).fadeTo(o,1):(n.fadeTo(0,1),r.stop(!0).fadeTo(o,0))}function r(e,r){if(y.isEffectBorder&&t(e,v.thumb_selected_border_width,v.thumb_selected_border_color,r),y.isEffectOverlay){i(e,1==v.thumb_overlay_reverse,r)}y.isEffectImage&&n(e,!1,r),m.trigger(p.events.SETSELECTEDSTYLE,e)}function o(e){1==s(e)?r(e,!0):p.setThumbNormalStyle(e,!0,"redraw")}function a(t,i,n){if(1==v.thumb_fixed_size)b.scaleImageCoverParent(i,t);else{"height"==v.thumb_resize_by?b.scaleImageByHeight(i,v.thumb_height):b.scaleImageByWidth(i,v.thumb_width);var r=b.getElementSize(i);b.placeElement(i,0,0),e(r.width,r.height,t)}t.children(".ug-thumb-loader").hide(),i.show(),0==v.thumb_image_overlay_effect?i.fadeTo(0,1):(1==v.thumb_image_overlay_effect&&function(e){var t=e.siblings(".ug-thumb-image-overlay");if(0==t.length)return!1;var i=b.getElementSize(e),n={width:i.width+"px",height:i.height+"px",left:i.left+"px",top:i.top+"px"};t.css(n),0==y.customThumbs&&t.fadeTo(0,1)}(i),i.fadeTo(0,0),o(t)),m.trigger(p.events.AFTERPLACEIMAGE,t)}function s(e){return!!e.hasClass("ug-thumb-selected")}function l(t,i){i=jQuery(i);p.getItemByThumb(i);var n=b.getElementSize(i);e(n.width,n.height,i,!0),o(i)}function u(e,t,i){objItem=p.getItemByThumb(t),objItem.isLoaded=!0,objItem.isThumbImageLoaded=!0;var n=b.getImageOriginalSize(i);objItem.thumbWidth=n.width,objItem.thumbHeight=n.height,objItem.thumbRatioByWidth=n.width/n.height,objItem.thumbRatioByHeight=n.height/n.width}var d,_,g,c,h,p=this,m=jQuery(p),f=new UniteGalleryMain,b=new UGFunctions;this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var v={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},y={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0},I="thumb_size_change";this.init=function(e,t){_=e.getObjects(),f=e,d=jQuery(e),g=_.g_objWrapper,c=_.g_arrItems,v=jQuery.extend(v,t),y.isEffectBorder=v.thumb_border_effect,y.isEffectOverlay=v.thumb_color_overlay_effect,y.isEffectImage=v.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(e){h=e;var t=f.getNumItems();if(1==y.isEffectImage)var i=function(){var e="",t=v.thumb_image_overlay_type.split(",");for(var i in t)switch(t[i]){case"bw":e+=" ug-bw-effect";break;case"blur":e+=" ug-blur-effect";break;case"sepia":e+=" ug-sepia-effect"}return e}();for(var n=0;n<t;n++){var r=c[n],o="";0==y.customThumbs&&(o=" ug-thumb-generated");var a="<div class='ug-thumb-wrapper"+o+"' "+("style='z-index:"+(r.index+1)+";'")+"></div>";if(1==v.thumb_wrapper_as_link){var s=r.link;""==r.link&&(s="javascript:void(0)");var l="";1==v.thumb_link_newpage&&r.link&&(l=" target='_blank'");a="<a href='"+s+"'"+l+" class='ug-thumb-wrapper"+o+"'></a>"}var u=jQuery(a),d=r.objThumbImage;if(0==y.customThumbs){if(1==v.thumb_show_loader&&d){var _="ug-thumb-loader-dark";"bright"==v.thumb_loader_type&&(_="ug-thumb-loader-bright"),u.append("<div class='ug-thumb-loader "+_+"'></div>"),u.append("<div class='ug-thumb-error' style='display:none'></div>")}if(d){if(d.addClass("ug-thumb-image"),1==v.thumb_image_overlay_effect){var g=d.clone().appendTo(u);g.addClass("ug-thumb-image-overlay "+i).removeClass("ug-thumb-image"),g.fadeTo(0,0),r.objImageOverlay=g}u.append(d)}}y.isEffectBorder&&u.append("<div class='ug-thumb-border-overlay'></div>"),y.isEffectOverlay&&u.append("<div class='ug-thumb-overlay'></div>"),h.append(u),y.customThumbs&&y.funcSetCustomThumbHtml(u,r),c[n].objThumbWrapper=u}},this.setThumbNormalStyle=function(e,r,o){if(1==y.customThumbs&&e.removeClass("ug-thumb-over"),y.isEffectBorder&&t(e,v.thumb_border_width,v.thumb_border_color,r),y.isEffectOverlay){i(e,1!=v.thumb_overlay_reverse,r)}y.isEffectImage&&n(e,!0,r),m.trigger(p.events.SETNORMALSTYLE,e)},this.setThumbOverStyle=function(e){if(1==y.customThumbs&&e.addClass("ug-thumb-over"),y.isEffectBorder&&t(e,v.thumb_over_border_width,v.thumb_over_border_color),y.isEffectOverlay){i(e,1==v.thumb_overlay_reverse)}1==y.isEffectImage&&n(e,!1),m.trigger(p.events.SETOVERSTYLE,e)},this.setHtmlProperties=function(){if(0==y.customThumbs&&(1==v.thumb_fixed_size&&e(v.thumb_width,v.thumb_height),function(){if(v.thumb_round_corners_radius<=0)return!1;var e={"border-radius":v.thumb_round_corners_radius+"px"};h.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(e)}()),h.children(".ug-thumb-wrapper").each(function(){o(jQuery(this))}),y.isEffectOverlay&&v.thumb_overlay_color){var t={};if(b.isRgbaSupported()){var i=b.convertHexToRGB(v.thumb_overlay_color,v.thumb_overlay_opacity);t["background-color"]=i}else t["background-color"]=v.thumb_overlay_color,y.colorOverlayOpacity=v.thumb_overlay_opacity;h.find(".ug-thumb-wrapper .ug-thumb-overlay").css(t)}},this.setThumbSelected=function(e){if(1==y.customThumbs&&e.removeClass("ug-thumb-over"),1==s(e))return!0;e.addClass("ug-thumb-selected"),r(e)},this.setThumbUnselected=function(e){e.removeClass("ug-thumb-selected"),p.setThumbNormalStyle(e,!1,"set unselected")},this.setOptions=function(e){v=jQuery.extend(v,e)},this.setThumbInnerReduce=function(e){y.thumbInnerReduce=e},this.setCustomThumbs=function(e,t,i){if(y.customThumbs=!0,"function"!=typeof e)throw new Error("The argument should be function");y.funcSetCustomThumbHtml=e,-1==jQuery.inArray("overlay",t)&&(y.isEffectOverlay=!1),-1==jQuery.inArray("border",t)&&(y.isEffectBorder=!1),y.isEffectImage=!1,i&&!1===i.allow_onresize&&(y.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return v},this.getNumThumbs=function(){return c.length},this.getThumbImage=function(e){return e.find(".ug-thumb-image")},this.getThumbByIndex=function(e){var t=p.getThumbs();if(e>=t.length||e<0)throw new Error("Wrong thumb index");return jQuery(t[e])},this.getThumbs=function(){return h.children(".ug-thumb-wrapper")},this.getItemByThumb=function(e){var t=e.data("index");void 0===t&&(t=e.index());return c[t]},this.isThumbLoaded=function(e){return p.getItemByThumb(e).isLoaded},this.getGlobalThumbSize=function(){return{width:v.thumb_width,height:v.thumb_height}},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var e=h.find(".ug-thumb-wrapper");e.on("touchstart",function(){y.touchEnabled=!0,e.off("mouseenter").off("mouseleave")}),1==y.allowOnResize&&g.on(I,l),e.hover(function(e){!function(e){if(1==y.touchEnabled)return objThumbs.off("mouseenter").off("mouseleave"),!0;0==s(e)&&p.setThumbOverStyle(e)}(jQuery(this))},function(e){!function(e){if(1==y.touchEnabled)return!0;0==s(e)&&p.setThumbNormalStyle(e,!1)}(jQuery(this))}),m.on(p.events.THUMB_IMAGE_LOADED,u)},this.destroy=function(){var e=h.find(".ug-thumb-wrapper");e.off("touchstart"),g.off(I),e.off("mouseenter"),e.off("mouseleave"),m.off(p.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var e=h.find(".ug-thumb-image");b.checkImagesLoaded(e,null,function(e,t){if(0==t)!function(e,t){t||(t=!1);var i=jQuery(e),n=i.parents(".ug-thumb-wrapper");0!=n.parent().length&&(objItem=p.getItemByThumb(n),(1!=objItem.isLoaded||!1!==t)&&(p.triggerImageLoadedEvent(n,i),1==y.customThumbs?m.trigger(p.events.PLACEIMAGE,[n,i]):a(n,i,objItem)))}(e,!0);else{!function(e){var t=p.getItemByThumb(e);if(t.isLoaded=!0,t.isThumbImageLoaded=!1,1==y.customThumbs)return m.trigger(p.events.IMAGELOADERROR,e),!0;e.children(".ug-thumb-loader").hide(),e.children(".ug-thumb-error").show()}(jQuery(e).parent())}})},this.triggerImageLoadedEvent=function(e,t){m.trigger(p.events.THUMB_IMAGE_LOADED,[e,t])},this.hideThumbs=function(){h.find(".ug-thumb-wrapper").hide()}}function UGThumbsStrip(){function e(){var e=P.getOptions();j.isNotFixedThumbs=!1===e.thumb_fixed_size,S=x.strip_vertical_type}function t(){P.setHtmlProperties(),function(){var e=v.children(".ug-thumb-wrapper"),t=jQuery(e[0]),i=t.outerWidth(),r=t.outerHeight(),o=P.getOptions();0==S?(C.thumbSize=i,1==o.thumb_fixed_size?C.thumbSecondSize=r:C.thumbSecondSize=o.thumb_height,n(b.width()),C.stripInnerSize=v.width()):(C.thumbSize=r,1==o.thumb_fixed_size?C.thumbSecondSize=i:C.thumbSecondSize=o.thumb_width,n(b.height()),C.stripInnerSize=v.height())}(),function(){if(0==S){var e=C.thumbSecondSize,t={};t.height=e+"px";var i={};i.height=e+"px"}else{var n=C.thumbSecondSize,t={};t.width=n+"px";var i={};i.width=n+"px"}b.css(t),v.css(i)}(),r(),0==j.isRunOnce&&(1==x.strip_control_touch&&(I=new UGTouchThumbsControl).init(w),1==x.strip_control_avia&&(y=new UGAviaControl).init(w),u(),P.loadThumbsImages(),function(){P.initEvents();b.find(".ug-thumb-wrapper").on("click touchend",function(e){!function(e){if(w.isTouchMotionActive()){var t=I.isSignificantPassed();if(1==t)return!0}var i=P.getItemByThumb(e);E.selectItem(i)}(jQuery(this))}),h.on(E.events.ITEM_CHANGE,_),j.isNotFixedThumbs&&jQuery(P).on(P.events.AFTERPLACEIMAGE,d)}()),j.isRunOnce=!0}function n(e){C.stripSize=e,C.stripActiveSize=0==S?C.stripSize-x.strip_padding_left-x.strip_padding_right:C.stripSize-x.strip_padding_top-x.strip_padding_bottom,C.stripActiveSize<0&&(C.stripActiveSize=0)}function r(){var e=v.children(".ug-thumb-wrapper"),t=0,n=0;for(0==S&&(n=x.strip_padding_top),i=0;i<e.length;i++){var r=jQuery(e[i]);if(1==j.isNotFixedThumbs){if(objItem=P.getItemByThumb(r),0==objItem.isLoaded)continue;r.show()}T.placeElement(r,t,n),0==S?t+=r.outerWidth()+x.strip_space_between_thumbs:n+=r.outerHeight()+x.strip_space_between_thumbs}if(0==S)var o=t-x.strip_space_between_thumbs;else o=n-x.strip_space_between_thumbs;!function(e){0==S?v.width(e):v.height(e),C.stripInnerSize=e,u(),jQuery(w).trigger(w.events.INNER_SIZE_CHANGE)}(o)}function o(e){var t=w.getInnerStripPos()+e;t=w.fixInnerStripLimits(t),w.positionInnerStrip(t,!0)}function a(e){var t=-1*c(e).min;t=w.fixInnerStripLimits(t),w.positionInnerStrip(t,!0)}function s(e){var t=-1*c(e).max+C.stripSize;t=w.fixInnerStripLimits(t),w.positionInnerStrip(t,!0)}function l(e){if(0==g())return!1;var t=function(){var e={},t=w.getInnerStripPos();return e.minPosThumbs=-1*t+1,e.maxPosThumbs=-1*t+C.stripSize-1,e}(),i=c(e);if(i.min<t.minPosThumbs){var n=e.prev();a(n.length?n:e)}else if(i.max>t.maxPosThumbs){var r=e.next();s(r.length?r:e)}}function u(){1==g()?(y&&y.enable(),I&&I.enable()):(y&&y.disable(),I&&I.disable())}function d(){clearTimeout(j.handle),j.handle=setTimeout(function(){r()},50)}function _(){var e=E.getSelectedItem();P.setThumbSelected(e.objThumbWrapper),l(e.objThumbWrapper)}function g(){return C.stripInnerSize>C.stripActiveSize}function c(e){var t={},i=e.position();return 0==S?(t.min=i.left,t.max=i.left+C.thumbSize):(t.min=i.top,t.max=i.top+C.thumbSize),t}var h,p,m,f,b,v,y,I,w=this,E=new UniteGalleryMain,T=new UGFunctions,S=!1,P=new UGThumbsGeneral,x=(T=new UGFunctions,{strip_vertical_type:!1,strip_thumbs_align:"left",strip_space_between_thumbs:6,strip_thumb_touch_sensetivity:15,strip_scroll_to_thumb_duration:500,strip_scroll_to_thumb_easing:"easeOutCubic",strip_control_avia:!0,strip_control_touch:!0,strip_padding_top:0,strip_padding_bottom:0,strip_padding_left:0,strip_padding_right:0}),j={isRunOnce:!1,is_placed:!1,isNotFixedThumbs:!1,handle:null},C={stripSize:0,stripActiveSize:0,stripInnerSize:0,thumbSize:0,thumbSecondSize:0};this.events={STRIP_MOVE:"stripmove",INNER_SIZE_CHANGE:"size_change"};var A={strip_thumbs_align:"top",thumb_resize_by:"width"};this.setHtml=function(e){if(!e){e=m;null!=x.parent_container&&(e=x.parent_container)}e.append("<div class='ug-thumbs-strip'><div class='ug-thumbs-strip-inner'></div></div>"),b=e.children(".ug-thumbs-strip"),v=b.children(".ug-thumbs-strip-inner"),P.setHtmlThumbs(v),1==j.isNotFixedThumbs&&P.hideThumbs()},this.destroy=function(){var e=b.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),h.off(E.events.ITEM_CHANGE),jQuery(P).off(P.events.AFTERPLACEIMAGE),I&&I.destroy(),y&&y.destroy(),P.destroy()},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i){!function(t,i){p=t.getObjects(),(E=t).attachThumbsPanel("strip",w),h=jQuery(t),m=p.g_objWrapper,f=p.g_arrItems,x=jQuery.extend(x,i),1==(S=x.strip_vertical_type)&&(x=jQuery.extend(x,A),x=jQuery.extend(x,i),i.thumb_resize_by="width"),P.init(t,i),e()}(t,i)},this.run=function(){t()},this.positionInnerStrip=function(e,t){if(void 0===t)t=!1;if(0==S)var i={left:e+"px"};else i={top:e+"px"};0==t?(v.css(i),w.triggerStripMoveEvent()):(w.triggerStripMoveEvent(),v.stop(!0).animate(i,{duration:x.strip_scroll_to_thumb_duration,easing:x.strip_scroll_to_thumb_easing,queue:!1,progress:function(){w.triggerStripMoveEvent()},always:function(){w.triggerStripMoveEvent()}}))},this.triggerStripMoveEvent=function(){jQuery(w).trigger(w.events.STRIP_MOVE)},this.isTouchMotionActive=function(){if(!I)return!1;return I.isTouchActive()},this.isItemThumbVisible=function(e){var t=e.objThumbWrapper,i=t.position(),n=-1*w.getInnerStripPos();if(0==S)var r=n+C.stripSize,o=i.left,a=i.left+t.width();else r=n+C.stripSize,o=i.top,a=i.top+t.height();var s=!1;return a>=n&&o<=r&&(s=!0),s},this.getInnerStripPos=function(){return 0==S?v.position().left:v.position().top},this.getInnerStripLimits=function(){var e={};return e.maxPos=0==S?x.strip_padding_left:x.strip_padding_top,e.minPos=-(C.stripInnerSize-C.stripActiveSize),e},this.fixInnerStripLimits=function(e){var t=w.getInnerStripLimits();return e>t.maxPos&&(e=t.maxPos),e<t.minPos&&(e=t.minPos),e},this.scrollForeward=function(){o(-C.stripSize)},this.scrollBack=function(){o(C.stripSize)},this.________EXTERNAL_SETTERS___________=function(){},this.setOptions=function(t){x=jQuery.extend(x,t),P.setOptions(t),e()},this.setSizeVertical=function(e){if(0==S)throw new Error("setSizeVertical error, the strip size is not vertical");var t=C.thumbSecondSize,i={};i.width=t+"px",i.height=e+"px",b.css(i),n(e);var r={};r.width=t+"px",r.left="0px",r.top="0px",v.css(r),j.is_placed=!0,u()},this.setSizeHorizontal=function(e){if(1==S)throw new Error("setSizeHorizontal error, the strip size is not horizontal");var t=C.thumbSecondSize+x.strip_padding_top+x.strip_padding_bottom,i={};i.width=e+"px",i.height=t+"px",b.css(i),n(e);var r=x.strip_padding_left,o={};o.height=t+"px",o.left=r+"px",o.top="0px",v.css(o),j.is_placed=!0,u()},this.setPosition=function(e,t,i,n){T.placeElement(b,e,t,i,n)},this.resize=function(e){0==S?(b.width(e),C.stripActiveSize=e-x.strip_padding_left-x.strip_padding_right):(b.height(e),C.stripActiveSize=e-x.strip_padding_top-x.strip_padding_bottom),n(e),u(),function(){if(0==g())return!1;var e=w.getInnerStripPos(),t=w.fixInnerStripLimits(e);e!=t&&w.positionInnerStrip(t,!0)}(),function(){if(g())return!1;0==S?T.placeElement(v,x.strip_thumbs_align,0):T.placeElement(v,0,x.strip_thumbs_align)}(),function(){var e=E.getSelectedItem();if(null==e)return!0;var t=e.objThumbWrapper;t&&l(t)}()},this.setThumbUnselected=function(e){P.setThumbUnselected(e)},this.setCustomThumbs=function(e){P.setCustomThumbs(e)},this.________EXTERNAL_GETTERS___________=function(){},this.getObjects=function(){var e=P.getOptions(),t=jQuery.extend(x,e);return{g_gallery:E,g_objGallery:h,g_objWrapper:m,g_arrItems:f,g_objStrip:b,g_objStripInner:v,g_aviaControl:y,g_touchThumbsControl:I,isVertical:S,g_options:t,g_thumbs:P}},this.getObjThumbs=function(){return P},this.getSelectedThumb=function(){var e=E.getSelectedItemIndex();return-1==e?null:P.getThumbByIndex(e)},this.getSizeAndPosition=function(){return T.getElementSize(b)},this.getHeight=function(){return b.outerHeight()},this.getWidth=function(){return b.outerWidth()},this.getSizes=function(){return C},this.isVertical=function(){return S},this.isPlaced=function(){return j.is_placed},this.isMoveEnabled=function(){return g()}}function UGTouchThumbsControl(){function e(){var e=jQuery.now(),t={};return t.passedTime=b.lastTime-b.startTime,t.lastActiveTime=e-b.buttonReleaseTime,t.passedDistance=b.lastPos-b.startPos,t.passedDistanceAbs=Math.abs(t.passedDistance),t}function t(e){return 0==p?m.getMousePosition(e).pageX:m.getMousePosition(e).pageY}function i(){var e=jQuery.now();e-b.lastTime>=f.touch_portion_time&&(b.lastDeltaTime=e-b.lastTime,b.lastDeltaTime>f.touch_portion_time&&(b.lastDeltaTime=f.touch_portion_time),b.lastDeltaPos=b.lastPos-b.lastPortionPos,b.lastPortionPos=b.lastPos,b.lastTime=e)}function n(){b.lastPos=l.getInnerStripPos(),l.triggerStripMoveEvent()}function r(e){if(0==b.loop_active)return!0;if(e){t(e);!function(){var e=f.thumb_touch_slowFactor,t=f.minDeltaTime,i=f.minPath,r=l.getInnerStripPos(),o=jQuery.now()-b.lastTime,a=r-b.lastPortionPos;o<t&&b.lastDeltaTime>0&&(o=b.lastDeltaTime,a=b.lastDeltaPos+a),o<t&&(o=t);var s=0;o>0&&(s=a/o);var u=s*s/(2*e)*(a>0?1:-1);Math.abs(u)<=i&&(u=0);var d=l.getInnerStripPos(),_=d+u,g=l.fixInnerStripLimits(_),h=l.getInnerStripLimits(),m=f.limitsBreakAddition,v=!1,y=g;if(_>h.maxPos&&(v=!0,g=m,_<m&&(g=_)),_<h.minPos){v=!0;var I=h.minPos-m;g=I,_>I&&(g=_)}var w=g-d,E=Math.abs(Math.round(s/e));if(0!=u&&(E=E*w/u),d!=g){var T={left:g+"px"};1==p&&(T={top:g+"px"}),c.animate(T,{duration:E,easing:f.animationEasing,queue:!0,progress:n})}if(1==v){var S=f.returnAnimateSpeed,P={left:y+"px"};1==p&&(P={top:y+"px"}),c.animate(P,{duration:S,easing:f.returnAnimationEasing,queue:!0,progress:n})}}()}b.loop_active=!1,b.handle=clearInterval(b.handle)}function o(e){return 0==b.isControlEnabled||(b.buttonReleaseTime=jQuery.now(),0==b.touch_active?(r(e),!0):(e.preventDefault(),b.touch_active=!1,r(e),void g.removeClass("ug-dragging")))}function a(e){if(0==b.isControlEnabled)return!0;e.preventDefault(),b.touch_active=!0;var n=t(e);c.stop(!0),function(e){var t=l.getInnerStripPos();b.mousePos=e,b.innerPos=t,b.lastPortionPos=t,b.lastDeltaTime=0,b.lastDeltaPos=0,b.startTime=jQuery.now(),b.startPos=b.innerPos,b.lastTime=b.startTime,b.lastPos=b.startPos,b.speed=0}(n),function(){if(1==b.loop_active)return!0;b.loop_active=!0,b.handle=setInterval(i,10)}(),g.addClass("ug-dragging")}function s(e){if(0==b.isControlEnabled)return!0;if(0==b.touch_active)return!0;if(e.preventDefault(),0==e.buttons)return b.touch_active=!1,r(e),!0;var n=t(e);b.lastPos=l.getInnerStripPos(),function(e){var t=b.mousePos-e,i=b.innerPos-t,n=l.getInnerStripLimits();if(i>n.maxPos){var r=i-n.maxPos;i=n.maxPos+r/3}i<n.minPos&&(r=n.minPos-i,i=n.minPos-r/3);l.positionInnerStrip(i)}(n),i()}var l,u,d,_,g,c,h,p,m=new UGFunctions,f={touch_portion_time:200,thumb_touch_slowFactor:0,minDeltaTime:70,minPath:10,limitsBreakAddition:30,returnAnimateSpeed:500,animationEasing:"easeOutCubic",returnAnimationEasing:"easeOutCubic"},b={touch_active:!1,loop_active:!1,mousePos:0,innerPos:0,startPos:0,startTime:0,lastTime:0,buttonReleaseTime:0,lastPos:0,lastPortionPos:0,lastDeltaTime:0,lastDeltaPos:0,speed:0,handle:"",touchEnabled:!1,isControlEnabled:!0};this.enable=function(){b.isControlEnabled=!0},this.disable=function(){b.isControlEnabled=!1},this.init=function(e){l=e,_=e.getObjects(),u=_.g_gallery,d=_.g_objGallery,g=_.g_objStrip,c=_.g_objStripInner,h=_.g_options,p=_.isVertical,f.thumb_touch_slowFactor=m.normalizeSetting(5e-5,.01,1,100,h.strip_thumb_touch_sensetivity,!0),g.bind("mousedown touchstart",a),jQuery(window).add("body").bind("mouseup touchend",o),jQuery("body").bind("mousemove touchmove",s)},this.isSignificantPassed=function(){var t=e();return t.passedTime>300||t.passedDistanceAbs>30},this.isTouchActive=function(){if(1==b.touch_active)return!0;if(1==c.is(":animated"))return!0;return e().lastActiveTime<50},this.destroy=function(){g.unbind("mousedown"),g.unbind("touchstart"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),jQuery("body").unbind("mousemove").unbind("touchmove")}}function UGPanelsBase(){function e(e,t){switch(n.orientation){case"right":case"left":var i={left:e+"px"};break;case"top":case"bottom":i={top:e+"px"}}o.stop(!0).animate(i,{duration:300,easing:"easeInOutQuad",queue:!1,complete:function(){t&&t()}})}function t(e){switch(n.orientation){case"right":case"left":g.placeElement(o,e,null);break;case"top":case"bottom":g.placeElement(o,null,e)}}function i(){s.trigger(r.events.FINISH_MOVE)}var n,r,o,a,s,l,u,d=new UniteGalleryMain,_=this,g=new UGFunctions;this.init=function(e,t,i,o,l){n=t,r=i,d=e,a=o,s=l,u=jQuery(d)},this.setHtml=function(e){if(o=e,"strip"==n.panelType)var t=a.strippanel_enable_handle;else t=a.gridpanel_enable_handle;if(1==t&&((l=new UGPanelHandle).init(r,o,a,n.panelType,d),l.setHtml()),!0===n.isDisabledAtStart){o.append("<div class='ug-overlay-disabled'></div>"),setTimeout(function(){o.children(".ug-overlay-disabled").hide()},n.disabledAtStartTimeout)}},this.placeElements=function(){l&&l.placeHandle()},this.initEvents=function(){l&&(l.initEvents(),u.on(d.events.SLIDER_ACTION_START,function(){l.hideHandle()}),u.on(d.events.SLIDER_ACTION_END,function(){l.showHandle()}))},this.destroy=function(){l&&(l.destroy(),u.off(d.events.SLIDER_ACTION_START),u.off(d.events.SLIDER_ACTION_END))},this.openPanel=function(a){if(!a)a=!1;return!o.is(":animated")&&(0!=n.isClosed&&(n.isClosed=!1,s.trigger(r.events.OPEN_PANEL),void(!1===a?e(n.originalPos,i):(t(n.originalPos),i()))))},this.closePanel=function(a){if(!a)a=!1;if(o.is(":animated"))return!1;if(1==n.isClosed)return!1;var l=_.getClosedPanelDest();n.isClosed=!0,s.trigger(r.events.CLOSE_PANEL),!1===a?e(l,i):(t(l),i())},this.setClosedState=function(e){n.originalPos=e,s.trigger(r.events.CLOSE_PANEL),n.isClosed=!0},this.setOpenedState=function(e){s.trigger(r.events.OPEN_PANEL),n.isClosed=!1},this.getClosedPanelDest=function(){var e,t=g.getElementSize(o);switch(n.orientation){case"left":n.originalPos=t.left,e=-n.panelWidth;break;case"right":n.originalPos=t.left;e=d.getSize().width;break;case"top":n.originalPos=t.top,e=-n.panelHeight;break;case"bottom":n.originalPos=t.top;e=d.getSize().height}return e},this.isPanelClosed=function(){return n.isClosed},this.setDisabledAtStart=function(e){if(e<=0)return!1;n.isDisabledAtStart=!0,n.disabledAtStartTimeout=e}}function UGPanelHandle(){function e(){r.removeClass("ug-button-hover")}function t(e){if(e.stopPropagation(),e.stopImmediatePropagation(),0==o.validateClickTouchstartEvent(e.type))return!0;n.isPanelClosed()?n.openPanel():n.closePanel()}var i,n,r,o=new UGFunctions,a={panel_handle_align:"top",panel_handle_offset:0,panel_handle_skin:0};this.init=function(e,t,r,o,s){switch(n=e,i=t,o){case"grid":a.panel_handle_align=r.gridpanel_handle_align,a.panel_handle_offset=r.gridpanel_handle_offset,a.panel_handle_skin=r.gridpanel_handle_skin;break;case"strip":a.panel_handle_align=r.strippanel_handle_align,a.panel_handle_offset=r.strippanel_handle_offset,a.panel_handle_skin=r.strippanel_handle_skin;break;default:throw new Error("Panel handle error: wrong panel type: "+o)}var l=s.getOptions().gallery_skin;""==a.panel_handle_skin&&(a.panel_handle_skin=l)},this.setHtml=function(){var e="ug-panel-handle-tip";switch(n.getOrientation()){case"right":e+=" ug-handle-tip-left";break;case"left":e+=" ug-handle-tip-right";break;case"bottom":e+=" ug-handle-tip-top";break;case"top":e+=" ug-handle-tip-bottom"}i.append("<div class='"+e+" ug-skin-"+a.panel_handle_skin+"'></div>"),r=i.children(".ug-panel-handle-tip")},this.initEvents=function(){o.addClassOnHover(r),r.bind("click touchstart",t),jQuery(n).on(n.events.OPEN_PANEL,function(){e(),r.removeClass("ug-button-closed")}),jQuery(n).on(n.events.CLOSE_PANEL,function(){e(),r.addClass("ug-button-closed")})},this.destroy=function(){o.destroyButton(r),jQuery(n).off(n.events.OPEN_PANEL),jQuery(n).off(n.events.CLOSE_PANEL)},this.placeHandle=function(){var e=o.getElementSize(r);!function(){switch(n.getOrientation()){case"right":case"left":"top"!=a.panel_handle_align&&"bottom"!=a.panel_handle_align&&(a.panel_handle_align="top");break;case"bottom":"left"!=a.panel_handle_align&&"right"!=a.panel_handle_align&&(a.panel_handle_align="left");break;case"top":"left"!=a.panel_handle_align&&"right"!=a.panel_handle_align&&(a.panel_handle_align="right")}}();var t=n.getOrientation();switch(t){case"left":o.placeElement(r,"right",a.panel_handle_align,-e.width);break;case"right":o.placeElement(r,-e.width,a.panel_handle_align,0,a.panel_handle_offset);break;case"top":o.placeElement(r,a.panel_handle_align,"bottom",a.panel_handle_offset,-e.height);break;case"bottom":o.placeElement(r,a.panel_handle_align,"top",a.panel_handle_offset,-e.height);break;default:throw new Error("Wrong panel orientation: "+t)}},this.hideHandle=function(){1==r.is(":visible")&&r.hide()},this.showHandle=function(){0==r.is(":visible")&&r.show()}}function UGStripPanel(){function e(){if(1==E.isFirstRun&&0==function(){if(0==y.strippanel_vertical_type){if(0==E.panelWidth)throw new Error("Strip panel error: The width not set, please set width")}else if(0==E.panelHeight)throw new Error("Strip panel error: The height not set, please set height");if(null==E.orientation)throw new Error("Wrong orientation, please set panel orientation before run");return!0}())return!1;b.run(),i(),n(),function(){if(1==E.isEventsInited)return!1;if(E.isEventsInited=!0,g)if(f.addClassOnHover(g,"ug-button-hover"),f.addClassOnHover(c,"ug-button-hover"),f.setButtonOnClick(c,o),f.setButtonOnClick(g,r),"advance_item"!=y.strippanel_buttons_role)jQuery(b).on(b.events.STRIP_MOVE,s),jQuery(b).on(b.events.INNER_SIZE_CHANGE,a),u.on(m.events.SIZE_CHANGE,a);else{var e=m.getOptions();0==e.gallery_carousel&&jQuery(m).on(m.events.ITEM_CHANGE,l)}v.initEvents()}(),E.isFirstRun=!1,a()}function t(e){if(!e)e=d;if(e.append("<div class='ug-strip-panel'></div>"),_=e.children(".ug-strip-panel"),1==y.strippanel_enable_buttons){var t="ug-strip-arrow-left",i="ug-strip-arrow-right";1==y.strippanel_vertical_type&&(t="ug-strip-arrow-up",i="ug-strip-arrow-down"),_.append("<div class='ug-strip-arrow "+t+" ug-skin-"+y.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>"),_.append("<div class='ug-strip-arrow "+i+" ug-skin-"+y.strippanel_buttons_skin+"'><div class='ug-strip-arrow-tip'></div></div>")}v.setHtml(_),b.setHtml(_),1==y.strippanel_enable_buttons&&(c=_.children("."+t),g=_.children("."+i)),""!=y.strippanel_background_color&&_.css("background-color",y.strippanel_background_color)}function i(){0==y.strippanel_vertical_type?function(){var e=b.getHeight(),t=E.panelWidth;if(g){c.height(e),g.height(e);var i=c.children(".ug-strip-arrow-tip");f.placeElement(i,"center","middle");var n=g.children(".ug-strip-arrow-tip");f.placeElement(n,"center","middle")}var r=e+y.strippanel_padding_top+y.strippanel_padding_bottom;_.width(t),_.height(r),E.panelHeight=r;var o=t-y.strippanel_padding_left-y.strippanel_padding_right;g&&(o=o-2*g.outerWidth()-2*y.strippanel_padding_buttons);b.resize(o)}():function(){var e=b.getWidth(),t=E.panelHeight;if(g){c.width(e),g.width(e);var i=c.children(".ug-strip-arrow-tip");f.placeElement(i,"center","middle");var n=g.children(".ug-strip-arrow-tip");f.placeElement(n,"center","middle")}var r=e+y.strippanel_padding_left+y.strippanel_padding_right;_.width(r),_.height(t),E.panelWidth=r;var o=t-y.strippanel_padding_top-y.strippanel_padding_bottom;g&&(o=o-2*g.outerHeight()-2*y.strippanel_padding_buttons);b.resize(o)}()}function n(){0==y.strippanel_vertical_type?function(){g&&(f.placeElement(c,"left","top",y.strippanel_padding_left,y.strippanel_padding_top),f.placeElement(g,"right","top",y.strippanel_padding_right,y.strippanel_padding_top));var e=y.strippanel_padding_left;g&&(e+=g.outerWidth()+y.strippanel_padding_buttons),b.setPosition(e,y.strippanel_padding_top)}():function(){g&&(f.placeElement(c,"left","top",y.strippanel_padding_left,y.strippanel_padding_top),f.placeElement(g,"left","bottom",y.strippanel_padding_left,y.strippanel_padding_bottom));var e=y.strippanel_padding_top;g&&(e+=g.outerHeight()+y.strippanel_padding_buttons),b.setPosition(y.strippanel_padding_left,e)}(),v.placeElements()}function r(e){if(f.isButtonDisabled(e))return!0;"advance_item"==y.strippanel_buttons_role?m.nextItem():b.scrollForeward()}function o(e){if(f.isButtonDisabled(e))return!0;"advance_item"==y.strippanel_buttons_role?m.prevItem():b.scrollBack()}function a(){if(!g)return!0;if(0==b.isMoveEnabled())return f.disableButton(c),f.disableButton(g),!0;var e=b.getInnerStripLimits(),t=b.getInnerStripPos();t>=e.maxPos?f.disableButton(c):f.enableButton(c),t<=e.minPos?f.disableButton(g):f.enableButton(g)}function s(){a()}function l(){m.isLastItem()?f.disableButton(g):f.enableButton(g),m.isFirstItem()?f.disableButton(c):f.enableButton(c)}var u,d,_,g,c,h=this,p=jQuery(this),m=new UniteGalleryMain,f=new UGFunctions,b=new UGThumbsStrip,v=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var y={strippanel_vertical_type:!1,strippanel_padding_top:8,strippanel_padding_bottom:8,strippanel_padding_left:0,strippanel_padding_right:0,strippanel_enable_buttons:!0,strippanel_buttons_skin:"",strippanel_padding_buttons:2,strippanel_buttons_role:"scroll_strip",strippanel_enable_handle:!0,strippanel_handle_align:"top",strippanel_handle_offset:0,strippanel_handle_skin:"",strippanel_background_color:""},I={strip_vertical_type:!0,strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:0,strippanel_padding_bottom:0},w={strippanel_padding_left:8,strippanel_padding_right:8,strippanel_padding_top:8,strippanel_padding_bottom:8},E={panelType:"strip",panelWidth:0,panelHeight:0,isEventsInited:!1,isClosed:!1,orientation:null,originalPos:null,isFirstRun:!0};this.destroy=function(){g&&(f.destroyButton(g),f.destroyButton(c),jQuery(b).off(b.events.STRIP_MOVE),jQuery(m).off(m.events.ITEM_CHANGE),jQuery(m).off(m.events.SIZE_CHANGE)),v.destroy(),b.destroy()},this.getOrientation=function(){return E.orientation},this.setOrientation=function(e){E.orientation=e},this.init=function(e,t){!function(e,t){m=e,u=jQuery(m);var i=!1;1==(y=jQuery.extend(y,t)).strippanel_vertical_type&&(y=jQuery.extend(y,I),i=!0),0==y.strippanel_enable_buttons&&(y=jQuery.extend(y,w),i=!0),1==i&&(y=jQuery.extend(y,t));var n=m.getOptions().gallery_skin;""==y.strippanel_buttons_skin&&(y.strippanel_buttons_skin=n),d=m.getElement(),v.init(m,E,h,y,p),(b=new UGThumbsStrip).init(m,y)}(e,t)},this.run=function(){e()},this.setHtml=function(e){t(e)},this.getElement=function(){return _},this.getSize=function(){return f.getElementSize(_)},this.setWidth=function(e){E.panelWidth=e},this.setHeight=function(e){E.panelHeight=e},this.resize=function(e){h.setWidth(e),i(),n()},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return v.isPanelClosed()},this.getClosedPanelDest=function(){return v.getClosedPanelDest()},this.openPanel=function(e){v.openPanel(e)},this.closePanel=function(e){v.closePanel(e)},this.setOpenedState=function(e){v.setOpenedState(e)},this.setClosedState=function(e){v.setClosedState(e)},this.setCustomThumbs=function(e){b.setCustomThumbs(e)},this.setDisabledAtStart=function(e){v.setDisabledAtStart(e)}}function UGGridPanel(){function e(){if(null==b.orientation)throw new Error("Wrong orientation, please set panel orientation before run")}function t(){e(),"center"==p.gridpanel_grid_align&&(p.gridpanel_grid_align="middle"),c.run(),function(){var e=!1;if(1==p.gridpanel_arrows_always_on)e=!0;else{var t=c.getNumPanes();t>1&&(e=!0)}1==e?(s.show().fadeTo(0,1),l.show().fadeTo(0,1),b.arrowsVisible=!0):(s.hide(),l.hide(),b.arrowsVisible=!1)}(),function(){var e=c.getSize();1==b.isHorType?b.panelHeight=e.height+p.gridpanel_padding_border_top+p.gridpanel_padding_border_bottom:b.panelWidth=e.width+p.gridpanel_padding_border_left+p.gridpanel_padding_border_right;g.setElementSize(a,b.panelWidth,b.panelHeight)}(),function(){0==b.isHorType?1==p.gridpanel_vertical_scroll?1==b.arrowsVisible?function(){var e,t,i,r,o=g.getElementSize(l),a=c.getSize();switch(p.gridpanel_grid_align){default:case"top":e=p.gridpanel_padding_border_top+o.height+p.gridpanel_arrows_padding_vert;break;case"middle":e="middle";break;case"bottom":e=b.panelHeight-a.height-o.height-p.gridpanel_padding_border_bottom-p.gridpanel_arrows_padding_vert}var u=n(),d=c.getElement();g.placeElement(d,u,e);var a=c.getSize();switch(p.gridpanel_arrows_align_vert){default:case"center":case"middle":t=(a.top-o.height)/2,i=a.bottom+(b.panelHeight-a.bottom-o.height)/2,r=0;break;case"grid":t=a.top-o.height-p.gridpanel_arrows_padding_vert_vert,i=a.bottom+p.gridpanel_arrows_padding_vert,r=0;break;case"border":case"borders":t=p.gridpanel_padding_border_top,i="bottom",r=p.gridpanel_padding_border_bottom}g.placeElement(l,"center",t),g.placeElement(s,"center",i,0,r)}():r():1==b.arrowsVisible?function(){var e,t,i,r=g.getElementSize(l),o=c.getSize(),a=p.gridpanel_padding_border_top;switch(p.gridpanel_grid_align){case"middle":switch(p.gridpanel_arrows_align_vert){default:var u=o.height+p.gridpanel_arrows_padding_vert+r.height;a=(b.panelHeight-u)/2;break;case"border":case"borders":var d=b.panelHeight-r.height-p.gridpanel_padding_border_bottom;a=(d-o.height)/2}break;case"bottom":var u=o.height+r.height+p.gridpanel_arrows_padding_vert;a=b.panelHeight-u-p.gridpanel_padding_border_bottom}var _=c.getElement(),h=n();g.placeElement(_,h,a);var o=c.getSize();switch(p.gridpanel_arrows_align_vert){default:case"center":case"middle":e=o.bottom+(b.panelHeight-o.bottom-r.height)/2,i=0;break;case"grid":e=o.bottom+p.gridpanel_arrows_padding_vert,i=0;break;case"border":case"borders":e="bottom",i=p.gridpanel_padding_border_bottom}t=-r.width/2-p.gridpanel_space_between_arrows/2,g.placeElement(l,"center",e,t,i);var m=Math.abs(t);g.placeElement(s,"center",e,m,i)}():r():1==b.arrowsVisible?function(){var e,t,i,n,r=g.getElementSize(l),o=c.getSize();switch(p.gridpanel_grid_align){default:case"left":e=p.gridpanel_padding_border_left+p.gridpanel_arrows_padding_hor+r.width;break;case"middle":case"center":e="center";break;case"right":e=b.panelWidth-o.width-r.width-p.gridpanel_padding_border_right-p.gridpanel_arrows_padding_hor}var a=c.getElement();switch(g.placeElement(a,e,p.gridpanel_padding_border_top),o=c.getSize(),p.gridpanel_arrows_align_vert){default:case"center":case"middle":n=(o.height-r.height)/2+o.top;break;case"top":n=p.gridpanel_padding_border_top+p.gridpanel_arrows_padding_vert;break;case"bottom":n=b.panelHeight-p.gridpanel_padding_border_bottom-p.gridpanel_arrows_padding_vert-r.height}switch(p.gridpanel_arrows_align_hor){default:case"borders":t=p.gridpanel_padding_border_left,i=b.panelWidth-p.gridpanel_padding_border_right-r.width;break;case"grid":t=o.left-p.gridpanel_arrows_padding_hor-r.width,i=o.right+p.gridpanel_arrows_padding_hor;break;case"center":t=(o.left-r.width)/2,i=o.right+(b.panelWidth-o.right-r.width)/2}g.placeElement(l,t,n),g.placeElement(s,i,n)}():function(){var e,t=c.getSize();switch(p.gridpanel_grid_align){default:case"left":e=p.gridpanel_padding_border_left;break;case"middle":case"center":e="center";break;case"right":e=b.panelWidth-t.width-p.gridpanel_padding_border_right}var i=c.getElement();g.placeElement(i,e,p.gridpanel_padding_border_top)}();h.placeElements()}(),function(){if(1==b.isEventsInited)return!1;b.isEventsInited=!0,l&&(g.addClassOnHover(l),c.attachPrevPaneButton(l));s&&(g.addClassOnHover(s),c.attachNextPaneButton(s));h.initEvents()}()}function i(){o.append("<div class='ug-grid-panel'></div>"),a=o.children(".ug-grid-panel"),b.isHorType?(a.append("<div class='grid-arrow grid-arrow-left-hortype ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),a.append("<div class='grid-arrow grid-arrow-right-hortype ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),l=a.children(".grid-arrow-left-hortype"),s=a.children(".grid-arrow-right-hortype")):0==p.gridpanel_vertical_scroll?(a.append("<div class='grid-arrow grid-arrow-left ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),a.append("<div class='grid-arrow grid-arrow-right ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),l=a.children(".grid-arrow-left"),s=a.children(".grid-arrow-right")):(a.append("<div class='grid-arrow grid-arrow-up ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),a.append("<div class='grid-arrow grid-arrow-down ug-skin-"+p.gridpanel_arrows_skin+"'></div>"),l=a.children(".grid-arrow-up"),s=a.children(".grid-arrow-down")),h.setHtml(a),l.fadeTo(0,0),s.fadeTo(0,0),c.setHtml(a),""!=p.gridpanel_background_color&&a.css("background-color",p.gridpanel_background_color)}function n(){return p.gridpanel_padding_border_left}function r(){var e=p.gridpanel_grid_align,t=0;switch(e){case"top":t=p.gridpanel_padding_border_top;break;case"bottom":t=p.gridpanel_padding_border_bottom}var i=n(),r=c.getElement();g.placeElement(r,i,e,0,t)}var o,a,s,l,u=this,d=jQuery(this),_=new UniteGalleryMain,g=new UGFunctions,c=new UGThumbsGrid,h=new UGPanelsBase;this.events={FINISH_MOVE:"gridpanel_move_finish",OPEN_PANEL:"open_panel",CLOSE_PANEL:"close_panel"};var p={gridpanel_vertical_scroll:!0,gridpanel_grid_align:"middle",gridpanel_padding_border_top:10,gridpanel_padding_border_bottom:4,gridpanel_padding_border_left:10,gridpanel_padding_border_right:10,gridpanel_arrows_skin:"",gridpanel_arrows_align_vert:"middle",gridpanel_arrows_padding_vert:4,gridpanel_arrows_align_hor:"center",gridpanel_arrows_padding_hor:10,gridpanel_space_between_arrows:20,gridpanel_arrows_always_on:!1,gridpanel_enable_handle:!0,gridpanel_handle_align:"top",gridpanel_handle_offset:0,gridpanel_handle_skin:"",gridpanel_background_color:""},m={gridpanel_grid_align:"middle",gridpanel_padding_border_top:2,gridpanel_padding_border_bottom:2},f={gridpanel_grid_align:"center"},b={panelType:"grid",isHorType:!1,arrowsVisible:!1,panelHeight:0,panelWidth:0,originalPosX:null,isEventsInited:!1,isClosed:!1,orientation:null};this.destroy=function(){l&&g.destroyButton(l),s&&g.destroyButton(s),h.destroy(),c.destroy()},this.getOrientation=function(){return b.orientation},this.setOrientation=function(e){switch(b.orientation=e,e){case"right":case"left":b.isHorType=!1;break;case"top":case"bottom":b.isHorType=!0;break;default:throw new Error("Wrong grid panel orientation: "+e)}},this.setHeight=function(e){if(1==b.isHorType)throw new Error("setHeight is not appliable to this orientatio ("+b.orientation+"). Please use setWidth");b.panelHeight=e;var t=function(){var e=p.gridpanel_padding_border_top+p.gridpanel_padding_border_bottom,t=b.panelHeight-e;if(0==p.gridpanel_arrows_always_on&&1==c.getNumPanesEstimationByHeight(t))return t;return e=g.getElementSize(s).height+p.gridpanel_arrows_padding_vert,1==p.gridpanel_vertical_scroll&&(e*=2),e+=p.gridpanel_padding_border_top+p.gridpanel_padding_border_bottom,t=b.panelHeight-e}();c.setMaxHeight(t)},this.setWidth=function(e){if(0==b.isHorType)throw new Error("setWidth is not appliable to this orientatio ("+b.orientation+"). Please use setHeight");b.panelWidth=e;var t=function(){var e=p.gridpanel_padding_border_left+p.gridpanel_padding_border_right,t=b.panelWidth-e;if(0==p.gridpanel_arrows_always_on&&1==c.getNumPanesEstimationByWidth(t))return t;return e+=2*(g.getElementSize(s).width+p.gridpanel_arrows_padding_hor),t=b.panelWidth-e}();c.setMaxWidth(t)},this.init=function(t,i){!function(t,i){_=t,e(),i&&i.vertical_scroll&&(p.gridpanel_vertical_scroll=i.vertical_scroll),p=jQuery.extend(p,i),1==b.isHorType?(p=jQuery.extend(p,f),p=jQuery.extend(p,i)):1==p.gridpanel_vertical_scroll&&(p=jQuery.extend(p,m),(p=jQuery.extend(p,i)).grid_panes_direction="bottom");var n=_.getOptions().gallery_skin;""==p.gridpanel_arrows_skin&&(p.gridpanel_arrows_skin=n);var r=t.getObjects();o=r.g_objWrapper,h.init(_,b,u,p,d),(c=new UGThumbsGrid).init(_,p)}(t,i)},this.setHtml=function(){i()},this.run=function(){t()},this.getElement=function(){return a},this.getSize=function(){return g.getElementSize(a)},this.__________Functions_From_Base_____=function(){},this.isPanelClosed=function(){return h.isPanelClosed()},this.getClosedPanelDest=function(){return h.getClosedPanelDest()},this.openPanel=function(e){h.openPanel(e)},this.closePanel=function(e){h.closePanel(e)},this.setOpenedState=function(e){h.setOpenedState(e)},this.setClosedState=function(e){h.setClosedState(e)},this.setDisabledAtStart=function(e){h.setDisabledAtStart(e)}}function UGThumbsGrid(){function e(e,t,i){if(y=e.getObjects(),(x=e).attachThumbsPanel("grid",S),v=jQuery(e),I=y.g_objWrapper,w=y.g_arrItems,!0===i&&(O.isTilesMode=!0),O.numThumbs=w.length,function(e){M=jQuery.extend(M,e),C.setOptions(e),O.isNavigationVertical="top"==M.grid_panes_direction||"bottom"==M.grid_panes_direction,O.spaceBetweenCols=M.grid_space_between_cols,O.spaceBetweenRows=M.grid_space_between_rows}(t),1==O.isTilesMode){A.setFixedMode(),A.setApproveClickFunction(c),A.init(e,M);var n=A.getOptions();O.tileMaxHeight=n.tile_height,O.tileMaxWidth=n.tile_width,C=A.getObjThumbs()}else t.thumb_fixed_size=!0,C.init(e,t)}function t(){var e=x.getSelectedItem();if(function(){if(0==O.isHorizontal){if(0==O.gridHeight)throw new Error("You must set height before run.")}else if(0==O.gridWidth)throw new Error("You must set width before run.")}(),1==O.isFirstTimeRun)!function(){if(0==O.isTilesMode){C.initEvents();var e=E.find(".ug-thumb-wrapper");e.on("click touchend",h),v.on(x.events.ITEM_CHANGE,b)}else A.initEvents();E.bind("mousedown touchstart",p),jQuery("body").bind("mousemove touchmove",m),jQuery(window).add("body").bind("mouseup touchend",f)}(),1==O.isTilesMode?(r(),o(),A.run()):(C.setHtmlProperties(),o(),C.loadThumbsImages());else if(1==O.isTilesMode){1==r()&&(o(),A.run())}if(0==O.isHorizontal?O.isNavigationVertical?function(){var e=T.children(".ug-thumb-wrapper"),t=0,n=0,r=0,o=0,a=0,s=0;O.innerWidth=0,O.numPanes=1,O.arrPanes=[],O.numThumbsInPane=0,O.arrPanes.push(a);var l=e.length;for(i=0;i<l;i++){var u=jQuery(e[i]);j.placeElement(u,t,n);var d=u.outerWidth(),_=u.outerHeight();t+=d+O.spaceBetweenCols;var g=n+_;g>r&&(r=g),++o>=M.grid_num_cols&&(n+=_+O.spaceBetweenRows,t=a,o=0),1==O.numPanes&&O.numThumbsInPane++,g=n+_;var c=s+O.gridHeight;g>c&&(1==O.isMaxHeight&&1==O.numPanes&&(O.gridHeight=r,E.height(O.gridHeight),c=O.gridHeight),n=c+O.spaceBetweenRows,s=n,t=a=0,o=0,i<l-1&&(O.numPanes++,O.arrPanes.push(n)))}T.height(r),O.innerHeight=r,1==O.isMaxHeight&&1==O.numPanes&&(O.gridHeight=r,E.height(r))}():function(){var e=T.children(".ug-thumb-wrapper"),t=0,n=0,r=0,o=0,a=0,s=0;O.innerWidth=0,O.numPanes=1,O.arrPanes=[],O.numThumbsInPane=0,O.arrPanes.push(o);var l=e.length;for(i=0;i<l;i++){var u=jQuery(e[i]);j.placeElement(u,t,n);var d=u.outerWidth(),_=u.outerHeight();t>a&&(a=t);var g=n+_;g>s&&(s=g);var c=a+d;c>O.innerWidth&&(O.innerWidth=c),t+=d+O.spaceBetweenCols,++r>=M.grid_num_cols&&(n+=_+O.spaceBetweenRows,t=o,r=0),1==O.numPanes&&O.numThumbsInPane++,n+_>O.gridHeight&&(n=0,o=O.innerWidth+O.spaceBetweenCols,t=o,r=0,1==O.isMaxHeight&&1==O.numPanes&&(O.gridHeight=s,E.height(O.gridHeight)),i<l-1&&(O.numPanes++,O.arrPanes.push(o)))}T.width(O.innerWidth),1==O.isMaxHeight&&1==O.numPanes&&(O.gridHeight=s,E.height(s))}():function(){var e=T.children(".ug-thumb-wrapper"),t=M.grid_padding,n=M.grid_padding,r=n,o=t,a=0,s=0,l=0,u=0,d=0;O.innerWidth=0,O.numPanes=1,O.arrPanes=[],O.numThumbsInPane=0,O.arrPanes.push(t-M.grid_padding);var _=e.length;for(i=0;i<_;i++){var g=jQuery(e[i]),c=g.outerWidth(),h=g.outerHeight();o-t+c>O.gridWidth&&(r=0,++d>=M.grid_num_rows?(d=0,t=o,r=n,l=0,1==O.numPanes&&(O.gridWidth=a+M.grid_padding,E.width(O.gridWidth),O.gridHeight=u+M.grid_padding,E.height(O.gridHeight)),O.numPanes++,O.arrPanes.push(t-M.grid_padding)):(o=t,r=l+O.spaceBetweenRows)),j.placeElement(g,o,r);var p=o+c;p>a&&(a=p);var m=r+h;m>l&&(l=m),m>u&&(u=m),m>s&&(s=m);var p=a+c;p>O.innerWidth&&(O.innerWidth=p),o+=c+O.spaceBetweenCols,1==O.numPanes&&O.numThumbsInPane++}O.innerWidth=a+M.grid_padding,O.innerHeight=u+M.grid_padding,T.width(O.innerWidth),T.height(O.innerHeight),1==O.numPanes&&(O.gridWidth=a+M.grid_padding,O.gridHeight=u+M.grid_padding,E.width(O.gridWidth),E.height(O.gridHeight))}(),1==O.isFirstTimeRun&&O.isTilesMode){var t=C.getThumbs();t.each(function(e,t){I.trigger(O.eventSizeChange,jQuery(t))}),t.fadeTo(0,1)}null!=e&&a(e.index),P.trigger(S.events.PANE_CHANGE,O.currentPane),O.isFirstTimeRun=!1}function n(){if(1==O.isTilesMode)var e=A.getGlobalTileSize();else e=C.getGlobalThumbSize();return e}function r(){if(0==O.isTilesMode)throw new Error("Dynamic size can be set only in tiles mode");var e=!1,t=x.isMobileMode(),i=O.spaceBetweenCols;1==t?(O.spaceBetweenCols=M.grid_space_between_mobile,O.spaceBetweenRows=M.grid_space_between_mobile):(O.spaceBetweenCols=M.grid_space_between_cols,O.spaceBetweenRows=M.grid_space_between_rows),O.spaceBetweenCols!=i&&(e=!0);var r=n().width,o=O.tileMaxWidth;return j.getNumItemsInSpace(O.gridWidth,O.tileMaxWidth,O.spaceBetweenCols)<M.grid_min_cols&&(o=j.getItemSizeInSpace(O.gridWidth,M.grid_min_cols,O.spaceBetweenCols)),A.setTileSizeOptions(o),o!=r&&(e=!0),e}function o(){0==O.isHorizontal?function(){var e=n().width,t=M.grid_num_cols*e+(M.grid_num_cols-1)*O.spaceBetweenCols+2*M.grid_padding,i=O.gridHeight;O.gridWidth=t,j.setElementSize(E,t,i),j.setElementSize(T,t,i),O.innerWidth=t,O.innerHeight=i}():function(){var e=n().height,t=O.gridWidth,i=M.grid_num_rows*e+(M.grid_num_rows-1)*O.spaceBetweenRows+2*M.grid_padding;O.gridHeight=i,j.setElementSize(E,t,i),j.setElementSize(T,t,i),O.innerWidth=t,O.innerHeight=i}()}function a(e){var t=_(e);if(-1==t)return!1;S.gotoPane(t,"scroll")}function s(e){var t=u(e);if(0==t)return!1;T.stop(!0).animate(t,{duration:M.grid_transition_duration,easing:M.grid_transition_easing,queue:!1})}function l(){s(-O.arrPanes[O.currentPane])}function u(e){var t={};return 1==O.isNavigationVertical?t.top=e+"px":t.left=e+"px",t}function d(){var e=j.getElementSize(T);return 1==O.isNavigationVertical?e.top:e.left}function _(e){if(0==function(e){if(e<0||e>=O.numThumbs)throw new Error("Thumb not exists: "+e);return!0}(e))return-1;return Math.floor(e/O.numThumbsInPane)}function g(){var e=j.getStoredEventData(O.storedEventID),t=d();diffPos=Math.abs(e.startInnerPos-t);var i=1==O.isNavigationVertical?O.gridHeight:O.gridWidth,n=Math.round(3*i/8);return diffPos>=n||e.diffTime<300&&diffPos>25}function c(){if(1==O.numPanes)return!0;return j.isApproveStoredEventClick(O.storedEventID,O.isNavigationVertical)}function h(e){if(1==function(){if(1==O.numPanes)return!1;var e=j.getStoredEventData(O.storedEventID),t=e.diffTime,i=d(),n=Math.abs(i-e.startInnerPos);return n>30||n>5&&t>300}())return!0;var t=jQuery(this),i=C.getItemByThumb(t);x.selectItem(i)}function p(e){if(1==O.numPanes)return!0;if(1==O.touchActive)return!0;0==O.isTilesMode&&e.preventDefault(),O.touchActive=!0;var t={startInnerPos:d()};j.storeEventData(e,O.storedEventID,t)}function m(e){if(0==O.touchActive)return!0;e.preventDefault(),j.updateStoredEventData(e,O.storedEventID);var t=j.getStoredEventData(O.storedEventID,O.isNavigationVertical);if(0!=M.grid_vertical_scroll_ondrag&&1!=O.isNavigationVertical&&"vert"===j.handleScrollTop(O.storedEventID))return!0;var i=t.diffMousePos,n=t.startInnerPos+i,r=i>0?"prev":"next",o=O.arrPanes[O.numPanes-1];0==M.grid_carousel&&n>0&&"prev"==r&&(n/=3),0==M.grid_carousel&&n<-o&&"next"==r&&(n=t.startInnerPos+i/3),function(e){var t=u(e);if(0==t)return!1;T.css(t)}(n)}function f(e){if(0==O.touchActive)return!0;j.updateStoredEventData(e,O.storedEventID);var t=j.getStoredEventData(O.storedEventID,O.isNavigationVertical);if(O.touchActive=!1,0==g())return l(),!0;"next"==(d()-t.startInnerPos>0?"prev":"next")?0==M.grid_carousel&&S.isLastPane()?l():S.nextPane():0==M.grid_carousel&&S.isFirstPane()?l():S.prevPane()}function b(){var e=x.getSelectedItem();C.setThumbSelected(e.objThumbWrapper),a(e.index)}var v,y,I,w,E,T,S=this,P=jQuery(this),x=new UniteGalleryMain,j=new UGFunctions,C=new UGThumbsGeneral,A=new UGTileDesign,M={grid_panes_direction:"left",grid_num_cols:2,grid_min_cols:2,grid_num_rows:2,grid_space_between_cols:10,grid_space_between_rows:10,grid_space_between_mobile:10,grid_transition_duration:300,grid_transition_easing:"easeInOutQuad",grid_carousel:!1,grid_padding:0,grid_vertical_scroll_ondrag:!1};this.events={PANE_CHANGE:"pane_change"};var O={eventSizeChange:"thumb_size_change",isHorizontal:!1,isMaxHeight:!1,isMaxWidth:!1,gridHeight:0,gridWidth:0,innerWidth:0,innerHeight:0,numPanes:0,arrPanes:0,numThumbs:0,currentPane:0,numThumbsInPane:0,isNavigationVertical:!1,touchActive:!1,startScrollPos:0,isFirstTimeRun:!0,isTilesMode:!1,storedEventID:"thumbsgrid",tileMaxWidth:null,tileMaxHeight:null,spaceBetweenCols:null,spaceBetweenRows:null};this.destroy=function(){if(0==O.isTilesMode){var e=E.find(".ug-thumb-wrapper");e.off("click"),e.off("touchend"),v.on(x.events.ITEM_CHANGE),C.destroy()}else A.destroy();E.unbind("mousedown"),E.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("touchend"),jQuery(window).add("body").unbind("mouseup"),P.off(S.events.PANE_CHANGE)},this.__________EXTERNAL_GENERAL_________=function(){},this.setThumbUnselected=function(e){C.setThumbUnselected(e)},this.isItemThumbVisible=function(e){return _(e.index)==O.currentPane},this.__________EXTERNAL_API_________=function(){},this.getNumPanesEstimationByHeight=function(e){if(1==O.isTilesMode)var t=M.tile_height;else t=C.getOptions().thumb_height;var i=C.getNumThumbs(),n=Math.ceil(i/M.grid_num_cols),r=n*t+(n-1)*O.spaceBetweenRows;return Math.ceil(r/e)},this.getNumPanesEstimationByWidth=function(e){if(O.isTilesMode)var t=M.tile_width;else t=C.getOptions().thumb_width;var i=C.getNumThumbs(),n=Math.ceil(i/M.grid_num_rows),r=n*t+(n-1)*O.spaceBetweenCols;return Math.ceil(r/e)},this.getHeightEstimationByWidth=function(e){if(0==O.isTilesMode)throw new Error("This function works only with tiles mode");var t=C.getNumThumbs(),i=j.getNumItemsInSpace(e,M.tile_width,O.spaceBetweenCols),n=Math.ceil(t/i);n>M.grid_num_rows&&(n=M.grid_num_rows);var r=j.getSpaceByNumItems(n,M.tile_height,O.spaceBetweenRows);return r+=2*M.grid_padding},this.getElement=function(){return E},this.getSize=function(){return j.getElementSize(E)},this.getNumPanes=function(){return O.numPanes},this.isFirstPane=function(){return 0==O.currentPane},this.isLastPane=function(){return O.currentPane==O.numPanes-1},this.getPaneInfo=function(){return{pane:O.currentPane,total:O.numPanes}},this.getPane=function(){return O.currentPane},this.setWidth=function(e){O.gridWidth=e,O.isHorizontal=!0},this.setMaxWidth=function(e){O.gridWidth=e,O.isMaxWidth=!0,O.isHorizontal=!0},this.setHeight=function(e){O.gridHeight=e,O.isHorizontal=!1},this.setMaxHeight=function(e){O.gridHeight=e,O.isMaxHeight=!0,O.isHorizontal=!1},this.gotoPane=function(e,t){if(0==function(e){if(e>=O.numPanes||e<0)throw new Error("Pane "+index+" doesn't exists.");return!0}(e))return!1;if(e==O.currentPane)return!1;var i=-O.arrPanes[e];O.currentPane=e,s(i),P.trigger(S.events.PANE_CHANGE,e)},this.nextPane=function(){var e=O.currentPane+1;if(e>=O.numPanes){if(0==M.grid_carousel)return!0;e=0}S.gotoPane(e,"next")},this.prevPane=function(){var e=O.currentPane-1;if(e<0&&(e=O.numPanes-1,0==M.grid_carousel))return!1;S.gotoPane(e,"prev")},this.attachNextPaneButton=function(e){if(j.setButtonOnClick(e,S.nextPane),1==M.grid_carousel)return!0;S.isLastPane()&&e.addClass("ug-button-disabled"),P.on(S.events.PANE_CHANGE,function(){S.isLastPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")})},this.attachPrevPaneButton=function(e){if(j.setButtonOnClick(e,S.prevPane),1==M.grid_carousel)return!0;S.isFirstPane()&&e.addClass("ug-button-disabled"),P.on(S.events.PANE_CHANGE,function(){S.isFirstPane()?e.addClass("ug-button-disabled"):e.removeClass("ug-button-disabled")})},this.attachBullets=function(e){e.setActive(O.currentPane),jQuery(e).on(e.events.BULLET_CLICK,function(t,i){S.gotoPane(i,"theme"),e.setActive(i)}),jQuery(S).on(S.events.PANE_CHANGE,function(t,i){e.setActive(i)})},this.getObjTileDesign=function(){return A},this.init=function(t,i,n){e(t,i,n)},this.run=function(){t()},this.setHtml=function(e){!function(e){var t=I;e&&(t=e),t.append("<div class='ug-thumbs-grid'><div class='ug-thumbs-grid-inner'></div></div>"),E=t.children(".ug-thumbs-grid"),T=E.children(".ug-thumbs-grid-inner"),1==O.isTilesMode?A.setHtml(T):C.setHtmlThumbs(T)}(e)}}function UGTiles(){function e(e,t){g_objects=e.getObjects(),k=e,C=jQuery(e),A=g_objects.g_objWrapper,O=g_objects.g_arrItems,W=jQuery.extend(W,t),function(){W.tiles_min_columns<1&&(W.tiles_min_columns=1);0!=W.tiles_max_columns&&W.tiles_max_columns<W.tiles_min_columns&&(W.tiles_max_columns=W.tiles_min_columns)}(),G.init(e,W),D=G.getObjThumbs()}function t(){if(M.addClass("ug-tiles-rest-mode"),F.isTransInited=!0,1==W.tiles_enable_transition){M.addClass("ug-tiles-transit");var e=G.getOptions();1==e.tile_enable_image_effect&&0==e.tile_image_effect_reverse&&M.addClass("ug-tiles-transit-overlays"),F.isTransActive=!0}}function i(){return R.getElementSize(M).width}function n(){return 0!=F.isTransInited&&(M.addClass("ug-tiles-transition-active"),M.removeClass("ug-tiles-rest-mode"),0!=F.isTransActive&&void G.disableEvents())}function r(){if(0==F.isTransInited)return!1;M.removeClass("ug-tiles-transition-active"),M.addClass("ug-tiles-rest-mode")}function o(){1==F.isTransActive?(setTimeout(function(){G.enableEvents(),G.triggerSizeChangeEventAllTiles(),r()},800),F.handle&&clearTimeout(F.handle),F.handle=setTimeout(function(){r(),G.triggerSizeChangeEventAllTiles(),F.handle=null},2e3)):(G.triggerSizeChangeEventAllTiles(),r())}function a(){Q.colWidth=(Q.availWidth-Q.colGap*(Q.numCols-1))/Q.numCols,Q.colWidth=Math.floor(Q.colWidth),Q.totalWidth=R.getSpaceByNumItems(Q.numCols,Q.colWidth,Q.colGap)}function s(){if(Q.colWidth=W.tiles_col_width,Q.minCols=W.tiles_min_columns,Q.maxCols=W.tiles_max_columns,0==k.isMobileMode()?Q.colGap=W.tiles_space_between_cols:Q.colGap=W.tiles_space_between_cols_mobile,Q.galleryWidth=i(),Q.availWidth=Q.galleryWidth,1==W.tiles_include_padding&&(Q.availWidth=Q.galleryWidth-2*Q.colGap),1==W.tiles_exact_width)Q.numCols=R.getNumItemsInSpace(Q.availWidth,Q.colWidth,Q.colGap),Q.maxCols>0&&Q.numCols>Q.maxCols&&(Q.numCols=Q.maxCols),Q.numCols<Q.minCols?(Q.numCols=Q.minCols,a()):Q.totalWidth=Q.numCols*(Q.colWidth+Q.colGap)-Q.colGap;else{var e=R.getNumItemsInSpaceRound(Q.availWidth,Q.colWidth,Q.colGap);e<Q.minCols?e=Q.minCols:0!=Q.maxCols&&e>Q.maxCols&&(e=Q.maxCols),Q.numCols=e,a()}switch(W.tiles_align){case"center":default:Q.addX=Math.round((Q.galleryWidth-Q.totalWidth)/2);break;case"left":Q.addX=0;break;case"right":Q.addX=Q.galleryWidth-Q.totalWidth}for(Q.maxColHeight=0,Q.arrPosx=[],col=0;col<Q.numCols;col++){var t=R.getColX(col,Q.colWidth,Q.colGap);Q.arrPosx[col]=t+Q.addX}Q.colHeights=[0]}function l(e,t,i,n){if(null===n||void 0===n)n=function(){var e=0,t=999999999;for(col=0;col<Q.numCols;col++){if(void 0==Q.colHeights[col]||0==Q.colHeights[col])return col;Q.colHeights[col]<t&&(e=col,t=Q.colHeights[col])}return e}();var r=0;void 0!==Q.colHeights[n]&&(r=Q.colHeights[n]);var o=G.getTileHeightByWidth(Q.colWidth,e,"placeTile");if(null===o){if(1==W.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");o=R.getElementSize(e).height}var a=Q.arrPosx[n];R.placeElement(e,a,r);var s=r+o;Q.colHeights[n]=s+Q.colGap,Q.maxColHeight<s&&(Q.maxColHeight=s),1==t&&e.show().fadeTo(0,1),1==i&&M.height(Q.maxColHeight)}function u(e){e||(e=!1),s();var t=D.getThumbs();n(),G.resizeAllTiles(Q.colWidth,G.resizemode.VISIBLE_ELEMENTS);for(var i=0;i<t.length;i++){var r=jQuery(t[i]),a=void 0;1==W.tiles_keep_order&&(a=R.getColByIndex(Q.numCols,i)),l(r,e,!1,a)}o();var u=M.height();1==F.isTransActive&&u>Q.maxColHeight?setTimeout(function(){M.height(Q.maxColHeight)},700):M.height(Q.maxColHeight)}function d(e,t){if(!0!==t){if(0==function(e){var t=e.index();if(!0===k.getItem(t).ordered_placed)return!1;var i=R.getPrevRowSameColIndex(t,Q.numCols);return i<0||!0===k.getItem(i).ordered_placed}(e))return!1}var i=e.index(),n=R.getColByIndex(Q.numCols,i),r=k.getItem(i);G.resizeTile(e,Q.colWidth),l(e,!0,!0,n),r.ordered_placed=!0;var o=k.getNumItems(),a=R.getNextRowSameColIndex(i,Q.numCols);if(a>=o)return!1;var s=D.getThumbByIndex(a),u=k.getItem(a);D.isThumbLoaded(s);D.isThumbLoaded(s)&&!u.ordered_placed&&d(s,!0)}function _(){var e=D.getThumbs();F.isAllLoaded=!1,s();var i=Math.abs(Q.galleryWidth-Q.totalWidth);if(1==W.tiles_set_initial_height&&0==R.isScrollbarExists()&&i<25){e.length;var n=Math.ceil(e.length/Q.numCols)*W.tiles_col_width*.75;M.height(n),s()}e.fadeTo(0,0);var r=jQuery(M).find("img.ug-thumb-image");if(1==F.isFixedMode)N.trigger(H.events.TILES_FIRST_PLACED),u(!0),R.checkImagesLoaded(r,function(){t(),N.trigger(H.events.ALL_TILES_LOADED)});else{var o=Q.numCols,a=Q.galleryWidth,_=!1;R.checkImagesLoaded(r,function(){s(),o==Q.numCols&&a==Q.galleryWidth||u(!1),t(),N.trigger(H.events.ALL_TILES_LOADED)},function(e,t){0==_&&N.trigger(H.events.TILES_FIRST_PLACED),_=!0,function(e,t){if(1==t)return!1;e=jQuery(e);var i=jQuery(e).parent();D.triggerImageLoadedEvent(i,e),1==W.tiles_keep_order?d(i):(G.resizeTile(i,Q.colWidth),l(i,!0,!0))}(e,t)})}}function g(){var e=i(),t=D.getThumbs(),n=W.tiles_justified_row_height,r=[],o=0,a=W.tiles_justified_space_between,s=t.length;jQuery.each(t,function(e,t){t=jQuery(t);var i=D.getItemByThumb(t),a=i.thumbWidth;i.thumbHeight!==n&&(a=Math.floor(i.thumbRatioByWidth*n)),r[e]=a,o+=a});var l=Math.ceil(o/e);l>s&&(l=s);var u=o/l,d=[],_=0,g=[],c=[],h=0,p=0;jQuery.each(t,function(e,t){var i=r[e];h+i/2>(p+1)*u&&(g[d.length]=_,d.push(c),c=[],_=0,p++),h+=i,_+=i,c.push(t)}),g[d.length]=_,d.push(c);var m=[],f=[],b=0;jQuery.each(d,function(t,i){i.length;var o=g[t],s=(i.length-1)*a,l=(e-s)/o,u=Math.round(n*l);b+=u,t>0&&(b+=a),f.push(u);var d=u/n,_=[],c=s;jQuery.each(i,function(e,t){var i=jQuery(t).index(),n=r[i],o=Math.round(n*d);_[e]=o,c+=o});var h=c-e;jQuery.each(_,function(e,t){if(0==h)return!1;h<0?(_[e]=t+1,h++):(_[e]=t-1,h--),e==_.length-1&&0!=h&&(_[e]-=h)}),m[t]=_});return{arrRows:d,arrRowWidths:m,arrRowHeights:f,gap:a,totalHeight:b}}function c(e){if(!e)e=!1;var t=i(),r=g();M.height(r.totalHeight);i()!=t&&(r=g()),n();var a=0,s=0;jQuery.each(r.arrRows,function(t,i){var n=r.arrRowWidths[t],o=r.arrRowHeights[t],l=0;jQuery.each(i,function(t,i){var u=jQuery(i),d=o,_=n[t];G.resizeTile(u,_,d,G.resizemode.VISIBLE_ELEMENTS),R.placeElement(u,l,a),(l+=_)>s&&(s=l),l+=r.gap,1==e&&jQuery(i).show()}),a+=o+r.gap}),o()}function h(){var e=i();B.galleryWidth=e,z={},B.colWidth=W.tiles_nested_col_width,B.optimalTileWidth=W.tiles_nested_optimal_tile_width,B.currentGap=W.tiles_space_between_cols,1==k.isMobileMode()&&(B.currentGap=W.tiles_space_between_cols_mobile),null==B.colWidth?B.colWidth=Math.floor(B.optimalTileWidth/B.nestedOptimalCols):B.optimalTileWidth>B.colWidth?B.nestedOptimalCols=Math.ceil(B.optimalTileWidth/B.colWidth):B.nestedOptimalCols=1,B.maxColumns=R.getNumItemsInSpace(e,B.colWidth,B.currentGap),B.colWidth=R.getItemSizeInSpace(e,B.maxColumns,B.currentGap),B.gridY=0,L=[];switch(D.getThumbs().each(function(){var e=function(e){var t,i,n={},r=B.colWidth,o=B.currentGap,a=G.getTileImageSize(e),s=e.index(),l=Math.ceil(function(e){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(e))))}(s)*(1*B.nestedOptimalCols/3)+2*B.nestedOptimalCols/3),u=a.width,d=a.height,_=u/d;u>d?(t=l,0==(i=Math.round(t/_))&&(i=1)):(i=l,0==(t=Math.round(i*_))&&(t=1));return n.dimWidth=t,n.dimHeight=i,n.width=t*r+o*(t-1),n.height=i*r+o*(i-1),n.imgWidth=u,n.imgHeight=d,n.left=0,n.top=0,n}(jQuery(this));L.push(e)}),B.optimalTileWidth>B.colWidth?B.nestedOptimalCols=Math.ceil(B.optimalTileWidth/B.colWidth):B.nestedOptimalCols=1,B.totalWidth=B.maxColumns*(B.colWidth+B.currentGap)-B.currentGap,W.tiles_align){case"center":default:B.addX=Math.round((B.galleryWidth-B.totalWidth)/2);break;case"left":B.addX=0;break;case"right":B.addX=B.galleryWidth-B.totalWidth}B.maxGridY=0}function p(e){var t=i();h(),m();var r=B.maxGridY*(B.colWidth+B.currentGap)-B.currentGap;M.height(r);i()!=t&&(h(),m()),0==W.tiles_nested_debug&&function(e){if(!e)var e=!1;n();for(var t=0;t<L.length;t++)P(t,e);M.height(B.maxColHeight),o()}(e)}function m(e){if(1==W.tiles_nested_debug)return void 0===e&&(e=!0),function(e,t){if(0==t){for(var i=B.currentItem;i<L.length;i++)f(i,!0);B.currentItem=L.length-1}else f(B.currentItem,!0);for(i=0;i<=B.currentItem;i++)P(i,!0);B.currentItem++}(0,e),!1;for(var t=0;t<L.length;t++)f(t,!0)}function f(e,t){if(!t)t=!1;B.maxColHeight=0;for(var i=R.getObjectLength(z),n=B.gridY;n<=i+1;n++){for(var r=0;r<B.maxColumns;r++)if(0==E(B.gridY)||0==S(B.gridY,r)){return void function(e,t,i){var n=jQuery.extend(!0,{},L[e]),r=n.dimWidth,o=t-n.dimWidth,a=B.nestedOptimalCols;if(t<=n.dimWidth||o<=.33*a||t<=a)v(e,t);else if(o<=a)a>=4?1==w(Math.floor(t/2),i)?v(e,Math.floor(t/2)+1):v(e,Math.floor(t/2)):v(objImage,t);else if(1==w(r,i))switch(r>=a){case!0:v(e,r-1);break;case!1:v(e,r+1)}n=jQuery.extend(!0,{},L[e]);var s=function(e,t,i){var n=B.gridY-1,r=0,o=0,a=1,s=[],l=[];if(s.push(e),n>=0){for(o=0;n>=0;){if(r=z[n][i],void 0!==z[n][i-1]&&z[n][i-1]==z[n][i]||void 0!==z[n][i+t]&&z[n][i+t-1]==z[n][i+t]||z[n][i]!=z[n][i+t-1])return l.push(a),l.push(s),l;o!=r&&(a++,s.push(r)),n--,o=r}return l.push(a),l.push(s),l}return[0,[]]}(e,n.dimWidth,i);if(B.columnsValueToEnableHeightResize<=s[0]&&B.maxColumns>=2*B.nestedOptimalCols){var l=function(e,t){var i=0,n=0,r=t.dimWidth,o=t.dimHeight,a=0,s=0,l=jQuery.map(z,function(e,t){return[e]});if(void 0===l[B.gridY]||void 0===l[B.gridY][e-1])n=0;else for(var u=0;void 0!==z[B.gridY+u]&&-1!=z[B.gridY+u][e-1];)a=z[B.gridY+u][e-2],u++,n++;if(void 0===l[B.gridY]||void 0===l[B.gridY][e+r])i=0;else for(u=0;void 0!==z[B.gridY+u]&&-1!=z[B.gridY+u][e+r];)s=z[B.gridY+u][e+r+1],u++,i++;var d=0,_=0;Math.abs(o-n)<Math.abs(o-i)&&0!=n?(d=n,_=a):0!=i?(d=i,_=s):d=o;return{newHeight:d,idToResize:_}}(i,n),u=y(e,l.newHeight,!0);L[e].dimHeight=u.dimHeight;var d=function(e,t){for(var i=0,n=0,r=[],o=0,a=0,s=0;s<e[1].length;s++){var l=e[1][s],u=L[e[1][s]];if(n+=u.dimHeight,0!=s)i+=u.dimHeight,r.push([l,u.dimHeight]);else{var d=v(l,t,!0);i+=d.dimHeight,r.push([e[1][s],d.dimHeight])}}o=u.left,a=u.top;for(var _=n,g=[],s=r.length-1;s>=0;s--){var c,l=r[s][0];0!=s?(c=Math.max(Math.round(1*n/3),Math.floor(r[s][1]*(n/i))),_-=c,(d=y(l,c,!0)).left=o,d.top=a,g.push({tileID:l,sizes:d}),a+=d.dimHeight):((d=y(l,c=_,!0)).left=o,d.top=a,g.push({tileID:l,sizes:d}))}return g}(s,u.dimWidth),_=function(e){for(var t=0,i=0,n=0;n<e.length-1;n++){var r=e[n].sizes,o=-1,a=-1;E(r.top+r.dimHeight)&&B.maxColumns>r.left+r.dimWidth&&(o=z[r.top+r.dimHeight-1][r.left+r.dimWidth],a=z[r.top+r.dimHeight][r.left+r.dimWidth]),o!=a&&t++}for(var n=0;n<e.length-1;n++){var r=e[n].sizes,o=-1,a=-1;E(r.top+r.dimHeight)&&r.left-1>=0&&(o=z[r.top+r.dimHeight-1][r.left-1],a=z[r.top+r.dimHeight][r.left-1]),o!=a&&i++}return Math.max(i,t)}(d),g=!1;_>=2&&(g=!0),l.newHeight>=n.dimHeight&&(n=y(e,l.newHeight,!0));var c=function(e,t,i){var n=L[e],r=n.dimHeight,o=(n.dimWidth,n.left),a=n.top,s=(parseInt(a/(B.colWidth+B.currentGap)),parseInt(o/(B.colWidth+B.currentGap)),y(e,r-t+i,!0)),l=[];return l.push({tileID:e,sizes:s}),l}(l.idToResize,l.newHeight,n.dimHeight);n.top=B.gridY,n.left=i,c.push({tileID:e,sizes:n});var h=I(c),p=I(d);return h<p||1==g?void b(c):void b(d)}n.left=i,n.top=B.gridY,L[e]=n,T(e,n,i,B.gridY),B.maxGridY=n.top+n.dimHeight}(e,function(e){var t=e,i=0;if(1==E(B.gridY))for(;0==S(B.gridY,t);)i++,t++;else i=B.maxColumns;return i}(r),r)}B.gridY++}}function b(e){for(var t=0;t<e.length;t++){var i=e[t].sizes,n=e[t].tileID;L[n]=jQuery.extend(!0,{},i),T(n,i,i.left,i.top)}}function v(e,t,i){i||(i=!1);var n=B.colWidth,r=B.currentGap,o=L[e],a=o.imgWidth/o.imgHeight;if(dimWidth=t,dimHeight=Math.round(dimWidth/a),1==i){var s=jQuery.extend(!0,{},o);return s.dimWidth=dimWidth,s.dimHeight=dimHeight,s.width=dimWidth*n+r*(dimWidth-1),s.height=dimHeight*n+r*(dimHeight-1),s}o.dimWidth=dimWidth,o.dimHeight=dimHeight,o.width=dimWidth*n+r*(dimWidth-1),o.height=dimHeight*n+r*(dimHeight-1)}function y(e,t,i){i||(i=!1);var n=L[e],r=n.dimWidth,o=B.colWidth,a=B.currentGap;if(1==i){var s=jQuery.extend(!0,{},n);return s.dimHeight=t,s.width=r*o+a*(r-1),s.height=t*o+a*(t-1),s}n.dimHeight=t,n.width=r*o+a*(r-1),n.height=t*o+a*(t-1)}function I(e){for(var t=0,i=0,n=0;n<e.length;n++){var r=L[e[n].tileID];if(0==r.dimHeight||0==r.height)return;resizeVal=r.dimWidth/r.dimHeight/(r.imgWidth/r.imgHeight),resizeVal<1&&(resizeVal=1/resizeVal),t+=resizeVal,i++}return t/i}function w(e,t){var i=B.gridY-1;return!(i<=0||0==E(i))&&z[i][t+e-1]!=z[i][t+e]}function E(e){return void 0!==z[e]}function T(e,t,i,n){for(var r=0;r<t.dimHeight;r++)for(var o=0;o<t.dimWidth;o++)0==E(n+r)&&function(e){z[e]=new Object;for(var t=0;t<B.maxColumns;t++)z[e][t]=-1}(n+r),function(e,t,i){z[e][t]=i}(n+r,i+o,e)}function S(e,t){return-1!=z[e][t]}function P(e,t){var i=D.getThumbByIndex(e),n=L[e],r=n.top*(B.colWidth+B.currentGap),o=B.addX+n.left*(B.colWidth+B.currentGap);G.resizeTile(i,n.width,n.height,G.resizemode.VISIBLE_ELEMENTS),R.placeElement(i,o,r),r+n.height>B.maxColHeight&&(B.maxColHeight=r+n.height),1==t&&i.fadeTo(0,1)}function x(){if(1==F.isFirstTimeRun)return!0;if(0==F.isAllLoaded)return!1;switch(W.tiles_type){case"columns":u(!1);break;case"justified":c(!1);break;case"nested":1==k.isMobileMode()?u(!1):p(!1)}}function j(){switch(A.children(".ug-tile").show(),1==F.isFirstTimeRun&&(N.on(H.events.ALL_TILES_LOADED,function(){if(1==F.isAllLoaded)return!0;F.isAllLoaded=!0}),C.on(k.events.SIZE_CHANGE,x),G.initEvents()),G.run(),W.tiles_type){default:case"columns":_();break;case"justified":!function(){var e=jQuery(A).find("img.ug-thumb-image"),i=D.getThumbs();F.isAllLoaded=!1,i.fadeTo(0,0),R.checkImagesLoaded(e,function(){setTimeout(function(){c(!0),i.fadeTo(0,1),N.trigger(H.events.TILES_FIRST_PLACED),t(),N.trigger(H.events.ALL_TILES_LOADED)})},function(e,t){e=jQuery(e);var i=jQuery(e).parent();D.triggerImageLoadedEvent(i,e)})}();break;case"nested":!function(){var e=jQuery(A).find("img.ug-thumb-image"),i=D.getThumbs();F.isAllLoaded=!1,i.fadeTo(0,0),R.checkImagesLoaded(e,function(){1==k.isMobileMode()?u(!0):p(!0),N.trigger(H.events.TILES_FIRST_PLACED),t(),N.trigger(H.events.ALL_TILES_LOADED)},function(e,t){e=jQuery(e);var i=jQuery(e).parent();D.triggerImageLoadedEvent(i,e)})}()}F.isFirstTimeRun=!1}var C,A,M,O,z,L,H=this,N=jQuery(this),k=new UniteGalleryMain,R=new UGFunctions,G=new UGTileDesign,D=new UGThumbsGeneral,Q={},W={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var F={isFixedMode:!1,isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isAllLoaded:!1},B={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};this.destroy=function(){C.off(k.events.SIZE_CHANGE),G.destroy()},this.setFixedSizeMode=function(){F.isFixedMode=!0,G.setFixedMode()},this.init=function(t,i){e(t,i)},this.setHtml=function(e){!function(e){e||(e=A);M=e;var t=W.tiles_type;e.addClass("ug-tiletype-"+t),G.setHtml(e),e.children(".ug-thumb-wrapper").hide()}(e)},this.getObjTileDesign=function(){return G},this.run=function(){j()}}function UGTileDesign(){function e(e,t){O=e,P=jQuery(e);var n=O.getObjects();j=n.g_objWrapper,C=O.getArrItems(),H=jQuery.extend(H,N),H=jQuery.extend(H,t),function(){1==H.tile_enable_overlay?(H.thumb_overlay_opacity=H.tile_overlay_opacity,H.thumb_overlay_color=H.tile_overlay_color):0==H.tile_enable_icons?H.thumb_color_overlay_effect=!1:H.thumb_overlay_opacity=0;H.tile_as_link&&(H.thumb_wrapper_as_link=!0,H.thumb_link_newpage=H.tile_link_newpage);1==H.tile_enable_outline&&0==H.tile_enable_border&&(H.tile_enable_outline=!1);k.tileInnerReduce=0,H.tile_enable_border&&(k.tileInnerReduce=2*H.tile_border_width,L.setThumbInnerReduce(k.tileInnerReduce));if(k.isSaparateIcons=!z.isRgbaSupported(),1==H.tile_enable_textpanel){switch(H.tile_textpanel_position){case"top":H.tile_textpanel_align="top";case"bottom":k.isTextpanelOutside=!0,H.tile_textpanel_always_on=!0,H.tile_textpanel_offset=0;break;case"inside_top":H.tile_textpanel_align="top";break;case"middle":H.tile_textpanel_align="middle",H.tile_textpanel_appear_type="fade"}0==H.tile_textpanel_always_on&&(k.isSaparateIcons=!0)}0!=H.tile_textpanel_offset&&(H.tile_textpanel_appear_type="fade",H.tile_textpanel_margin=H.tile_textpanel_offset);"title_and_desc"==H.tile_textpanel_source&&(H.tile_textpanel_enable_description=!0,H.tile_textpanel_desc_style_as_title=!0)}(),L.init(e,H);var r=["overlay"];k.funcCustomTileHtml&&(r=[]),L.setCustomThumbs(i,r,{allow_onresize:!1});var o=L.getOptions();H=jQuery.extend(H,o),k.ratioByWidth=H.tile_width/H.tile_height,k.ratioByHeight=H.tile_height/H.tile_width,H.tile_size_by==A.sizeby.GLOBAL_RATIO&&k.isTextpanelOutside&&(k.hasImageContainer=!0)}function t(){var e=O.isMobileMode();switch(k.isTextPanelHidden=!1,1==e&&0==H.tile_textpanel_always_on&&(k.isTextPanelHidden=!0),k.isVideoplayIconAlwaysOn=H.tile_videoplay_icon_always_on,H.tile_videoplay_icon_always_on){case"always":k.isVideoplayIconAlwaysOn=!0;break;case"never":k.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":k.isVideoplayIconAlwaysOn=1==e;break;case"desktop_only":k.isVideoplayIconAlwaysOn=0==e}}function i(e,t){if(e.addClass("ug-tile"),k.funcCustomTileHtml)return k.funcCustomTileHtml(e,t),!1;var i="";1==k.hasImageContainer&&(i+="<div class='ug-image-container ug-trans-enabled'>");var n="ug-thumb-image";0!=H.tile_enable_image_effect&&1!=H.tile_image_effect_reverse||(n+=" ug-trans-enabled");var r=z.stripTags(t.title);r=z.htmlentitles(r),i+='<img src="'+z.escapeDoubleSlash(t.urlThumb)+"\" alt='"+r+"' class='"+n+"'>",1==k.hasImageContainer&&(i+="</div>"),e.append(i),H.tile_size_by==A.sizeby.GLOBAL_RATIO&&e.fadeTo(0,0);var a={};if(1==H.tile_enable_background&&(a["background-color"]=H.tile_background_color),1==H.tile_enable_border&&(a["border-width"]=H.tile_border_width+"px",a["border-style"]="solid",a["border-color"]=H.tile_border_color,H.tile_border_radius&&(a["border-radius"]=H.tile_border_radius+"px")),1==H.tile_enable_outline&&(a.outline="1px solid "+H.tile_outline_color),1==H.tile_enable_shadow){var s=H.tile_shadow_h+"px ";s+=H.tile_shadow_v+"px ",s+=H.tile_shadow_blur+"px ",s+=H.tile_shadow_spread+"px ",s+=H.tile_shadow_color,a["box-shadow"]=s}e.css(a);var l="";if(H.tile_enable_icons){if(0==H.tile_as_link&&1==H.tile_enable_action){var u="ug-button-play ug-icon-zoom";"image"!=t.type&&(u="ug-button-play ug-icon-play"),l+="<div class='ug-tile-icon "+u+"' style='display:none'></div>"}if(t.link&&1==H.tile_show_link_icon||1==H.tile_as_link)if(0==H.tile_as_link){var d="";1==H.tile_link_newpage&&(d=" target='_blank'"),l+="<a href='"+t.link+"'"+d+" class='ug-tile-icon ug-icon-link'></a>"}else l+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>";var _=k.isSaparateIcons;if(0==_&&"image"!=t.type&&1==k.isVideoplayIconAlwaysOn&&(_=!0),_)var g=e;else g=e.children(".ug-thumb-overlay");g.append(l);var c=g.children("."+u);0==c.length?c=null:c.hide();var h=g.children(".ug-icon-link");0==h.length?h=null:h.hide(),h||1!=H.tile_enable_action||e.addClass("ug-tile-clickable")}else 1==H.tile_enable_action&&e.addClass("ug-tile-clickable");if(1==H.tile_enable_image_effect){var p="";0==H.tile_image_effect_reverse&&(p=" ug-trans-enabled");var m="<div class='ug-tile-image-overlay"+p+"' >",f=" ug-"+H.tile_image_effect_type+"-effect";m+='<img src="'+z.escapeDoubleSlash(t.urlThumb)+"\" alt='"+t.title+"' class='"+f+p+"'>",m+="</div>",e.append(m),1==H.tile_image_effect_reverse&&e.children(".ug-tile-image-overlay").fadeTo(0,0)}if(1==H.tile_enable_textpanel){var b=new UGTextPanel;b.init(O,H,"tile");var v="";1!=H.tile_textpanel_always_on&&1!=k.isTextpanelOutside||(v="ug-trans-enabled"),b.appendHTML(e,v);var y=t.title,I="";switch(H.tile_textpanel_source){case"desc":case"description":y=t.description;break;case"desc_title":""!=t.description&&(y=t.description);break;case"title_and_desc":y=t.title,I=t.description}if(b.setTextPlain(y,I),0==H.tile_textpanel_always_on&&b.getElement().fadeTo(0,0),e.data("objTextPanel",b),1==H.tile_textpanel_always_on){o(e).css("z-index",2)}if(1==k.isTextpanelOutside){e.append("<div class='ug-tile-cloneswrapper'></div>");var w=e.children(".ug-tile-cloneswrapper"),E=new UGTextPanel;E.init(O,H,"tile"),E.appendHTML(w),E.setTextPlain(y,I),e.data("objTextPanelClone",E)}}null!==t.addHtml&&e.append(t.addHtml)}function n(e){return e.children(".ug-tile-image-overlay")}function r(e){return e.data("objTextPanel")}function o(e){return e.children(".ug-textpanel")}function a(e){if(1==k.isTextpanelOutside)var t=function(e){var t=e.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==t.length)throw new Error("text panel cloned element not found");return t}(e);else t=o(e);if(!t)return 0;return z.getElementSize(t).height}function s(e){var t=e.find(".ug-icon-link");return 0==t.length?null:t}function l(e){var t=e.find(".ug-button-play");return 0==t.length?null:t}function u(e){return!!e.hasClass("ug-thumb-over")}function d(e){return e.hasClass("ug-tile-clickable")}function _(e){return 1==H.tile_enable_icons&&1==k.isVideoplayIconAlwaysOn&&"image"!=e.type}function g(e,t,i,r){var o=n(e),s=A.getTileImage(e),l=function(e){return e.find(".ug-tile-image-overlay img")}(e);t-=k.tileInnerReduce,i-=k.tileInnerReduce;var u=null;if(1==k.isTextpanelOutside){var d=a(e);if(i-=d,"top"==H.tile_textpanel_position&&(u=d),1==k.hasImageContainer){var _=function(e){return 0==k.hasImageContainer?null:e.children(".ug-image-container")}(e);z.setElementSize(_,t,i),null!==u&&z.placeElement(_,0,u)}}if(0==H.tile_enable_image_effect)z.scaleImageCoverParent(s,t,i),0==k.hasImageContainer&&null!==u&&z.placeElement(s,0,u);else{var g="nothing";!0===r&&0==k.isTextpanelOutside&&(g=1==H.tile_image_effect_reverse?"effect":"image"),"effect"!=g&&(z.setElementSize(o,t,i),null!==u&&z.placeElement(o,0,u),z.scaleImageCoverParent(l,t,i)),"image"!=g&&(1==k.hasImageContainer?z.scaleImageCoverParent(s,t,i):"effect"==g?(z.scaleImageCoverParent(s,t,i),null!==u&&z.placeElement(s,0,u)):z.cloneElementSizeAndPos(l,s,!1,null,u))}}function c(e,t,i,n){var o=null;if(i&&(o=i-k.tileInnerReduce),n&&(n-=k.tileInnerReduce),"clone"==t){(function(e){return e.data("objTextPanelClone")})(e).refresh(!0,!0,o);return A.getItemByTile(e).textPanelCloneSizeSet=!0,!1}var s=r(e);if(!s)return!1;var l=null;1==k.isTextpanelOutside&&(l=a(e)),s.refresh(!1,!0,o,l);if(1==H.tile_textpanel_always_on||"fade"==H.tile_textpanel_appear_type)if(1==k.isTextpanelOutside&&n&&"bottom"==H.tile_textpanel_position){var u=n-l;s.positionPanel(u)}else s.positionPanel()}function h(e){A.getItemByTile(e);var t=l(e),i=s(e),n=z.getElementSize(e);g(e,n.width,n.height),1==H.tile_enable_textpanel&&c(e,"regular",n.width,n.height);var r=n.width-k.tileInnerReduce,u=n.height-k.tileInnerReduce,d=0;if(1==k.isTextpanelOutside){var _=a(e);u-=_,"top"==H.tile_textpanel_position&&(d=_)}var h=function(e){return e.children(".ug-thumb-overlay")}(e);if(z.setElementSizeAndPosition(h,0,d,r,u),t||i){var p=0;if(1==H.tile_enable_textpanel&&0==k.isTextPanelHidden&&0==k.isTextpanelOutside){var m=o(e),f=z.getElementSize(m);f.height>0&&(p=Math.floor(f.height/2*-1))}}if(t&&i){var b=z.getElementSize(t),v=z.getElementSize(i),y=H.tile_space_between_icons,I=b.width+y+v.width,w=Math.floor((n.width-I)/2);w<y&&(y=Math.floor((n.width-b.width-v.width)/3),I=b.width+y+v.width,w=Math.floor((n.width-I)/2)),z.placeElement(t,w,"middle",0,p),z.placeElement(i,w+b.width+y,"middle",0,p)}else t&&z.placeElement(t,"center","middle",0,p),i&&z.placeElement(i,"center","middle",0,p);t&&t.show(),i&&i.show()}function p(e,t){A.getItemByTile(e);var i=n(e),r=H.thumb_transition_duration;if(0==H.tile_image_effect_reverse){var o=A.getTileImage(e);t?(o.fadeTo(0,1),i.stop(!0).fadeTo(r,0)):i.stop(!0).fadeTo(r,1)}else t?i.stop(!0).fadeTo(r,1):i.stop(!0).fadeTo(r,0)}function m(e,t){var i=H.thumb_transition_duration,n=o(e);if(!n)return!0;if("slide"==H.tile_textpanel_appear_type){var r=z.getElementSize(n);if(0==r.width)return!1;var a=-r.height,s={},l={},u="bottom";"inside_top"==H.tile_textpanel_position&&(u="top"),s[u]=a+"px",l[u]="0px",1==t?(n.fadeTo(0,1),0==n.is(":animated")&&n.css(s),l.opacity=1,n.stop(!0).animate(l,i)):n.stop(!0).animate(s,i)}else 1==t?n.stop(!0).fadeTo(i,1):n.stop(!0).fadeTo(i,0)}function f(e,t,i){var n=H.thumb_transition_duration;i&&!0===i&&(n=0);var r=l(e),o=s(e),a=t?1:0;r&&r.stop(!0).fadeTo(n,a),o&&o.stop(!0).fadeTo(n,a)}function b(e,t){if(t=jQuery(t),H.tile_enable_image_effect&&p(t,!0),1==H.tile_enable_textpanel&&0==H.tile_textpanel_always_on&&0==k.isTextPanelHidden&&m(t,!0),k.isSaparateIcons&&1==H.tile_enable_icons){var i=1==H.thumb_overlay_reverse;0==_(A.getItemByTile(t))&&f(t,i,!1)}}function v(e,t){if(t=jQuery(t),H.tile_enable_image_effect&&p(t,!1),1==H.tile_enable_textpanel&&0==H.tile_textpanel_always_on&&m(t,!1),1==k.isSaparateIcons&&1==H.tile_enable_icons){var i=1!=H.thumb_overlay_reverse;0==_(A.getItemByTile(t))?f(t,i,!1):f(t,!0,!0)}}function y(e,t,i){if(t=jQuery(t),1==H.tile_visible_before_image&&!0!==t.data("image_placed")&&!0!==i)return!0;h(t),L.setThumbNormalStyle(t)}function I(e,t,i){h(t),i.fadeTo(0,1),t.data("image_placed",!0)}function w(e){if(1==d(e))return M.trigger(A.events.TILE_CLICK,e),!0;0==u(e)&&(!function(e){L.getThumbs().not(e).each(function(e,t){L.setThumbNormalStyle(jQuery(t))})}(e),L.setThumbOverStyle(e))}function E(e){var t=jQuery(this),i=t.prop("tagName").toLowerCase(),n=!0;if(k.funcParentApproveClick&&0==k.funcParentApproveClick()&&(n=!1),"a"==i)0==n&&e.preventDefault();else if(0==u(t))1==n&&w(t);else{if(0==d(t))return!0;1==n&&M.trigger(A.events.TILE_CLICK,t)}}function T(e){e.stopPropagation();var t=jQuery(this).parents(".ug-tile"),i=!0;return k.funcParentApproveClick&&0==k.funcParentApproveClick()&&(i=!1),0==u(t)?(w(t),!0):1==i?(M.trigger(A.events.TILE_CLICK,t),!1):void 0}function S(e){var t=jQuery(this).parents(".ug-tile");k.funcParentApproveClick&&0==k.funcParentApproveClick()&&e.preventDefault(),0==u(t)&&0==H.tile_as_link&&(e.preventDefault(),w(t))}var P,x,j,C,A=this,M=jQuery(this),O=new UniteGalleryMain,z=new UGFunctions,L=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var H={tile_width:250,tile_height:200,tile_size_by:A.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},N={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},k={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};this.loadTileImage=function(e){var t=A.getTileImage(e);z.checkImagesLoaded(t,null,function(t,i){I(0,e,jQuery(t))})},this.setHtml=function(e){x=e,t(),L.setHtmlThumbs(e)},this.initEvents=function(){L.initEvents(),jQuery(L).on(L.events.SETOVERSTYLE,b),jQuery(L).on(L.events.SETNORMALSTYLE,v),jQuery(L).on(L.events.PLACEIMAGE,I),j.on(k.eventSizeChange,y),x.delegate(".ug-tile .ug-button-play","click",T),x.delegate(".ug-tile","click",E),x.delegate(".ug-tile .ug-icon-link","click",S)},this.destroy=function(){if(jQuery(L).off(L.events.SETOVERSTYLE),jQuery(L).off(L.events.SETNORMALSTYLE),jQuery(L).off(L.events.PLACEIMAGE),j.off(k.eventSizeChange),1==H.tile_enable_textpanel){var e=L.getThumbs();jQuery.each(e,function(e,t){var i=r(jQuery(t));i&&i.destroy()})}L.destroy()},this.init=function(t,i,n){e(t,i)},this.setFixedMode=function(){H.tile_size_by=A.sizeby.GLOBAL_RATIO,H.tile_visible_before_image=!0},this.setApproveClickFunction=function(e){k.funcParentApproveClick=e},this.resizeTile=function(e,t,i,n){if(1==k.isTextpanelOutside&&c(e,"clone",t),t){if(!i)i=A.getTileHeightByWidth(t,e,"resizeTile")}else{t=H.tile_width;var i=H.tile_height}switch(z.setElementSize(e,t,i),n){default:case A.resizemode.FULL:A.triggerSizeChangeEvent(e,!0);break;case A.resizemode.WRAPPER_ONLY:return!0;case A.resizemode.VISIBLE_ELEMENTS:if(k.funcCustomTileHtml)return A.triggerSizeChangeEvent(e,!0),!0;g(e,t,i,!0),1==H.tile_enable_textpanel&&1==H.tile_textpanel_always_on&&t&&c(e,"regular",t,i)}},this.resizeAllTiles=function(e,i){t();var n=null;H.tile_size_by==A.sizeby.GLOBAL_RATIO&&(n=A.getTileHeightByWidth(e,null,"resizeAllTiles"));L.getThumbs().each(function(t,r){A.resizeTile(jQuery(r),e,n,i)})},this.triggerSizeChangeEvent=function(e,t){if(!e)return!1;if(!t)t=!1;j.trigger(k.eventSizeChange,[e,t])},this.triggerSizeChangeEventAllTiles=function(e){L.getThumbs().each(function(){var t=jQuery(this);A.triggerSizeChangeEvent(t,e)})},this.disableEvents=function(){L.getThumbs().css("pointer-events","none")},this.enableEvents=function(){L.getThumbs().css("pointer-events","auto")},this.setOptions=function(e){H=jQuery.extend(H,e),L.setOptions(e)},this.setTileSizeOptions=function(e){if(H.tile_size_by!==A.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");H.tile_width=e,H.tile_height=Math.floor(e*k.ratioByHeight)},this.setCustomFunctions=function(e,t){k.funcCustomTileHtml=e,k.funcCustomPositionElements=t},this.run=function(){var e=L.getThumbs();H.tile_size_by==A.sizeby.GLOBAL_RATIO&&A.resizeAllTiles(H.tile_width,A.resizemode.WRAPPER_ONLY),1==H.tile_enable_image_effect&&0==H.tile_image_effect_reverse&&e.children(".ug-thumb-image").fadeTo(0,0),L.setHtmlProperties(),1==H.tile_visible_before_image&&(e.children(".ug-thumb-image").fadeTo(0,0),L.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return L},this.getOptions=function(){return H},this.getTileImage=function(e){return e.find("img.ug-thumb-image")},this.getItemByTile=function(e){return L.getItemByThumb(e)},this.getTileHeightByWidth=function(e,t,i){var n=function(e,t){var i=k.ratioByHeight;switch(H.tile_size_by){default:i=k.ratioByHeight;break;case A.sizeby.IMAGE_RATIO:if(!e)throw new Error("tile should be given for tile ratio");var n=A.getItemByTile(e);if(void 0!==n.thumbRatioByHeight){if(0==n.thumbRatioByHeight)throw trace(n),new Error("the item ratio not inited yet");i=n.thumbRatioByHeight}break;case A.sizeby.CUSTOM:return null}return i}(t);if(null===n)return null;var r=Math.floor((e-k.tileInnerReduce)*n)+k.tileInnerReduce;return t&&1==k.isTextpanelOutside&&H.tile_size_by==A.sizeby.IMAGE_RATIO&&(r+=a(t)),r},this.getTileImageSize=function(e){var t=A.getItemByTile(e);if(!t.thumbWidth||!t.thumbHeight)throw new Error("Can't get image size - image not inited.");return{width:t.thumbWidth,height:t.thumbHeight}},this.getGlobalTileSize=function(){if(H.tile_size_by!=A.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");return{width:H.tile_width,height:H.tile_height}}}function UGAviaControl(){function e(e){jQuery("body").on("touchstart",function(e){if(0==d.isControlEnabled)return!0;d.touchEnabled=!0}),jQuery("body").mousemove(function(e){if(0==d.isControlEnabled)return!0;if(1==d.touchEnabled)return jQuery("body").off("mousemove"),!0;d.isMouseInsideStrip=a.ismouseover();var r=n.isTouchMotionActive();if(1==d.isMouseInsideStrip&&0==r){!function(e){var i=function(e){return 0==u?function(e){var t=l.strip_padding_left,i=l.strip_padding_right,n=a.width()-t-i,r=s.width();if(n>r)return null;var o=a.offset().left,u=e-o-t,d=l.thumb_width,_=n-l.thumb_width;u<d&&(u=d);u>_&&(u=_);var g=(u-d)/(_-d)*(r-n);return g=-1*Math.round(g)+t}(e):function(e){var t=l.strip_padding_top,i=(l.strip_padding_bottom,a.height()),n=s.height();if(i>n)return null;var r=a.offset().top,o=e-r-t;if(o<0)return null;var u=l.thumb_height,d=i-l.thumb_height;o<u&&(o=u);o>d&&(o=d);var _=(o-u)/(d-u)*(n-i);return _=-1*Math.round(_)+t}(e)}(e);if(null===i)return!1;d.is_strip_moving=!0,d.strip_finalPos=i,function(){if(1==d.isStripMoving)return!1;d.isStripMoving=!0,d.handle_timeout=setInterval(t,10)}()}(function(e){return 0==u?e.pageX:e.pageY}(e))}else i()})}function t(){if(0==d.is_strip_moving)return!1;var e=n.getInnerStripPos();Math.floor(e)==Math.floor(d.strip_finalPos)&&i();var t,r=Math.abs(d.strip_finalPos-e);r<1?t=r:(t=r/4)>0&&t<1&&(t=1),d.strip_finalPos<e&&(t*=-1);var o=e+t;n.positionInnerStrip(o)}function i(){if(0==d.isStripMoving)return!1;d.isStripMoving=!1,d.handle_timeout=clearInterval(d.handle_timeout)}var n,r,o,a,s,l,u,d={touchEnabled:!1,isMouseInsideStrip:!1,strip_finalPos:0,handle_timeout:"",isStripMoving:!1,isControlEnabled:!0};this.enable=function(){d.isControlEnabled=!0},this.disable=function(){d.isControlEnabled=!1},this.init=function(t){n=t,o=t.getObjects(),r=o.g_gallery,a=o.g_objStrip,s=o.g_objStripInner,l=o.g_options,u=o.isVertical,e()},this.destroy=function(){jQuery("body").off("touchstart"),jQuery("body").off("mousemove")}}function UGSlider(){function e(e,t,i){re=e,i&&(te=i,t=ue.convertCustomPrefixOptions(t,te,"slider")),W=jQuery(e);var n=re.getObjects();if(F=n.g_objWrapper,B=n.g_objThumbs,t.hasOwnProperty("slider_progress_indicator_type")&&(ge.slider_progress_indicator_type=t.slider_progress_indicator_type),"bar"==ge.slider_progress_indicator_type&&(ge=jQuery.extend(ge,ce)),t&&ie.setOptions(t),function(){var e=re.getOptions(),t=e.gallery_skin;""==ge.slider_bullets_skin&&(ge.slider_bullets_skin=t);""==ge.slider_arrows_skin&&(ge.slider_arrows_skin=t);""==ge.slider_zoompanel_skin&&(ge.slider_zoompanel_skin=t);""==ge.slider_play_button_skin&&(ge.slider_play_button_skin=t);""==ge.slider_fullscreen_button_skin&&(ge.slider_fullscreen_button_skin=t);ge.video_enable_closebutton=ge.slider_video_enable_closebutton,"zoom"!=e.gallery_mousewheel_role&&(ge.slider_zoom_mousewheel=!1)}(),1==ge.slider_enable_bullets){se=new UGBullets;var r={bullets_skin:ge.slider_bullets_skin,bullets_space_between:ge.slider_bullets_space_between};se.init(re,r)}ge.slider_enable_text_panel&&(_e=new UGTextPanel).init(re,ge,"slider"),ge.slider_enable_zoom_panel&&(ee=new UGZoomButtonsPanel).init(ie,ge);var o=re.getGalleryID();le.init(ge,!1,o)}function t(){if(1==he.isRunOnce)return!1;if(he.isRunOnce=!0,ge.slider_background_color){var e=ge.slider_background_color;1!=ge.slider_background_opacity&&(e=ue.convertHexToRGB(e,ge.slider_background_opacity)),Y.css("background-color",e)}else 1!=ge.slider_background_opacity&&(e=ue.convertHexToRGB("#000000",ge.slider_background_opacity),Y.css("background-color",e));1==ge.slider_control_swipe&&(J=new UGTouchSliderControl).init(ie,ge),1==ge.slider_control_zoom&&($=new UGZoomSliderControl).init(ie,ge),_e&&_e.run(),function(){W.on(re.events.ITEM_IMAGE_UPDATED,H),W.on(re.events.ITEM_CHANGE,S),se&&jQuery(se).on(se.events.BULLET_CLICK,P);1==ge.slider_enable_arrows&&(ue.addClassOnHover(K,"ug-arrow-hover"),ue.addClassOnHover(q,"ug-arrow-hover"),re.setNextButton(K),re.setPrevButton(q));0==ge.slider_controls_always_on&&Y.hover(A,M);Y.on("touchend click",x),ne.on(ie.events.CLICK,j),_e&&1==he.isTextPanelSaparateHover&&Y.hover(h,c);oe&&(ue.addClassOnHover(oe,"ug-button-hover"),re.setPlayButton(oe));ae&&(ue.addClassOnHover(ae,"ug-button-hover"),re.setFullScreenToggleButton(ae));$&&ne.on(ie.events.ZOOM_CHANGE,C);ee&&ee.initEvents();le.initEvents(),jQuery(le).on(le.events.SHOW,z),jQuery(le).on(le.events.HIDE,L),k(V),k(X),k(Z),ne.on(ie.events.AFTER_PUT_IMAGE,N),Y.delegate(".ug-item-wrapper img","mouseenter",function(e){ne.trigger(ie.events.IMAGE_MOUSEENTER)}),Y.delegate(".ug-item-wrapper img","mouseleave",function(e){var t=ie.isMouseInsideSlideImage(e);0==t&&ne.trigger(ie.events.IMAGE_MOUSELEAVE)})}()}function i(e,t){var i="ug-type-square";"round"==ge.slider_videoplay_button_type&&(i="ug-type-round");var n="";return n+="<div class='ug-slide-wrapper ug-slide"+t+"'>",n+="<div class='ug-item-wrapper'></div>",n+="<div class='ug-slider-preloader "+e+"'></div>",n+="<div class='ug-button-videoplay "+i+"' style='display:none'></div>",n+="</div>"}function n(e){e&&(F=e);var t=function(){var e;switch(ge.slider_loader_type){default:case 1:e="ug-loader1";break;case 2:e="ug-loader2";break;case 3:e="ug-loader3";break;case 4:e="ug-loader4";break;case 5:e="ug-loader5";break;case 6:e="ug-loader6";break;case 7:e="ug-loader7";break;case 8:e="ug-loader8";break;case 9:e="ug-loader9"}"black"==ge.slider_loader_color&&(e+=" ug-loader-black");return e}(),n=(re.getOptions(),"<div class='ug-slider-wrapper'>");if(n+="<div class='ug-slider-inner'>",n+=i(t,1),n+=i(t,2),n+=i(t,3),n+="</div>",1==ge.slider_enable_arrows&&(n+="<div class='ug-slider-control ug-arrow-left ug-skin-"+ge.slider_arrows_skin+"'></div>",n+="<div class='ug-slider-control ug-arrow-right ug-skin-"+ge.slider_arrows_skin+"'></div>"),1==ge.slider_enable_play_button&&(n+="<div class='ug-slider-control ug-button-play ug-skin-"+ge.slider_play_button_skin+"'></div>"),1==ge.slider_enable_fullscreen_button&&(n+="<div class='ug-slider-control ug-button-fullscreen ug-skin-"+ge.slider_fullscreen_button_skin+"'></div>"),n+="</div>",F.append(n),Y=F.children(".ug-slider-wrapper"),U=Y.children(".ug-slider-inner"),V=U.children(".ug-slide1"),X=U.children(".ug-slide2"),Z=U.children(".ug-slide3"),V.data("slidenum",1),X.data("slidenum",2),Z.data("slidenum",3),se&&se.appendHTML(Y),1==ge.slider_enable_arrows&&(q=Y.children(".ug-arrow-left"),K=Y.children(".ug-arrow-right")),1==ge.slider_enable_play_button&&(oe=Y.children(".ug-button-play")),1==ge.slider_enable_fullscreen_button&&(ae=Y.children(".ug-button-fullscreen")),1==ge.slider_enable_progress_indicator){"bar"==(de=ue.initProgressIndicator(ge.slider_progress_indicator_type,ge,Y)).getType()&&"pie"==ge.slider_progress_indicator_type&&(ge.slider_progress_indicator_type="bar",ge=jQuery.extend(ge,ce)),re.setProgressIndicator(de)}if(1==ge.slider_enable_text_panel&&(_e.appendHTML(Y),0==ge.slider_textpanel_always_on)){_e.getElement().hide().data("isHidden",!0),he.isTextPanelSaparateHover=!0}1==ge.slider_enable_zoom_panel&&ee.appendHTML(Y),le.setHtml(U)}function r(e){var t=G(e);ue.placeElementInParentCenter(t);var i=D(e);ue.placeElementInParentCenter(i)}function o(){if(se&&(objBullets=se.getElement(),ue.placeElement(objBullets,ge.slider_bullets_align_hor,ge.slider_bullets_align_vert,ge.slider_bullets_offset_hor,ge.slider_bullets_offset_vert),ue.placeElement(objBullets,ge.slider_bullets_align_hor,ge.slider_bullets_align_vert,ge.slider_bullets_offset_hor,ge.slider_bullets_offset_vert)),1==ge.slider_enable_arrows&&(ue.placeElement(q,ge.slider_arrow_left_align_hor,ge.slider_arrow_left_align_vert,ge.slider_arrow_left_offset_hor,ge.slider_arrow_left_offset_vert),ue.placeElement(K,ge.slider_arrow_right_align_hor,ge.slider_arrow_left_align_vert,ge.slider_arrow_right_offset_hor,ge.slider_arrow_right_offset_vert)),0==ge.slider_controls_always_on&&w(!0),de){var e=de.getElement();if("bar"==ge.slider_progress_indicator_type){var t=Y.width();de.setSize(t),ue.placeElement(e,"left",ge.slider_progress_indicator_align_vert,0,ge.slider_progress_indicator_offset_vert)}else ue.placeElement(e,ge.slider_progress_indicator_align_hor,ge.slider_progress_indicator_align_vert,ge.slider_progress_indicator_offset_hor,ge.slider_progress_indicator_offset_vert)}_e&&_e.positionPanel(),function(){oe&&ue.placeElement(oe,ge.slider_play_button_align_hor,ge.slider_play_button_align_vert,ge.slider_play_button_offset_hor,ge.slider_play_button_offset_vert);ae&&ue.placeElement(ae,ge.slider_fullscreen_button_align_hor,ge.slider_fullscreen_button_align_vert,ge.slider_fullscreen_button_offset_hor,ge.slider_fullscreen_button_offset_vert);if(ee){var e=ee.getElement();ue.placeElement(e,ge.slider_zoompanel_align_hor,ge.slider_zoompanel_align_vert,ge.slider_zoompanel_offset_hor,ge.slider_zoompanel_offset_vert)}}(),r(V),r(X),r(Z),re.isMobileMode()?function(){1==ge.slider_fullscreen_button_mobilehide&&ae&&ae.hide();1==ge.slider_play_button_mobilehide&&oe&&oe.hide();1==ge.slider_zoompanel_mobilehide&&ee&&ee.getElement().hide()}():function(){1==ge.slider_fullscreen_button_mobilehide&&ae&&ae.show();1==ge.slider_play_button_mobilehide&&oe&&oe.show();1==ge.slider_zoompanel_mobilehide&&ee&&ee.getElement().show()}()}function a(){var e,t,i,n,r=ie.getSlidesReference(),o=0;i=ie.isSlideHasItem(r.objNextSlide),(n=ie.isSlideHasItem(r.objPrevSlide))?(o=r.objPrevSlide.outerWidth(),r.objPrevSlide.css("z-index",1)):r.objPrevSlide.hide(),e=t=o+r.objCurrentSlide.outerWidth(),i?(e=t+r.objNextSlide.outerWidth(),r.objPrevSlide.css("z-index",2)):r.objNextSlide.hide(),r.objCurrentSlide.css("z-index",3),ue.placeElement(r.objCurrentSlide,o,0),U.css({left:-o+"px",width:e+"px"}),n&&(ue.placeElement(r.objPrevSlide,0,0),ue.showElement(r.objPrevSlide)),i&&(ue.showElement(r.objNextSlide),ue.placeElement(r.objNextSlide,t,0))}function s(e){var t=e.data("index");if(void 0===t||null==t)return!1;var i=re.getItem(t);if(!i)return!1;g(e,i)}function l(e){e.stop(!0).hide(100)}function u(e,t,i){var n={};if(1==ge.slider_image_border){n["border-style"]="solid";var r=function(e,t){if((a=ge.slider_image_border_width)<=10)return a;var i=ue.getElementSize(e),n=i.width,r=i.height;if(t&&(t.hasOwnProperty("imageWidth")&&(n=t.imageWidth),t.hasOwnProperty("imageHeight")&&(r=t.imageHeight)),n<=0)return a;var o=n<r?n:r;if(2*a/o<ge.slider_image_border_maxratio)return a;var a=o*ge.slider_image_border_maxratio/2;return a=Math.round(a)}(e,i);n["border-width"]=r+"px",n["border-color"]=ge.slider_image_border_color,n["border-radius"]=ge.slider_image_border_radius}"image"!=t&&1==ge.slider_video_constantsize&&(n["background-color"]="#000000"),1==ge.slider_image_shadow&&(n["box-shadow"]="3px 3px 10px 0px #353535"),e.css(n)}function d(e,t){var i=ge.slider_video_constantsize_width,n=ge.slider_video_constantsize_height,r=ge.slider_video_constantsize_scalemode;return ue.scaleImageExactSizeInParent(e,t.imageWidth,t.imageHeight,i,n,r)}function _(e,t,i){var n=e.children(".ug-item-wrapper"),r=G(e);if(void 0===t.urlImage||""==t.urlImage)throw new Error("The slide don't have big image defined ( data-image='imageurl' ). Please check gallery items.","showbig");var o=t.urlImage,a=e.data("urlImage");e.data("urlImage",o);var s=ie.getScaleMode(e),_=ie.getSlideType(e);if(objPadding=ie.getObjImagePadding(),a==o&&!0!==i){var g=n.children("img");0!=t.imageWidth&&0!=t.imageHeight||re.checkFillImageSize(g,t);var c={};u(g,_,c="image"!=_&&1==ge.slider_video_constantsize?d(g,t):ue.scaleImageFitParent(g,t.imageWidth,t.imageHeight,s,objPadding)),ne.trigger(ie.events.AFTER_PUT_IMAGE,e)}else if(g=ue.placeImageInsideParent(o,n,t.imageWidth,t.imageHeight,s,objPadding),1==t.isBigImageLoaded){if(g.fadeTo(0,1),l(r),"image"!=_&&1==ge.slider_video_constantsize)c=d(g,t);else c=ue.getImageInsideParentData(n,t.imageWidth,t.imageHeight,s,objPadding);g.css("width",c.imageWidth+"px"),u(g,_,c),ne.trigger(ie.events.AFTER_PUT_IMAGE,e)}else g.fadeTo(0,0),function(e){e.stop(!0).show(100)}(r),e.data("isLoading",!0),ie.isSlideCurrent(e)&&ne.trigger(ie.events.CURRENTSLIDE_LOAD_START),g.data("itemIndex",t.index),g.on("load",function(){var e=jQuery(this),t=e.data("itemIndex");e.fadeTo(0,1);var i=e.parent().parent(),n=ie.getSlideType(i),r=G(i),o=ie.getObjImagePadding(),a=ie.getScaleMode(i);l(r),i.data("isLoading",!1),ie.isSlideCurrent(i)&&ne.trigger(ie.events.CURRENTSLIDE_LOAD_END),re.onItemBigImageLoaded(null,e);var s=re.getItem(t),_={};"image"!=n&&1==ge.slider_video_constantsize?d(e,s):_=ue.scaleImageFitParent(e,s.imageWidth,s.imageHeight,a,o),e.fadeTo(0,1),u(e,n,_),ne.trigger(ie.events.AFTER_PUT_IMAGE,i)})}function g(e,t){try{var i=e.children(".ug-item-wrapper");if(null==t)return i.html(""),e.removeData("index"),e.removeData("type"),e.removeData("urlImage"),!1;e.data("index");e.data("index",t.index),e.data("type",t.type),1==ge.slider_enable_links&&"image"==t.type&&(t.link?e.addClass("ug-slide-clickable"):e.removeClass("ug-slide-clickable")),_(e,t);var n=D(e);switch(t.type){case"image":n.hide();break;default:n.show()}}catch(e){throw void 0!==e.fileName&&"showbig"==e.fileName&&re.showErrorMessageReplaceGallery(e.message),i.html(""),new Error(e)}}function c(){if(!_e)return!1;if(1==p())return!1;var e=_e.getElement(),t=0;1!=he.isTextPanelSaparateHover&&1!=ge.slider_textpanel_always_on||(t=ge.slider_controls_appear_duration),e.stop().fadeTo(t,0),e.data("isHidden",!0)}function h(){if(!_e)return!1;if(0==p())return!1;var e=_e.getElement(),t=0;1!=he.isTextPanelSaparateHover&&1!=ge.slider_textpanel_always_on||(e.show(),_e.positionElements(),t=ge.slider_controls_appear_duration),e.stop().show().fadeTo(t,1),e.data("isHidden",!1)}function p(){return!1!==_e.getElement().data("isHidden")}function m(){var e=ie.getCurrentSlide(),t=ie.getSlideImage(e),i=ue.getElementSize(e),n=i.left,r=i.top;if(1==ge.slider_video_constantsize){var o=ue.getElementSize(t);n+=o.left,r+=o.top}else n+=ge.slider_video_padding_left,r+=ge.slider_video_padding_top;le.setPosition(n,r)}function f(){var e=ge.slider_video_constantsize_width,t=ge.slider_video_constantsize_height;le.setSize(e,t);u(le.getObject(),"video")}function b(e,t){if(1==ie.isAnimating())return he.itemWaiting=t,!0;null!=he.itemWaiting&&(he.itemWaiting=null);var i=ie.getSlidesReference();switch(e){case"right":g(i.objPrevSlide,t),a();var n=-ue.getElementSize(i.objPrevSlide).left;ie.switchSlideNums("right");break;case"left":g(i.objNextSlide,t),a();n=-ue.getElementSize(i.objNextSlide).left;ie.switchSlideNums("left");break;default:throw new Error("wrong direction: "+e)}var r={duration:ge.slider_transition_speed,easing:ge.slider_transition_easing,queue:!1,always:function(){if(ie.stopSlideAction(),le.hide(),null!=he.itemWaiting){b(function(e){var t=ie.getSlidesReference().objCurrentSlide.data("index"),i=e.index,n="left";t>i&&(n="right");return n}(he.itemWaiting),he.itemWaiting)}else ie.placeNabourItems(),ne.trigger(ie.events.TRANSITION_END)}};U.animate({left:n+"px"},r)}function v(e,t,i){i?e.fadeTo(ge.slider_transition_speed,t,i):e.fadeTo(ge.slider_transition_speed,t)}function y(e,t,i){if(!t)t=!1;var n=ie.getSlidesReference();g(n.objNextSlide,e);var r=ue.getElementSize(n.objCurrentSlide);ue.placeElement(n.objNextSlide,r.left,r.top);var o=he.numCurrent;if(he.numCurrent=he.numNext,he.numNext=o,ne.trigger(ie.events.ITEM_CHANGED),n.objNextSlide.stop(!0),n.objCurrentSlide.stop(!0),1==t)n.objCurrentSlide.fadeTo(0,0),n.objNextSlide.fadeTo(0,1),ie.placeNabourItems(),ne.trigger(ie.events.TRANSITION_END),!0!==i&&le.hide();else{if(n.objNextSlide.fadeTo(0,0),v(n.objCurrentSlide,0,function(){ie.placeNabourItems(),ne.trigger(ie.events.TRANSITION_END),!0!==i&&le.hide()}),1==le.isVisible()){v(le.getObject(),0)}v(n.objNextSlide,1)}}function I(){return Y.children(".ug-slider-control")}function w(e){if(0==ue.isTimePassed("sliderControlsToggle"))return!1;if(0==he.isControlsVisible)return!1;if(!e)e=!1;var t=I();!0===e?t.stop().fadeTo(0,0).hide():t.stop().fadeTo(ge.slider_controls_appear_duration,0,function(){t.hide()}),he.isControlsVisible=!1}function E(e){if(0==ue.isTimePassed("sliderControlsToggle"))return!1;if(1==he.isControlsVisible)return!0;if(!e)e=!1;var t=I();!0===e?t.stop().show():(t.stop().show().fadeTo(0,0),t.fadeTo(ge.slider_controls_appear_duration,1)),he.isControlsVisible=!0}function T(e){if(e==he.currentControlsMode)return!1;switch(e){case"image":ee&&ee.getElement().show();break;case"video":ee&&ee.getElement().hide();break;default:throw new Error("wrong controld mode: "+e)}he.currentControlsMode=e}function S(e,t,i){var n=re.getSelectedItem();ie.setItem(n,!1,i);var r=n.index;se&&se.setActive(r),_e&&0==he.isTextPanelSaparateHover&&h(),T("image"==n.type?"image":"video")}function P(e,t){re.selectItem(t)}function x(e){if(J&&0==J.isTapEventOccured(e))return!0;ne.trigger(ie.events.CLICK,e)}function j(){var e=ie.getCurrentSlide().hasClass("ug-slide-clickable"),t=ie.getCurrentItem();if(e)return 0==ge.slider_links_newpage?location.href=t.link:window.open(t.link,"_blank"),!0;0==ge.slider_controls_always_on&&1==ge.slider_controls_appear_ontap&&1==ie.isCurrentSlideType("image")&&(0==he.isControlsVisible?E():w(),_e&&1==ge.slider_textpanel_always_on&&ie.isCurrentSlideType("image")&&ie.isCurrentSlideImageFit()&&h())}function C(e){_e&&ie.isCurrentSlideType("image")&&0==ie.isCurrentSlideImageFit()&&c()}function A(){E()}function M(){w()}function O(e){var t=e.parent();ie.startSlideAction(t)}function z(){re.isPlayMode()&&re.pausePlaying(),ne.trigger(ie.events.ACTION_START)}function L(){re.isPlayMode()&&re.continuePlaying(),ne.trigger(ie.events.ACTION_END)}function H(e,t,i){V.data("index")==t&&(objItem=re.getItem(t),_(V,objItem,!0)),X.data("index")==t&&(objItem=re.getItem(t),_(X,objItem,!0)),Z.data("index")==t&&(objItem=re.getItem(t),_(Z,objItem,!0))}function N(e,t){t=jQuery(t);var i=ie.getSlideImage(t),n=D(t),r=ue.getElementSize(i);ue.placeElement(n,"center","middle",r.left,r.top,i)}function k(e){var t=D(e);ue.addClassOnHover(t),ue.setButtonOnClick(t,O)}function R(e){switch(e){case 1:return V;case 2:return X;case 3:return Z;default:throw new Error("wrong num: "+e)}}function G(e){if(!e)e=ie.getCurrentSlide();return e.children(".ug-slider-preloader")}function D(e){return e.children(".ug-button-videoplay")}function Q(e){if(!e)e=ie.getCurrentSlide();var t=e.data("index");if(void 0==t)return null;return re.getItem(t)}var W,F,B,Y,U,V,X,Z,q,K,J,$,ee,te,ie=this,ne=jQuery(ie),re=new UniteGalleryMain,oe=null,ae=null,se=null,le=new UGVideoPlayer,ue=new UGFunctions,de=null,_e=null;this.events={ITEM_CHANGED:"item_changed",BEFORE_SWITCH_SLIDES:"before_switch",BEFORE_RETURN:"before_return",AFTER_RETURN:"after_return",ZOOM_START:"slider_zoom_start",ZOOM_END:"slider_zoom_end",ZOOMING:"slider_zooming",ZOOM_CHANGE:"slider_zoom_change",START_DRAG:"start_drag",AFTER_DRAG_CHANGE:"after_drag_change",ACTION_START:"action_start",ACTION_END:"action_end",CLICK:"slider_click",TRANSITION_START:"slider_transition_start",TRANSITION_END:"slider_transition_end",AFTER_PUT_IMAGE:"after_put_image",IMAGE_MOUSEENTER:"slider_image_mouseenter",IMAGE_MOUSELEAVE:"slider_image_mouseleave",CURRENTSLIDE_LOAD_START:"slider_current_loadstart",CURRENTSLIDE_LOAD_END:"slider_current_loadend"};var ge={slider_scale_mode:"fill",slider_scale_mode_media:"fill",slider_scale_mode_fullscreen:"down",slider_item_padding_top:0,slider_item_padding_bottom:0,slider_item_padding_left:0,slider_item_padding_right:0,slider_background_color:"",slider_background_opacity:1,slider_image_padding_top:0,slider_image_padding_bottom:0,slider_image_padding_left:0,slider_image_padding_right:0,slider_image_border:!1,slider_image_border_width:10,slider_image_border_color:"#ffffff",slider_image_border_radius:0,slider_image_border_maxratio:.35,slider_image_shadow:!1,slider_video_constantsize:!1,slider_video_constantsize_scalemode:"fit",slider_video_constantsize_width:854,slider_video_constantsize_height:480,slider_video_padding_top:0,slider_video_padding_bottom:0,slider_video_padding_left:0,slider_video_padding_right:0,slider_video_enable_closebutton:!0,slider_transition:"slide",slider_transition_speed:300,slider_transition_easing:"easeInOutQuad",slider_control_swipe:!0,slider_control_zoom:!0,slider_zoom_mousewheel:!0,slider_vertical_scroll_ondrag:!1,slider_loader_type:1,slider_loader_color:"white",slider_enable_links:!0,slider_links_newpage:!1,slider_enable_bullets:!1,slider_bullets_skin:"",slider_bullets_space_between:-1,slider_bullets_align_hor:"center",slider_bullets_align_vert:"bottom",slider_bullets_offset_hor:0,slider_bullets_offset_vert:10,slider_enable_arrows:!0,slider_arrows_skin:"",slider_arrow_left_align_hor:"left",slider_arrow_left_align_vert:"middle",slider_arrow_left_offset_hor:20,slider_arrow_left_offset_vert:0,slider_arrow_right_align_hor:"right",slider_arrow_right_align_vert:"middle",slider_arrow_right_offset_hor:20,slider_arrow_right_offset_vert:0,slider_enable_progress_indicator:!0,slider_progress_indicator_type:"pie",slider_progress_indicator_align_hor:"right",slider_progress_indicator_align_vert:"top",slider_progress_indicator_offset_hor:10,slider_progress_indicator_offset_vert:10,slider_enable_play_button:!0,slider_play_button_skin:"",slider_play_button_align_hor:"left",slider_play_button_align_vert:"top",slider_play_button_offset_hor:40,slider_play_button_offset_vert:8,slider_play_button_mobilehide:!1,slider_enable_fullscreen_button:!0,slider_fullscreen_button_skin:"",slider_fullscreen_button_align_hor:"left",slider_fullscreen_button_align_vert:"top",slider_fullscreen_button_offset_hor:11,slider_fullscreen_button_offset_vert:9,slider_fullscreen_button_mobilehide:!1,slider_enable_zoom_panel:!0,slider_zoompanel_skin:"",slider_zoompanel_align_hor:"left",slider_zoompanel_align_vert:"top",slider_zoompanel_offset_hor:12,slider_zoompanel_offset_vert:92,slider_zoompanel_mobilehide:!1,slider_controls_always_on:!1,slider_controls_appear_ontap:!0,slider_controls_appear_duration:300,slider_enable_text_panel:!0,slider_textpanel_always_on:!0,slider_videoplay_button_type:"square"},ce={slider_progress_indicator_align_hor:"left",slider_progress_indicator_align_vert:"bottom",slider_progress_indicator_offset_hor:0,slider_progress_indicator_offset_vert:0},he={isRunOnce:!1,isTextPanelSaparateHover:!1,numPrev:1,numCurrent:2,numNext:3,isControlsVisible:!0,currentControlsMode:"image"};this.switchSlideNums=function(e){switch(ne.trigger(ie.events.BEFORE_SWITCH_SLIDES),e){case"left":var t=he.numCurrent;he.numCurrent=he.numNext,he.numNext=he.numPrev,he.numPrev=t;break;case"right":t=he.numCurrent;he.numCurrent=he.numPrev,he.numPrev=he.numNext,he.numNext=t;break;default:throw new Error("wrong direction: "+e)}ne.trigger(ie.events.ITEM_CHANGED)},this.destroy=function(){ne.off(ie.events.AFTER_PUT_IMAGE),W.off(re.events.ITEM_IMAGE_UPDATED),W.off(re.events.ITEM_CHANGE),se&&jQuery(se).on(se.events.BULLET_CLICK),Y.off("mouseenter"),Y.off("mouseleave"),Y.off("touchend"),Y.off("click"),ne.off(ie.events.CLICK),$&&ne.off(ie.events.ZOOM_CHANGE),ne.off(ie.events.BEFORE_SWITCH_SLIDES),jQuery(le).off(le.events.SHOW),jQuery(le).off(le.events.HIDE),le.destroy(),Y.undelegate(".ug-item-wrapper img","mouseenter"),Y.undelegate(".ug-item-wrapper img","mouseleave")},this.________EXTERNAL_GENERAL___________=function(){},this.init=function(t,i,n){e(t,i,n)},this.getSlideImage=function(e){if(!e)e=ie.getCurrentSlide();return e.find(".ug-item-wrapper img")},this.setHtml=function(e){n(e)},this.run=function(){t()},this.isInnerInPlace=function(){var e=ie.getSlidesReference();return-ue.getElementSize(e.objCurrentSlide).left==ue.getElementSize(U).left},this.isAnimating=function(){return U.is(":animated")},this.isSlideCurrent=function(e){var t=e.data("slidenum");return he.numCurrent==t},this.isSlideHasItem=function(e){var t=e.data("index");return void 0!==t&&null!==t},this.getObjImagePadding=function(){return{padding_top:ge.slider_image_padding_top,padding_bottom:ge.slider_image_padding_bottom,padding_left:ge.slider_image_padding_left,padding_right:ge.slider_image_padding_right}},this.getSlidesReference=function(){return{objPrevSlide:R(he.numPrev),objNextSlide:R(he.numNext),objCurrentSlide:R(he.numCurrent)}},this.getCurrentSlide=function(){return ie.getSlidesReference().objCurrentSlide},this.getCurrentItemIndex=function(){var e=ie.getSlidesReference().objCurrentSlide.data("index");return null!==e&&void 0!==e||(e=-1),e},this.getCurrentItem=function(){var e=ie.getCurrentItemIndex();if(-1==e)return null;return re.getItem(e)},this.getSlideType=function(e){void 0==e&&(e=ie.getCurrentSlide());return e.data("type")},this.isMouseInsideSlideImage=function(e){var t=ie.getSlideImage(),i=ue.getMousePosition(e);void 0===i.pageX&&(i=J.getLastMousePos());var n=ue.getMouseElementPoint(i,t),r=ue.getElementSize(t);return isMouseInside=ue.isPointInsideElement(n,r),isMouseInside},this.isCurrentSlideType=function(e){return ie.getSlideType()==e},this.isCurrentSlideLoadingImage=function(){return!0===ie.getCurrentSlide().data("isLoading")},this.setItem=function(e,t,i){var n=ie.getSlidesReference(),r=n.objCurrentSlide.data("index"),o=e.index;if(o==r)return!0;if(void 0==r)g(n.objCurrentSlide,e),ie.placeNabourItems();else{var a="left";re.getNumItems();"next"==i?a="left":"prev"==i||r>o?a="right":r>o&&(a="right"),function(e,t,i){ne.trigger(ie.events.TRANSITION_START);var n=ge.slider_transition;switch(i&&(n=i),ie.stopSlideAction(null,!0),n){default:case"fade":y(t);break;case"slide":b(e,t);break;case"lightbox_open":y(t,!1,!0)}}(a,e,t)}},this.placeNabourItems=function(){var e=ie.getSlidesReference(),t=e.objCurrentSlide.data("index"),i=re.getPrevItem(t),n=re.getNextItem(t);g(e.objNextSlide,n),g(e.objPrevSlide,i),a()},this.________EXTERNAL_API___________=function(){},this.stopSlideAction=function(e,t){e||(e=ie.getCurrentSlide()),!0===t?le.pause():le.hide()},this.startSlideAction=function(e){e||(e=ie.getCurrentSlide());var t=Q(e);if("image"==t.type)return!0;switch(1==ge.slider_video_constantsize&&f(),m(),le.show(),t.type){case"youtube":le.playYoutube(t.videoid);break;case"vimeo":le.playVimeo(t.videoid);break;case"html5video":le.playHtml5Video(t.videoogv,t.videowebm,t.videomp4,t.urlImage);break;case"soundcloud":le.playSoundCloud(t.trackid);break;case"wistia":le.playWistia(t.videoid)}},this.getScaleMode=function(e){if(!e)e=ie.getCurrentSlide();return"image"!=ie.getSlideType(e)?ge.slider_scale_mode_media:ge.slider_scale_mode==ge.slider_scale_mode_fullscreen?ge.slider_scale_mode:1==re.isFullScreen()?ge.slider_scale_mode_fullscreen:ge.slider_scale_mode},this.getObjects=function(){return{g_objSlider:Y,g_objInner:U,g_options:ge,g_objZoomSlider:$}},this.getObjZoom=function(){return $},this.getOptions=function(){return ge},this.getElement=function(){return Y},this.getVideoObject=function(){return le},this.isCurrentSlideImageFit=function(){var e=ie.getCurrentSlide();ie.getSlideType(e);!function(e,t){void 0==t&&(t=ie.getCurrentSlide());var i=ie.getSlideType(t);if(i!=e)throw new Error("Wrong slide type: "+i+", should be: "+e)}("image",e);var t=ie.getSlideImage(e);if(0==t.length)return!1;return ue.isImageFitParent(t)},this.isCurrentImageInPlace=function(){var e=ie.getSlideImage();if(0==e.length)return!1;var t=ie.getScaleMode(),i=ie.getObjImagePadding(),n=Q(),r=e.parent(),o=ue.getImageInsideParentData(r,n.imageWidth,n.imageHeight,t,i),a=ue.getElementSize(e),s=!1;return o.imageWidth==a.width&&(s=!0),s},this.isSlideActionActive=function(){return le.isVisible()},this.isSwiping=function(){if(!J)return!1;return J.isTouchActive()},this.isPreloading=function(){return!!G().is(":visible")},this.setOptions=function(e){te&&(e=ue.convertCustomPrefixOptions(e,te,"slider")),ge=jQuery.extend(ge,e)},this.setSize=function(e,t){if(e<0||t<0)return!0;var i={};i.width=e+"px",i.height=t+"px",Y.css(i);var n={};n.height=t+"px",n.top="0px",n.left="0px",U.css(n);var r={};r.height=t+"px",r.width=e+"px",V.css(r),X.css(r),Z.css(r);var l=e-ge.slider_item_padding_left-ge.slider_item_padding_right,u=t-ge.slider_item_padding_top-ge.slider_item_padding_bottom,d={};d.width=l+"px",d.height=u+"px",d.top=ge.slider_item_padding_top+"px",d.left=ge.slider_item_padding_left+"px",Y.find(".ug-item-wrapper").css(d),_e&&_e.setSizeByParent(),o(),s(V),s(X),s(Z),a();if("image"!=ie.getSlideType()&&1==ge.slider_video_constantsize)f();else{var _=e-ge.slider_video_padding_left-ge.slider_video_padding_right,g=t-ge.slider_video_padding_top-ge.slider_video_padding_bottom;le.setSize(_,g)}m()},this.refreshSlideItems=function(){if(1==ie.isAnimating())return!0;s(V),s(X),s(Z),a()},this.isMouseOver=function(){return Y.ismouseover()},this.setPosition=function(e,t){ue.placeElement(Y,e,t)},this.zoomIn=function(){if(!$)return!0;$.zoomIn()},this.zoomOut=function(){if(!$)return!0;$.zoomOut()},this.zoomBack=function(){if(!$)return!0;$.zoomBack()}}function UGTextPanel(){function e(e,t){if(!t)t=h.textpanel_padding_top;var i=t;if(a){var n=i;g.placeElement(a,0,n);i=g.getElementSize(a).bottom}var o="";if(s&&(o=jQuery.trim(s.text())),""!=o){var d=i;a&&(d+=h.textpanel_padding_title_description),g.placeElement(s,0,d);i=g.getElementSize(s).bottom}if(!h.textpanel_height&&1==p.setInternalHeight){!function(e,t){if(!t)var t=!1;if(1==t){if(l){var i=l.height();e>i&&l.height(e)}var n={height:e+"px"};r.add(u).animate(n,h.textpanel_fade_duration)}else l&&l.height(e),r.add(u).height(e)}(i+h.textpanel_padding_bottom,e)}}function t(){var e=0;if(a&&(e+=a.outerHeight()),s){var t="";s&&(t=jQuery.trim(s.text())),""!=t&&(a&&(e+=h.textpanel_padding_title_description),e+=s.outerHeight())}return e}function i(){if(1==h.textpanel_enable_bg){(l=r.children(".ug-textpanel-bg")).fadeTo(0,h.textpanel_bg_opacity);var e={"background-color":h.textpanel_bg_color};e=jQuery.extend(e,h.textpanel_bg_css),l.css(e)}if(1==h.textpanel_enable_title){a=u.children(".ug-textpanel-title");var t={};null!==h.textpanel_title_color&&(t.color=h.textpanel_title_color),null!==h.textpanel_title_font_family&&(t["font-family"]=h.textpanel_title_font_family),null!==h.textpanel_title_text_align&&(t["text-align"]=h.textpanel_title_text_align),null!==h.textpanel_title_font_size&&(t["font-size"]=h.textpanel_title_font_size+"px"),null!==h.textpanel_title_bold&&(!0===h.textpanel_title_bold?t["font-weight"]="bold":t["font-weight"]="normal"),h.textpanel_css_title&&(t=jQuery.extend(t,h.textpanel_css_title)),a.css(t)}if(1==h.textpanel_enable_description){s=u.children(".ug-textpanel-description");var i={};null!==h.textpanel_desc_color&&(i.color=h.textpanel_desc_color),null!==h.textpanel_desc_font_family&&(i["font-family"]=h.textpanel_desc_font_family),null!==h.textpanel_desc_text_align&&(i["text-align"]=h.textpanel_desc_text_align),null!==h.textpanel_desc_font_size&&(i["font-size"]=h.textpanel_desc_font_size+"px"),null!==h.textpanel_desc_bold&&(!0===h.textpanel_desc_bold?i["font-weight"]="bold":i["font-weight"]="normal"),h.textpanel_css_title&&(i=jQuery.extend(i,h.textpanel_css_description)),s.css(i)}}function n(){var e=d.getSelectedItem();_.setText(e.title,e.description)}var r,o,a,s,l,u,d,_=this,g=new UGFunctions,c="",h={textpanel_align:"bottom",textpanel_margin:0,textpanel_text_valign:"middle",textpanel_padding_top:10,textpanel_padding_bottom:10,textpanel_height:null,textpanel_padding_title_description:5,textpanel_padding_right:11,textpanel_padding_left:11,textpanel_fade_duration:200,textpanel_enable_title:!0,textpanel_enable_description:!0,textpanel_enable_bg:!0,textpanel_bg_color:"#000000",textpanel_bg_opacity:.4,textpanel_title_color:null,textpanel_title_font_family:null,textpanel_title_text_align:null,textpanel_title_font_size:null,textpanel_title_bold:null,textpanel_css_title:{},textpanel_desc_color:null,textpanel_desc_font_family:null,textpanel_desc_text_align:null,textpanel_desc_font_size:null,textpanel_desc_bold:null,textpanel_css_description:{},textpanel_desc_style_as_title:!1,textpanel_bg_css:{}},p={isFirstTime:!0,setInternalHeight:!0};this.positionElements=function(i){if(!h.textpanel_height||"top"==h.textpanel_text_valign)return e(i),!1;switch(h.textpanel_text_valign){default:case"top":e(!1);break;case"bottom":!function(){var i=t();e(!1,u.height()-i-h.textpanel_padding_bottom)}();break;case"center":case"middle":!function(){var i=t();e(!1,(u.height()-i)/2)}()}},this.init=function(e,t,i){if(d=e,i&&(c=i,t=g.convertCustomPrefixOptions(t,c,"textpanel")),t&&(h=jQuery.extend(h,t)),0==h.textpanel_enable_title&&0==h.textpanel_enable_description)throw new Error("Textpanel Error: The title or description must be enabled");h.textpanel_height&&h.textpanel_height<0&&(h.textpanel_height=null),1==h.textpanel_desc_style_as_title&&(h.textpanel_desc_color||(h.textpanel_desc_color=h.textpanel_title_color),h.textpanel_desc_bold||(h.textpanel_desc_bold=h.textpanel_title_bold),h.textpanel_desc_font_family||(h.textpanel_desc_font_family=h.textpanel_title_font_family),h.textpanel_desc_font_size||(h.textpanel_desc_font_size=h.textpanel_title_font_size),h.textpanel_desc_text_align||(h.textpanel_desc_text_align=h.textpanel_title_text_align))},this.appendHTML=function(e,t){o=e;var n="<div class='ug-textpanel"+(t=t?" "+t:"")+"'>";1==h.textpanel_enable_bg&&(n+="<div class='ug-textpanel-bg"+t+"'></div>"),n+="<div class='ug-textpanel-textwrapper"+t+"'>",1==h.textpanel_enable_title&&(n+="<div class='ug-textpanel-title"+t+"'></div>"),1==h.textpanel_enable_description&&(n+="<div class='ug-textpanel-description"+t+"'></div>"),n+="</div></div>",e.append(n),r=e.children(".ug-textpanel"),u=r.children(".ug-textpanel-textwrapper"),i()},this.destroy=function(){jQuery(d).off(d.events.ITEM_CHANGE)},this.run=function(){_.setSizeByParent(),jQuery(d).on(d.events.ITEM_CHANGE,n)},this.setPanelSize=function(e,t){if(p.setInternalHeight=!0,t)p.setInternalHeight=!1;else t=80;h.textpanel_height&&(t=h.textpanel_height),r.width(e),r.height(t),l&&(l.width(e),l.height(t));var i=e-h.textpanel_padding_left-h.textpanel_padding_right,n=h.textpanel_padding_left;g.setElementSizeAndPosition(u,n,0,i,t),a&&a.width(i),s&&s.width(i),0==p.isFirstTime&&_.positionElements(!1)},this.setSizeByParent=function(){var e=g.getElementSize(o);_.setPanelSize(e.width)},this.setTextPlain=function(e,t){a&&a.html(e),s&&s.html(t)},this.setText=function(e,t){1==p.isFirstTime?(_.setTextPlain(e,t),p.isFirstTime=!1,_.positionElements(!1)):u.stop().fadeTo(h.textpanel_fade_duration,0,function(){_.setTextPlain(e,t),_.positionElements(!0),jQuery(this).fadeTo(h.textpanel_fade_duration,1)})},this.positionPanel=function(e,t){var i={};if(void 0!==e&&null!==e)i.top=e,i.bottom="auto";else switch(h.textpanel_align){case"top":i.top=h.textpanel_margin+"px";break;case"bottom":i.top="auto",i.bottom=h.textpanel_margin+"px";break;case"middle":i.top=g.getElementRelativePos(r,"middle",h.textpanel_margin)}void 0!==t&&null!==t&&(i.left=t),r.css(i)},this.setOptions=function(e){c&&(e=g.convertCustomPrefixOptions(e,c,"textpanel")),h=jQuery.extend(h,e)},this.getElement=function(){return r},this.getSize=function(){return g.getElementSize(r)},this.refresh=function(e,t,n,r){i(),n?_.setPanelSize(n,r):_.setSizeByParent(),_.positionElements(!1),!0!==t&&_.positionPanel(),!0===e&&_.show()},this.hide=function(){r.hide()},this.show=function(){r.show()},this.getOptions=function(){return h},this.getOption=function(e){return 0==h.hasOwnProperty(e)?null:h[e]}}function UGZoomButtonsPanel(){function e(e){return!e||!!e.hasClass("ug-zoompanel-button-disabled")}function t(e){e&&e.addClass("ug-zoompanel-button-disabled")}function i(e){e&&e.removeClass("ug-zoompanel-button-disabled")}function n(){if(0==u.isCurrentSlideType("image"))return!0;1==u.isCurrentSlideImageFit()?0==e(s)&&(t(s),t(l)):1==e(s)&&(i(s),i(l))}var r,o,a,s,l,u=new UGSlider,d=new UGFunctions,_={slider_zoompanel_skin:""};this.init=function(e,t){u=e,t&&(_=jQuery.extend(_,t))},this.appendHTML=function(e){o=e;var t="<div class='ug-slider-control ug-zoompanel ug-skin-"+_.slider_zoompanel_skin+"'>";t+="<div class='ug-zoompanel-button ug-zoompanel-plus'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-minus ug-zoompanel-button-disabled'></div>",t+="<div class='ug-zoompanel-button ug-zoompanel-return ug-zoompanel-button-disabled'></div>",t+="</div>",e.append(t),r=e.children(".ug-zoompanel"),a=r.children(".ug-zoompanel-plus"),s=r.children(".ug-zoompanel-minus"),l=r.children(".ug-zoompanel-return")},this.setObjects=function(e,t,i){a=e,l=i,(s=t)&&s.addClass("ug-zoompanel-button-disabled"),l&&l.addClass("ug-zoompanel-button-disabled")},this.getElement=function(){return r},this.initEvents=function(){d.addClassOnHover(a,"ug-button-hover"),d.addClassOnHover(s,"ug-button-hover"),d.addClassOnHover(l,"ug-button-hover"),d.setButtonOnClick(a,function(){if(1==e(a))return!0;u.zoomIn()}),d.setButtonOnClick(s,function(){if(1==e(s))return!0;u.zoomOut()}),d.setButtonOnClick(l,function(){if(1==e(l))return!0;u.zoomBack()}),jQuery(u).on(u.events.ZOOM_CHANGE,n),jQuery(u).on(u.events.ITEM_CHANGED,n)}}function UGBullets(){function e(){var e="",t="";-1!=h.bullets_space_between&&(t=" style='margin-left:"+h.bullets_space_between+"px'");for(var i=0;i<u;i++)e+=0==i?"<div class='ug-bullet'></div>":"<div class='ug-bullet'"+t+"></div>";if(o.html(e),!s){var n=o.find(".ug-bullet:first-child");n.length&&(s=n.width())}}function t(e){if(1==l.isActive(e))return!0;var t=e.index();jQuery(l).trigger(l.events.BULLET_CLICK,t)}function i(){var e=o.children(".ug-bullet");g.setButtonOnClick(e,t),e.on("mousedown mouseup",function(e){return!1})}function n(e){if(e<0||e>=u)throw new Error("wrong bullet index: "+e)}function r(){if(1==c.isInited)return!0;throw new Error("The bullets are not inited!")}var o,a,s,l=this,u=0,d=new UniteGalleryMain,_=-1,g=new UGFunctions,c={isInited:!1},h={bullets_skin:"",bullets_addclass:"",bullets_space_between:-1};this.events={BULLET_CLICK:"bullet_click"},this.init=function(e,t,i){d=e,u=i||d.getNumItems(),c.isInited=!0,""==(h=jQuery.extend(h,t)).bullets_skin&&(h.bullets_skin=h.gallery_skin)},this.getBulletsWidth=function(){if(0==u)return 0;if(!s)return 0;return u*s+(u-1)*h.bullets_space_between},this.appendHTML=function(t){a=t,r();var n="";""!=h.bullets_addclass&&(n=" "+h.bullets_addclass);var s="<div class='ug-slider-control ug-bullets ug-skin-"+h.bullets_skin+n+"'>";s+="</div>",o=jQuery(s),t.append(o),e(),i()},this.updateNumBullets=function(t){u=t,e(),i()},this.getElement=function(){return o},this.setActive=function(e){r(),n(e);var t=o.children(".ug-bullet");t.removeClass("ug-bullet-active");jQuery(t[e]).addClass("ug-bullet-active"),_=e},this.isActive=function(e){if(n(e),"number"!=typeof e)var t=e;else t=o.children(".ug-bullet")[e];return!!t.hasClass("ug-bullet-active")},this.getNumBullets=function(){return u}}function UGProgressBar(){var e,t,i=this,n=0,r=new UGFunctions,o={slider_progressbar_color:"#ffffff",slider_progressbar_opacity:.6,slider_progressbar_line_width:5};this.put=function(i,n){n&&(o=jQuery.extend(o,n)),i.append("<div class='ug-progress-bar'><div class='ug-progress-bar-inner'></div></div>"),e=i.children(".ug-progress-bar"),(t=e.children(".ug-progress-bar-inner")).css("background-color",o.slider_progressbar_color),e.height(o.slider_progressbar_line_width),t.height(o.slider_progressbar_line_width),t.width("0%");var r=o.slider_progressbar_opacity,a=t[0];a.style.opacity=r,a.style.filter="alpha(opacity="+100*r+")"},this.putHidden=function(t,n){i.put(t,n),e.hide()},this.getElement=function(){return e},this.setSize=function(n){e.width(n),t.width(n),i.draw()},this.setPosition=function(t,i,n,o){r.placeElement(e,t,i,n,o)},this.draw=function(){var e=100*n;t.width(e+"%")},this.setProgress=function(e){n=r.normalizePercent(e),i.draw()},this.getType=function(){return"bar"}}function UGProgressPie(){function e(e){if(!e)e=0;var t=Math.min(a.slider_progresspie_width,a.slider_progresspie_height)/2,n=i[0].getContext("2d");0==r&&(r=!0,n.rotate(1.5*Math.PI),n.translate(-2*t,0)),n.clearRect(0,0,a.slider_progresspie_width,a.slider_progresspie_height);var o=a.slider_progresspie_width/2,s=a.slider_progresspie_height/2,l=0,u=e*Math.PI*2;if(1==a.slider_progresspie_type_fill)n.beginPath(),n.moveTo(o,s),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath();else{n.globalCompositeOperation="source-over",n.beginPath(),n.moveTo(o,s),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath(),n.globalCompositeOperation="destination-out";var d=t-a.slider_progresspie_stroke_width;n.beginPath(),n.moveTo(o,s),n.arc(o,s,d,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color1,n.fill(),n.closePath()}1==a.slider_progresspie_type_fill&&(l=u,u=2*Math.PI,n.beginPath(),n.arc(o,s,t,l,u),n.lineTo(o,s),n.fillStyle=a.slider_progresspie_color2,n.fill(),n.closePath())}var t,i,n=this,r=!1,o=new UGFunctions,a={slider_progresspie_type_fill:!1,slider_progresspie_color1:"#B5B5B5",slider_progresspie_color2:"#E5E5E5",slider_progresspie_stroke_width:6,slider_progresspie_width:30,slider_progresspie_height:30};this.put=function(e,t){t&&(a=jQuery.extend(a,t)),e.append("<canvas class='ug-canvas-pie' width='"+a.slider_progresspie_width+"' height='"+a.slider_progresspie_height+"'></canvas>"),i=e.children(".ug-canvas-pie")},this.putHidden=function(t,r){n.put(t,r),e(.1),i.hide()},this.getElement=function(){return i},this.setPosition=function(e,t){o.placeElement(i,e,t)},this.getSize=function(){return{width:a.slider_progresspie_width,height:a.slider_progresspie_height}},this.setProgress=function(i){i=o.normalizePercent(i),t=i,e(i)},this.getType=function(){return"pie"}}function UGTouchSliderControl(){function e(e){if(!e)e=g.getSlidesReference();return-c.getElementSize(e.objCurrentSlide).left-c.getElementSize(d).left}function t(e){if(1==g.isInnerInPlace())return!1;if(_.trigger(g.events.BEFORE_RETURN),!e)e=g.getSlidesReference();var t=-c.getElementSize(e.objCurrentSlide).left;d.animate({left:t+"px"},{duration:h.slider_transition_return_speed,easing:h.slider_transition_continuedrag_easing,queue:!1,progress:function(e,i,n){if(1==p.isDragVideo){var r=c.getElementSize(d).left-t,o=p.videoStartX+r;p.videoObject.css("left",o)}},complete:function(){_.trigger(g.events.AFTER_RETURN)}})}function i(){var i=g.getSlidesReference(),n=e(i);if(0==n)return!1;var r=n>0?"left":"right",o=!1;switch(r){case"right":if(g.isSlideHasItem(i.objPrevSlide))var a=-c.getElementSize(i.objPrevSlide).left;else o=!0;break;case"left":if(g.isSlideHasItem(i.objNextSlide))a=-c.getElementSize(i.objNextSlide).left;else o=!0}1==o?t(i):d.stop().animate({left:a+"px"},{duration:h.slider_transition_continuedrag_speed,easing:h.slider_transition_continuedrag_easing,queue:!1,progress:function(){if(1==p.isDragVideo){var e=c.getElementSize(d).left-p.startPosx,t=p.videoStartX+e;p.videoObject.css("left",t)}},always:function(){!function(e){g.getVideoObject().hide(),g.switchSlideNums(e),g.placeNabourItems()}(r),_.trigger(g.events.AFTER_DRAG_CHANGE)}})}function n(e){var t=c.getMousePosition(e);p.startMouseX=t.pageX,p.startMouseY=t.pageY,p.lastMouseX=p.startMouseX,p.lastMouseY=p.startMouseY,p.startTime=jQuery.now();var i=c.getArrTouches(e);p.startArrTouches=c.getArrTouchPositions(i);var n=c.getElementSize(d);p.startPosx=n.left,p.isInitDataValid=!0,p.isDragVideo=!1,c.storeEventData(e,p.storedEventID)}function r(e){p.touch_active=!1}function o(e,t){p.touch_active=!0,n(t)}function a(e){e.preventDefault(),p.isDragging=!1,1==g.isAnimating()&&d.stop(!0,!0);return c.getArrTouches(e).length>1?(1==p.touch_active&&r(),!0):1==p.touch_active||void o(0,e)}function s(e){if(0==p.touch_active)return!0;if(0==e.buttons)return r(),i(),!0;c.updateStoredEventData(e,p.storedEventID),e.preventDefault();var t=c.getMousePosition(e);p.lastMouseX=t.pageX,p.lastMouseY=t.pageY;var o=null;1==h.slider_vertical_scroll_ondrag&&(o=c.handleScrollTop(p.storedEventID)),"vert"!==o&&function(e){var t=p.lastMouseX-p.startMouseX;if(0==t)return!0;var i=t<0?"left":"right",r=g.getObjZoom();if(r){if(1==r.isPanEnabled(e,i))return p.isInitDataValid=!1,!0;if(0==p.isInitDataValid)return n(e),!0}var o=p.startPosx+t;t>0&&o>0?o/=3:t<0&&o+d.width()<u.width()&&(o=p.startPosx+t/3);if(0==p.isDragging&&(p.isDragging=!0,_.trigger(g.events.START_DRAG)),d.css("left",o+"px"),1==p.isDragVideo){var a=o-p.startPosx,s=p.videoStartX+a;p.videoObject.css("left",s)}}(e)}function l(n){var a=c.getArrTouches(n).length;if(1==g.isInnerInPlace()&&0==p.touch_active&&0==a)return!0;if(0==a&&1==p.touch_active){r();var s=!1;0==c.wasVerticalScroll(p.storedEventID)&&(s=function(){var t=g.getSlidesReference(),i=e(t),n=Math.round(3*t.objCurrentSlide.width()/8);if(Math.abs(i)>=n)return!0;var r=Math.abs(p.lastMouseX-p.startMouseX);return Math.abs(p.lastMouseY-p.startMouseY),!(r<20)&&jQuery.now()-p.startTime<500}()),1==s?i():t()}else 1==a&&0==p.touch_active&&o(0,n)}var u,d,_,g=new UGSlider,c=new UGFunctions,h={slider_transition_continuedrag_speed:250,slider_transition_continuedrag_easing:"linear",slider_transition_return_speed:300,slider_transition_return_easing:"easeInOutQuad"},p={touch_active:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startPosx:0,startTime:0,isInitDataValid:!1,slides:null,lastNumTouches:0,isDragging:!1,storedEventID:"touchSlider",videoStartX:0,isDragVideo:!1,videoObject:null};this.isTapEventOccured=function(t){var i=c.getArrTouches(t).length;if(0!=i||0!=p.lastNumTouches)return p.lastNumTouches=i,!1;p.lastNumTouches=i;e(g.getSlidesReference());var n=Math.abs(p.lastMouseX-p.startMouseX),r=Math.abs(p.lastMouseY-p.startMouseY),o=jQuery.now()-p.startTime;return n<20&&r<50&&o<500},this.init=function(e,t){g=e,_=jQuery(g),g_objects=e.getObjects(),u=g_objects.g_objSlider,d=g_objects.g_objInner,h=jQuery.extend(h,t),u.bind("mousedown touchstart",a),jQuery("body").bind("mousemove touchmove",s),jQuery(window).add("body").bind("mouseup touchend",l)},this.getLastMousePos=function(){return{pageX:p.lastMouseX,pageY:p.lastMouseY}},this.isTouchActive=function(){return p.touch_active}}function UGZoomSliderControl(){function e(e,t){m=e,p=jQuery(m),g_objects=e.getObjects(),c=g_objects.g_objSlider,h=g_objects.g_objInner,b=jQuery.extend(b,t),c.on("mousewheel",g),c.bind("mousedown touchstart",u),jQuery("body").bind("mousemove touchmove",_),jQuery(window).add("body").bind("mouseup touchend",d),p.bind(m.events.BEFORE_RETURN,function(){l()}),p.bind(m.events.ITEM_CHANGED,function(){v.isZoomedOnce=!1}),p.bind(m.events.ZOOM_CHANGE,function(){v.isZoomedOnce=!0})}function t(){var e=m.getScaleMode();return"down"!=e&&(e="fit"),e}function i(){if((n=jQuery.now())-v.storeImageLastTime<20)return!1;var e=m.getSlidesReference();if(v.objSlide=e.objCurrentSlide,v.objImage=e.objCurrentSlide.find("img"),0==v.objImage.length)return!1;v.objImageSize=f.getElementSize(v.objImage),v.objParent=v.objImage.parent(),v.objParentSize=f.getElementSize(v.objParent);var i=t();objPadding=m.getObjImagePadding(),v.objFitImageSize=f.getImageInsideParentDataByImage(v.objImage,i,objPadding);var n=jQuery.now();return v.storeImageLastTime=n,!0}function n(e,i){var n=m.getSlidesReference().objCurrentSlide.find("img"),r=t();p.trigger(m.events.ZOOM_START);var o=!0,a=m.getObjImagePadding();if("back"==e){var s=f.getImageOriginalSize(n);f.scaleImageFitParent(n,s.width,s.height,r,a)}else{var l="in"==e;o=f.zoomImageInsideParent(n,l,b.slider_zoom_step,i,r,b.slider_zoom_max_ratio,a)}1==o&&(p.trigger(m.events.ZOOMING),p.trigger(m.events.ZOOM_CHANGE),p.trigger(m.events.ZOOM_END))}function r(e,t,i){var n=f.getArrTouches(t);if(!0===i){if(1!=n.length)return!1}else if(n.length>1)return!1;return!!f.isElementBiggerThenParent(e)}function o(e){v.isPanActive=!0,function(e){var t=f.getMousePosition(e);v.startMouseX=t.pageX,v.startMouseY=t.pageY,v.lastMouseX=v.startMouseX,v.lastMouseY=v.startMouseY,v.startImageX=v.objImageSize.left,v.startImageY=v.objImageSize.top,v.panXActive=v.objImageSize.width>v.objParentSize.width,v.panYActive=v.objImageSize.height>v.objParentSize.height}(e)}function a(e){if(0==v.isZoomActive)return!1;2!=f.getArrTouches(e).length&&(v.isZoomActive=!1,p.trigger(m.events.ZOOM_END))}function s(e){if(1==v.isZoomActive)return!0;var t=f.getArrTouches(e);if(2!=t.length)return!0;!function(e){v.isZoomActive=!0,v.startDistance=f.getDistance(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),0==v.startDistance&&(v.startDistance=1),v.startMiddlePoint=f.getMiddlePoint(e[0].pageX,e[0].pageY,e[1].pageX,e[1].pageY),v.objImageSize=f.getElementSize(v.objImage),v.startImageX=v.objImageSize.left,v.startImageY=v.objImageSize.top,v.imageOrientPoint=f.getElementLocalPoint(v.startMiddlePoint,v.objImage),0==f.isPointInsideElement(v.imageOrientPoint,v.objImageSize)&&(v.imageOrientPoint=f.getElementCenterPoint(v.objImage)),p.trigger(m.events.ZOOM_START)}(t)}function l(){if(void 0==v.objImage||0==v.objImage.length)return!0;if(f.getElementSize(v.objImage).width<v.objFitImageSize.imageWidth){v.objImage.css({position:"absolute",margin:"none"});var e={top:v.objFitImageSize.imageTop+"px",left:v.objFitImageSize.imageLeft+"px",width:v.objFitImageSize.imageWidth+"px",height:v.objFitImageSize.imageHeight+"px"};v.objImage.animate(e,{duration:b.slider_zoom_return_pan_duration,easing:b.slider_zoom_return_pan_easing,queue:!1})}else!function(){var e=!1,t=!1,i=0,n=0,r=f.getElementSize(v.objImage),o=m.getObjImagePadding(),a=f.getElementCenterPosition(v.objImage,o);v.panXActive=v.objImageSize.width>v.objParentSize.width,v.panYActive=v.objImageSize.height>v.objParentSize.height,1==v.panYActive?r.top>0?(n=0,t=!0):r.bottom<v.objParentSize.height&&(n=v.objParentSize.height-r.height,t=!0):r.top!=a.top&&(t=!0,n=a.top),1==v.panXActive?r.left>0?(i=0,e=!0):r.right<v.objParentSize.width&&(i=v.objParentSize.width-r.width,e=!0):r.left!=a.left&&(e=!0,i=a.left);var s={};1==t&&(s.top=n+"px"),1==e&&(s.left=i+"px"),1!=t&&1!=e||v.objImage.animate(s,{duration:b.slider_zoom_return_pan_duration,easing:b.slider_zoom_return_pan_easing,queue:!1})}()}function u(e){if(0==m.isCurrentSlideType("image"))return!0;i();if(void 0==v.objImage||0==v.objImage.length)return!0;e.preventDefault(),1==!(!v.objImage||!v.objImage.is(":animated"))&&v.objImage.stop(!0),1==v.isZoomActive?a(e):s(e),1==v.isZoomActive?v.isPanActive=!1:1==r(v.objImage,e)&&1==v.isZoomedOnce&&o(e)}function d(e){if(0==m.isCurrentSlideType("image"))return!0;if(1==jQuery(e.target).data("ug-button"))return!1;i();if(void 0==v.objImage||0==v.objImage.length)return!0;var t=v.isPanActive,n=v.isZoomActive;if(0==m.isInnerInPlace())return v.isZoomActive=!1,v.isPanActive=!1,!0;if(1==v.isZoomActive?a(e):s(e),1==v.isZoomActive)v.isPanActive=!1;else{var u=r(v.objImage,e,!0);1==v.isPanActive?v.isPanActive=!1:1==u&&o(e)}(t||n)&&0==v.isZoomActive&&0==v.isPanActive&&l()}function _(e){if(0==m.isCurrentSlideType("image"))return!0;1==v.isZoomActive?function(e){var t=f.getArrTouches(e),i=f.getDistance(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY)/v.startDistance,n=f.getMiddlePoint(t[0].pageX,t[0].pageY,t[1].pageX,t[1].pageY),r=v.objImageSize.width*i,o=v.objImageSize.height*i,a=f.getImageOriginalSize(v.objImage),s=1;if(a.width>0&&(s=r/a.width),s>b.slider_zoom_max_ratio)return!0;panX=-(v.imageOrientPoint.x*i-v.imageOrientPoint.x),panY=-(v.imageOrientPoint.y*i-v.imageOrientPoint.y);var l=n.x-v.startMiddlePoint.x,u=n.y-v.startMiddlePoint.y,d=v.startImageX+panX+l,_=v.startImageY+panY+u;f.setElementSizeAndPosition(v.objImage,d,_,r,o),p.trigger(m.events.ZOOMING),p.trigger(m.events.ZOOM_CHANGE)}(e):1==v.isPanActive&&function(e){if(void 0==v.objImage||0==v.objImage.length)return!0;var t=f.getMousePosition(e),i=(t.pageX,v.startMouseX,t.pageY,v.startMouseY,t.pageX-v.lastMouseX),n=t.pageY-v.lastMouseY,r=i<0?"left":"right",o=n<0?"up":"down";v.lastMouseX=t.pageX,v.lastMouseY=t.pageY;var a=f.getElementSize(v.objImage);0==v.panYActive?n=0:"down"==o&&a.top>0?n/=3:"up"==o&&a.bottom<v.objParentSize.height&&(n/=3),0==v.panXActive||0==m.isInnerInPlace()?i=0:"right"==r&&a.left>0?i/=3:"left"==r&&a.right<v.objParentSize.width&&(i/=3);var s=a.left+i,l=a.top+n;f.placeElement(v.objImage,s,l)}(e)}function g(e,t,i,r){if(0==b.slider_zoom_mousewheel)return!0;if(0==m.isCurrentSlideType("image"))return!0;e.preventDefault();var o=t>0,a=f.getMousePosition(e);n(1==o?"in":"out",a)}var c,h,p,m=new UGSlider,f=new UGFunctions,b={slider_zoom_step:1.2,slider_zoom_max_ratio:6,slider_zoom_return_pan_duration:400,slider_zoom_return_pan_easing:"easeOutCubic"},v={isPanActive:!1,startMouseX:0,startMouseY:0,lastMouseX:0,lastMouseY:0,startImageX:0,startImageY:0,panXActive:!1,panYActive:!1,objImage:null,objImageSize:null,objParent:null,objParentSize:null,objSlide:null,storeImageLastTime:0,isZoomActive:!1,startDistance:0,startMiddlePoint:null,imageOrientPoint:null,objFitImageSize:null,isZoomedOnce:!1};this.________EXTERNAL_____________=function(){},this.isPanEnabled=function(e,t){if(i(),void 0==v.objImage||0==v.objImage.length)return!1;if(0==v.isZoomedOnce)return!1;if(0==r(v.objImage,e))return!1;if(0==m.isInnerInPlace())return!1;if("left"==t){if(v.objImageSize.right<=v.objParentSize.width)return!1}else if(v.objImageSize.left>=0)return!1;return!0},this.init=function(t,i){e(t,i)},this.zoomIn=function(){n("in")},this.zoomOut=function(){n("out")},this.zoomBack=function(){n("back")}}function UGWistiaAPI(){function e(){return"undefined"!=typeof Wistia}function t(e,t,i,s,l){n=null,a=!1;var u=e+"_video",d="<div id='"+u+"' class='wistia_embed' style='width:"+i+";height:"+s+";' data-video-width='"+i+"' data-video-height='"+s+"'>&nbsp;</div>";jQuery("#"+e).html(d),n=Wistia.embed(t,{version:"v1",videoWidth:i,videoHeight:s,container:u,autoPlay:l}),a=!0,n.bind("play",function(){o.trigger(r.events.START_PLAYING)}),n.bind("pause",function(){o.trigger(r.events.STOP_PLAYING)}),n.bind("end",function(){o.trigger(r.events.STOP_PLAYING),o.trigger(r.events.VIDEO_ENDED)})}this.isAPILoaded=!1;var i,n,r=this,o=jQuery(this),a=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugWistiaAPI.isAPILoaded||(e()?(g_ugWistiaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("fast.wistia.com/assets/external/E-v1.js",!0),void(g_ugWistiaAPI.isAPILoaded=!0)))},this.doCommand=function(e){if(null==n)return!1;if(0==a)return!1;switch(e){case"play":n.play();break;case"pause":n.pause()}},this.pause=function(){r.doCommand("pause")},this.play=function(){r.doCommand("play")},this.putVideo=function(n,r,o,a,s){if(e())return t(n,r,o,a,s),!0;this.loadAPI(),i=setInterval(function(){e()&&(t(n,r,o,a,s),clearInterval(i))},500)},this.isPlayerReady=function(){return!(!a||!n)}}function UGSoundCloudAPI(){function e(){return"undefined"!=typeof SC}function t(e,t,i,s,l){n=null,g_isPlayerReady=!1;var u=e+"_iframe",d=location.protocol+"//w.soundcloud.com/player/?url=http://api.soundcloud.com/tracks/"+t;d+="&amp;buying=false&amp;liking=false&amp;download=false&amp;sharing=false&amp;show_artwork=true&show_comments=false&amp;show_playcount=true&amp;show_user=false&amp;hide_related=true&amp;visual=true&amp;start_track=0&amp;callback=true";var _="<iframe id='"+u+"' src="+(d+=!0===l?"&amp;auto_play=true":"&amp;auto_play=false")+" width='"+i+"' height='"+s+"' frameborder='0' scrolling='no' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(_),(n=SC.Widget(u)).bind(SC.Widget.Events.READY,function(){n&&(g_isPlayerReady=!0,n.bind(SC.Widget.Events.PLAY,function(){a.trigger(o.events.START_PLAYING)}),n.bind(SC.Widget.Events.PAUSE,function(){a.trigger(o.events.STOP_PLAYING)}),n.bind(SC.Widget.Events.FINISH,function(){a.trigger(o.events.STOP_PLAYING),a.trigger(o.events.VIDEO_ENDED)}))}),r=e}this.isAPILoaded=!1;var i,n,r,o=this,a=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugSoundCloudAPI.isAPILoaded||(e()?(g_ugSoundCloudAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("w.soundcloud.com/player/api.js",!0),void(g_ugSoundCloudAPI.isAPILoaded=!0)))},this.putSound=function(n,r,o,a,s){if(e())return t(n,r,o,a,s),!0;this.loadAPI(),i=setInterval(function(){e()&&(t(n,r,o,a,s),clearInterval(i))},500)},this.doCommand=function(e){if(null==n)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":n.play();break;case"pause":n.pause()}},this.pause=function(){o.doCommand("pause")},this.play=function(){o.doCommand("play")},this.destroy=function(){g_isPlayerReady=!1,n=null,r&&(jQuery("#"+r).html(""),r=null)}}function UGHtml5MediaAPI(){function e(){return"undefined"!=typeof mejs}function t(e,t,i,a,s){n=null,g_isPlayerReady=!1;var l=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/flashmediaelement-cdn.swf",u=location.protocol+"//cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/silverlightmediaelement.xap",d=e+"_video",_="";s&&!0===s&&(_="autoplay='autoplay'");var g="";t.posterImage&&(g="poster='"+t.posterImage+"'");var c="<video id='"+d+"' width='"+i+"' height='"+a+"'  controls='controls' preload='none' "+_+" "+g+">";""!=t.mp4&&(c+="<source type='video/mp4' src='"+t.mp4+"' />"),""!=t.webm&&(c+="<source type='video/webm' src='"+t.webm+"' />"),""!=t.ogv&&(c+="<source type='video/ogg' src='"+t.ogv+"' />"),c+="<object width='"+i+"' height='"+a+"' type='application/x-shockwave-flash' data='"+l+"'>",c+="<param name='movie' value='"+l+"' />",c+="<param name='flashvars' value='controls=true&file="+t.mp4+"' />",c+="</object>",c+="</video>",jQuery("#"+e).html(c),new MediaElement(d,{enablePluginDebug:!1,flashName:l,silverlightName:u,success:function(e,t){g_isPlayerReady=!0,n=e,0==s&&n.pause(),g_ugFunctions.addEvent(n,"play",function(){o.trigger(r.events.START_PLAYING)}),g_ugFunctions.addEvent(n,"pause",function(){o.trigger(r.events.STOP_PLAYING)}),g_ugFunctions.addEvent(n,"ended",function(){o.trigger(r.events.STOP_PLAYING),o.trigger(r.events.VIDEO_ENDED)})},error:function(e){trace(e)}})}this.isAPILoaded=!1;var i,n,r=this,o=jQuery(this);this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugHtml5MediaAPI.isAPILoaded||(e()?(g_ugHtml5MediaAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelement.min.js",!0),g_ugFunctions.loadCss("cdnjs.cloudflare.com/ajax/libs/mediaelement/2.18.1/mediaelementplayer.min.css",!0),void(g_ugHtml5MediaAPI.isAPILoaded=!0)))},this.putVideo=function(n,r,o,a,s){if(e())return t(n,r,o,a,s),!0;this.loadAPI(),i=setInterval(function(){e()&&(t(n,r,o,a,s),clearInterval(i))},500)},this.doCommand=function(e){if(null==n)return!1;if(0==g_isPlayerReady)return!1;switch(e){case"play":n.play();break;case"pause":n.pause()}},this.pause=function(){r.doCommand("pause")},this.play=function(){r.doCommand("play")}}function UGVimeoAPI(){function e(){return"undefined"!=typeof Froogaloop}function t(e,t,i,u,d){a=null,s=!1;var _=location.protocol+"//player.vimeo.com/video/"+t+"?api=1";!0===d&&(_+="&amp;byline=0&amp;autoplay=1&amp;title=0&amp;portrait=0");var g="<iframe src="+_+" width='"+i+"' height='"+u+"' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>";jQuery("#"+e).html(g);var c=jQuery("#"+e+" iframe")[0];(a=Froogaloop(c)).addEvent("ready",function(){a&&(s=!0,function(){if(!a)return!1;a.addEvent("cuechange",function(){1==l&&r.play()}),a.addEvent("play",function(){o.trigger(r.events.START_PLAYING)}),a.addEvent("pause",function(){o.trigger(r.events.STOP_PLAYING)}),a.addEvent("finish",function(){o.trigger(r.events.STOP_PLAYING),o.trigger(r.events.VIDEO_ENDED)})}())}),n=e}this.isAPILoaded=!1;var i,n,r=this,o=jQuery(this),a=null,s=!1,l=!1;this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.loadAPI=function(){return 1==g_ugVimeoAPI.isAPILoaded||(e()?(g_ugVimeoAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("f.vimeocdn.com/js/froogaloop2.min.js",!0),void(g_ugVimeoAPI.isAPILoaded=!0)))},this.doCommand=function(e){return null!=a&&(0!=s&&void a.api(e))},this.pause=function(){r.doCommand("pause")},this.play=function(){r.doCommand("play")},this.destroy=function(){a&&(a.api("unload"),a=null,s=!1),n&&jQuery("#"+n).html("")},this.putVideo=function(n,r,o,a,s){if(e())return t(n,r,o,a,s),!0;this.loadAPI(),i=setInterval(function(){e()&&(t(n,r,o,a,s),clearInterval(i))},500)},this.isPlayerReady=function(){return!(!s||!a)},this.changeVideo=function(e,t){if(0==r.isPlayerReady())return!1;l=t,a.api("loadVideo",e)},this.getVideoImages=function(e,t,i){var n=location.protocol+"//vimeo.com/api/v2/video/"+e+".json";jQuery.get(n,{},function(e){var n={};n.preview=e[0].thumbnail_large,n.thumb=e[0].thumbnail_medium,i(t,n)})}}function UGYoutubeAPI(){function e(e,t,r,a,u){s&&l&&s.destroy();var d={controls:2,showinfo:_.video_youtube_showinfo,rel:0};!0===u&&(d.autoplay=1),l=!1,s=new YT.Player(e,{height:a,width:r,videoId:t,playerVars:d,events:{onReady:i,onStateChange:n}}),o=e}function t(){return"undefined"!=typeof YT&&void 0!==YT.Player}function i(){l=!0}function n(){if("function"!=typeof s.getPlayerState)return trace("Youtube API error: can't get player state"),!1;var e=s.getPlayerState();switch(e){case YT.PlayerState.PLAYING:u.trigger(a.events.START_PLAYING);break;case YT.PlayerState.ENDED:u.trigger(a.events.STOP_PLAYING),u.trigger(a.events.VIDEO_ENDED);break;default:d==YT.PlayerState.PLAYING&&u.trigger(a.events.STOP_PLAYING)}d=e}this.isAPILoaded=!1;var r,o,a=this,s=null,l=!1,u=jQuery(this),d=-1,_={video_youtube_showinfo:!0};this.events={START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",VIDEO_ENDED:"video_ended"},this.setOptions=function(e){_=jQuery.extend(_,e)},this.putVideo=function(i,n,o,a,s){if(t())return e(i,n,o,a,s),!0;this.loadAPI(),r=setInterval(function(){t()&&(e(i,n,o,a,s),clearInterval(r))},500)},this.loadAPI=function(){return 1==g_ugYoutubeAPI.isAPILoaded||("undefined"!=typeof YT?(g_ugYoutubeAPI.isAPILoaded=!0,!0):(g_ugFunctions.loadJs("https://www.youtube.com/player_api",!1),void(g_ugYoutubeAPI.isAPILoaded=!0)))},this.doCommand=function(e,t){if(!s)return!0;if(0==l)return!1;switch(e){case"play":if("function"!=typeof s.playVideo)return!1;s.playVideo();break;case"pause":if("function"!=typeof s.pauseVideo)return!1;s.pauseVideo();break;case"seek":if("function"!=typeof s.seekTo)return!1;s.seekTo(t);break;case"stopToBeginning":var i=s.getPlayerState();switch(s.pauseVideo(),i){case YT.PlayerState.PLAYING:case YT.PlayerState.ENDED:case YT.PlayerState.PAUSED:s.seekTo(0)}}},this.play=function(){a.doCommand("play")},this.pause=function(){a.doCommand("pause")},this.destroy=function(){try{s&&(l=!1,s.clearVideo(),s.destroy())}catch(e){jQuery("#"+o).html("")}},this.stopToBeginning=function(){a.doCommand("stopToBeginning")},this.changeVideo=function(e,t){if(0==a.isPlayerReady())return!1;t&&1==t?s.loadVideoById(e,0,"large"):s.cueVideoById(e,0,"large")},this.isPlayerReady=function(){return!(!l||!s)},this.getVideoImages=function(e){var t={};return t.preview="https://i.ytimg.com/vi/"+e+"/sddefault.jpg",t.thumb="https://i.ytimg.com/vi/"+e+"/default.jpg",t}}function UGVideoPlayer(){function e(){c.hide()}function t(){h.trigger(c.events.PLAY_START),d&&d.hide()}function i(){h.trigger(c.events.PLAY_STOP),d&&d.show()}function n(){h.trigger(c.events.VIDEO_ENDED)}function r(e){var t=["youtube","vimeo","html5","soundcloud","wistia"];for(var i in t){var n=t[i];if(n!=e)switch(n){case"youtube":m.pause(),m.destroy(),s.hide();break;case"vimeo":f.pause(),f.destroy(),l.hide();break;case"html5":b.pause(),u.hide();break;case"soundcloud":v.pause(),v.destroy(),_.hide();break;case"wistia":y.pause(),g.hide()}}}var o,a,s,l,u,d,_,g,c=this,h=jQuery(this),p=new UGFunctions,m=new UGYoutubeAPI,f=new UGVimeoAPI,b=new UGHtml5MediaAPI,v=new UGSoundCloudAPI,y=new UGWistiaAPI,I=null,w={video_enable_closebutton:!0};this.events={SHOW:"video_show",HIDE:"video_hide",PLAY_START:"video_play_start",PLAY_STOP:"video_play_stop",VIDEO_ENDED:"video_ended"};var E={standAloneMode:!1,youtubeInnerID:"",vimeoPlayerID:"",html5PlayerID:"",wistiaPlayerID:"",soundCloudPlayerID:""};this.init=function(e,t,i){if(!(o=i))throw new Error("missing gallery ID for video player, it's a must!");w=jQuery.extend(w,e),m.setOptions(w),t&&1==t&&(E.standAloneMode=!0)},this.setHtml=function(e){E.youtubeInnerID=o+"_youtube_inner",E.vimeoPlayerID=o+"_videoplayer_vimeo",E.html5PlayerID=o+"_videoplayer_html5",E.wistiaPlayerID=o+"_videoplayer_wistia",E.soundCloudPlayerID=o+"_videoplayer_soundcloud";var t="<div class='ug-videoplayer' style='display:none'>";t+="<div class='ug-videoplayer-wrapper ug-videoplayer-youtube' style='display:none'><div id='"+E.youtubeInnerID+"'></div></div>",t+="<div id='"+E.vimeoPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-vimeo' style='display:none'></div>",t+="<div id='"+E.html5PlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-html5'></div>",t+="<div id='"+E.soundCloudPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-soundcloud'></div>",t+="<div id='"+E.wistiaPlayerID+"' class='ug-videoplayer-wrapper ug-videoplayer-wistia'></div>",0==E.standAloneMode&&1==w.video_enable_closebutton&&(t+="<div class='ug-videoplayer-button-close'></div>"),t+="</div>",e.append(t),a=e.children(".ug-videoplayer"),s=a.children(".ug-videoplayer-youtube"),l=a.children(".ug-videoplayer-vimeo"),u=a.children(".ug-videoplayer-html5"),_=a.children(".ug-videoplayer-soundcloud"),g=a.children(".ug-videoplayer-wistia"),0==E.standAloneMode&&1==w.video_enable_closebutton&&(d=a.children(".ug-videoplayer-button-close"))},this.destroy=function(){d&&(d.off("click"),d.off("touchend")),jQuery(m).off(m.events.START_PLAYING),jQuery(m).off(m.events.STOP_PLAYING),jQuery(f).off(f.events.START_PLAYING),jQuery(f).off(f.events.STOP_PLAYING),jQuery(b).off(b.events.START_PLAYING),jQuery(b).off(b.events.STOP_PLAYING),jQuery(v).off(v.events.START_PLAYING,t),jQuery(v).off(v.events.STOP_PLAYING,i),jQuery(y).off(y.events.START_PLAYING,t),jQuery(y).off(y.events.STOP_PLAYING,i),I=null},this.initEvents=function(){d&&(p.setButtonMobileReady(d),p.setButtonOnClick(d,e)),jQuery(m).on(m.events.START_PLAYING,t),jQuery(m).on(m.events.STOP_PLAYING,i),jQuery(m).on(m.events.VIDEO_ENDED,n),jQuery(f).on(f.events.START_PLAYING,t),jQuery(f).on(f.events.STOP_PLAYING,i),jQuery(f).on(f.events.VIDEO_ENDED,n),jQuery(b).on(b.events.START_PLAYING,t),jQuery(b).on(b.events.STOP_PLAYING,i),jQuery(b).on(b.events.VIDEO_ENDED,n),jQuery(v).on(v.events.START_PLAYING,t),jQuery(v).on(v.events.STOP_PLAYING,i),jQuery(v).on(v.events.VIDEO_ENDED,n),jQuery(y).on(y.events.START_PLAYING,t),jQuery(y).on(y.events.STOP_PLAYING,i),jQuery(y).on(y.events.VIDEO_ENDED,n)},this.setSize=function(e,t){p.setElementSize(a,e,t),d&&p.placeElement(d,"right","top")},this.setPosition=function(e,t){p.placeElement(a,e,t)},this.getObject=function(){return a},this.show=function(){if(1==c.isVisible())return!0;a.show(),a.fadeTo(0,1),d&&d.show(),h.trigger(c.events.SHOW)},this.hide=function(){if(0==c.isVisible())return!0;r(),I=null,a.hide(),h.trigger(c.events.HIDE)},this.getActiveAPI=function(){switch(I){case"youtube":return m;case"vimeo":return f;case"wistia":return y;case"soundcloud":return v;case"html5":return b;default:return null}},this.pause=function(){var e=c.getActiveAPI();if(null==e)return!1;"function"==typeof e.pause&&e.pause()},this.isVisible=function(){return a.is(":visible")},this.playYoutube=function(e,t){if(void 0===t)t=!0;r("youtube"),s.show();0==s.children("#"+E.youtubeInnerID).length&&s.append("<div id='"+E.youtubeInnerID+"'></div>"),1==m.isPlayerReady()&&1==E.standAloneMode?m.changeVideo(e,t):m.putVideo(E.youtubeInnerID,e,"100%","100%",t),I="youtube"},this.playVimeo=function(e,t){if(void 0===t)t=!0;r("vimeo"),l.show(),f.putVideo(E.vimeoPlayerID,e,"100%","100%",t),I="vimeo"},this.playHtml5Video=function(e,t,i,n,o){if(void 0===o)o=!0;r("html5"),u.show();var a={ogv:e,webm:t,mp4:i,posterImage:n};b.putVideo(E.html5PlayerID,a,"100%","100%",o),I="html5"},this.playSoundCloud=function(e,t){if(void 0===t)t=!0;r("soundcloud"),_.show(),v.putSound(E.soundCloudPlayerID,e,"100%","100%",t),I="soundcloud"},this.playWistia=function(e,t){if(void 0===t)t=!0;r("wistia"),g.show(),y.putVideo(E.wistiaPlayerID,e,"100%","100%",t),I="wistia"}}function ugCheckForMinJQueryVersion(){if(0==g_ugFunctions.checkMinJqueryVersion("1.8.0"))throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(e,t){try{"jquery"==t?(!function(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),function(){if("function"==typeof jQuery.fn.unitegallery)return!0;var e="You have some jquery.js library include that comes after the gallery files js include.";throw e+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==t?(e+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",e+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):e+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(e)}())}catch(r){var i=r.message;if(i="Unite Gallery Error: "+i,i="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+i+"</div>","jquery"==t){var n=document.getElementById(e);n.innerHTML=i,n.style.display="block"}else jQuery(e).show().html(i);return!1}return!0}function UniteGalleryMain(){function __________INIT_GALLERY_______(){}function getThemeFunction(e){var t=e;return-1==t.indexOf("UGTheme_")&&(t="UGTheme_"+t),t}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;0==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),(g_objTheme=new g_options.gallery_theme).init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objSlider=void 0}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion()}catch(e){throwErrorShowMessage(e.message)}"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5e3)}function runGallery(e,i,n,r){var o="object"==typeof i;if(o&&(g_temp.objCustomOptions=i),1==g_temp.isRunFirstTime){if(g_galleryID=e,0==(g_objWrapper=jQuery(g_galleryID)).length)return trace("div with id: "+g_galleryID+" not found"),!1;g_objParent=g_objWrapper.parent(),checkForStartupErrors(),g_temp.originalOptions=jQuery.extend({},g_options),o&&(g_options=jQuery.extend(g_options,i)),1==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid),t.setSizeClass();fillItemsArray(g_objWrapper.children()),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),n){if(r&&1==g_options.gallery_enable_cache&&cacheItems(r,n),"noitems"==n)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(n);fillItemsArray(g_objWrapper.children()),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs).init(t,g_options),o&&modifyInitParams(g_temp.objCustomOptions),validateParams(),1==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties();0==g_objWrapper.width()?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),0==g_temp.isFreestyleMode&&1==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_temp.isRunFirstTime&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),1==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(e,t){if(void 0===t)t="<b>Unite Gallery Error: </b>";var i="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+(e=t+e)+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(i),g_objWrapper.show()}function throwErrorShowMessage(e){throw showErrorMessage(e),new Error(e)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(void 0==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(void 0==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var e=t.getSize();g_temp.lastWidth=e.width,g_temp.lastHeight=e.height}function setHeightByOriginalRatio(){var e=t.getSize();if(e.width/e.height!=e.orig_ratio){var i=e.width/e.orig_ratio;(i=Math.round(i))<g_options.gallery_min_height&&(i=g_options.gallery_min_height),g_objWrapper.height(i)}}function setHtmlObjectsProperties(){var e={"max-width":g_functions.getCssSizeParam(g_options.gallery_width),"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(0==g_temp.isFreestyleMode){var t=g_functions.getCssSizeParam(g_options.gallery_height);e.height=t}else e.overflow="visible";g_options.gallery_background_color&&(e["background-color"]=g_options.gallery_background_color),g_objWrapper.css(e)}function fillItemsArray(e){g_arrItems=[];for(var i=t.isMobileMode(),n=0,r=0;r<e.length;r++){var o=jQuery(e[r]),a="";if("a"==(s=o.prop("tagName").toLowerCase())){a=o.attr("href");var s=(o=o.children()).prop("tagName").toLowerCase()}var l=o.data("type");void 0==l&&(l="image");var u={};if(u.type=l,"img"==s){var d=o.data("lazyload-src");d&&""!=d&&(o.attr("src",d),jQuery.removeData(o,"lazyload-src"));var _=o.data("image"),g=o.data("thumb");void 0===_&&(_=null),void 0===g&&(g=null);var c=o.attr("src");_||(_=c),g||(g=c),g||(g=_),_||(_=g),u.urlThumb=g,u.urlImage=_,u.title=o.attr("alt"),u.objThumbImage=o,u.objThumbImage.attr("src",u.urlThumb)}else{if("image"==l)throw trace("Problematic gallery item found:"),trace(o),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");u.urlThumb=o.data("thumb"),u.title=o.data("title"),u.objThumbImage=null,u.urlImage=o.data("image")}if(1==i){var h=o.data("thumb-mobile");void 0!==h&&""!=h&&(u.urlThumb=h,"img"==s&&o.attr("src",u.urlThumb));var p=o.data("image-mobile");void 0!==p&&""!=p&&(u.urlImage=p)}u.link=a,u.description=o.attr("title"),u.description||(u.description=o.data("description")),u.description||(u.description=""),u.isLoaded=!1,u.isThumbImageLoaded=!1,u.objPreloadImage=null,u.isBigImageLoadStarted=!1,u.isBigImageLoaded=!1,u.isBigImageLoadError=!1,u.imageWidth=0,u.imageHeight=0,u.thumbWidth=0,u.thumbHeight=0,u.thumbRatioByWidth=0,u.thumbRatioByHeight=0;var m=o.data("width"),f=o.data("height");m&&"number"==typeof m&&f&&"number"==typeof f&&(u.thumbWidth=m,u.thumbHeight=f,u.thumbRatioByWidth=m/f,u.thumbRatioByHeight=f/m),u.addHtml=null;var b=void 0==u.urlImage||""==u.urlImage,v=void 0==u.urlThumb||""==u.urlThumb;switch(u.type){case"youtube":if(u.videoid=o.data("videoid"),b||v){var y=g_ugYoutubeAPI.getVideoImages(u.videoid);b&&(u.urlImage=y.preview),v&&(u.urlThumb=y.thumb,"img"==s&&o.attr("src",u.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":u.videoid=o.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":u.videoogv=o.data("videoogv"),u.videowebm=o.data("videowebm"),u.videomp4=o.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":u.trackid=o.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":u.videoid=o.data("videoid"),g_temp.isWistiaPresent=!0;break;case"custom":var I=o.children("img");I.length&&(I=jQuery(I[0]),u.urlThumb=I.attr("src"),u.title=I.attr("alt"),u.objThumbImage=I);var w=o.children().not("img:first-child");w.length&&(u.addHtml=w.clone())}u.objThumbImage&&(u.objThumbImage.removeAttr("data-description",""),u.objThumbImage.removeAttr("data-image",""),u.objThumbImage.removeAttr("data-thumb",""),u.objThumbImage.removeAttr("title","")),u.index=n,g_arrItems.push(u),n++}g_numItems=g_arrItems.length}function loadAPIs(){g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),1==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){1==g_objThumbs.isItemThumbVisible(this)&&preloadItemImage(this)})}}function checkPreloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(e);break;case"visible":1==g_objThumbs.isItemThumbVisible(e)&&preloadItemImage(e)}}function preloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!0;var i=e.urlImage;if(""==i||void 0==i)return e.isBigImageLoadError=!0,!1;e.isBigImageLoadStarted=!0,e.objPreloadImage=jQuery("<img/>").attr("src",i),e.objPreloadImage.data("itemIndex",e.index),e.objPreloadImage.on("load",t.onItemBigImageLoaded),e.objPreloadImage.on("error",function(){var e=jQuery(this).data("itemIndex"),i=g_arrItems[e];i.isBigImageLoadError=!0,i.isBigImageLoaded=!1;var n=jQuery(this).attr("src");console.log("Can't load image: "+n),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[e,i.urlImage]),i.objThumbImage.attr("src",i.urlThumb)}),checkAllItemsStartedPreloading()}function preloadNearBigImages(e){if(1==g_temp.isAllItemsPreloaded)return!1;if(!e)e=g_selectedItem;if(!e)return!0;var t=e.index,i=t-1,n=t+1;i>0&&preloadItemImage(g_arrItems[i]),n<g_numItems&&preloadItemImage(g_arrItems[n])}function checkAllItemsStartedPreloading(){if(1==g_temp.isAllItemsPreloaded)return!1;for(var e in g_arrItems)if(0==g_arrItems[e].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(e){1==g_options.gallery_pause_on_mouseover&&0==t.isFullScreen()&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(e){if(1==g_options.gallery_pause_on_mouseover&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()){0==g_objSlider.isCurrentSlideLoadingImage()&&t.continuePlaying()}}function onKeyPress(e){var i=jQuery(e.target);if(i.is("textarea")||i.is("select")||i.is("input"))return!0;var n=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0,r=!0;switch(n){case 39:t.nextItem();break;case 37:t.prevItem();break;default:r=!1}1==r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),g_objGallery.trigger(t.events.GALLERY_KEYPRESS,[n,e])}function onGalleryResized(){if(0==(e=t.getSize()).width)return!0;t.setSizeClass();var e;if((e=t.getSize()).width!=g_temp.lastWidth||e.height!=g_temp.lastHeight){var i=!1;if(g_temp.funcCustomHeight){var n=g_temp.funcCustomHeight(e);n&&(g_objWrapper.height(n),i=!0)}0==i&&1==g_options.gallery_preserve_ratio&&0==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE)}}function onThumbsChange(e){"visible"==g_options.gallery_images_preload_type&&0==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var e=g_functions.isFullScreen(),i=e?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN,n=g_functions.getGlobalData("fullscreenID");if(g_galleryID!==n)return!0;e?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(i),onGalleryResized()}function onItemImageUpdated(e,i){checkPreloadItemImage(t.getItem(i))}function onCurrentSlideImageLoadEnd(){1==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(e){e.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}if("advance"==g_options.gallery_mousewheel_role&&0==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),setTimeout(function(){setInterval(onGalleryResized,2e3)},1e4),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider){if(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var e=g_objSlider.getCurrentItemIndex();-1!=e&&t.selectItem(e)}),1==g_options.gallery_pause_on_mouseover){g_objSlider.getElement().hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()})}retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)}1==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(e,t){if(t){"noitems"!=(i=t)&&(i=jQuery(t).clone())}else var i=g_objWrapper.children().clone();g_objCache[e]=i}function removeAllSizeClasses(e){e||(e=g_objWrapper),e.removeClass("ug-under-480"),e.removeClass("ug-under-780"),e.removeClass("ug-under-960")}function retriggerEvent(e,t,i){jQuery(e).on(t,function(e){g_objGallery.trigger(i,[this])})}function advanceNextStep(){var e=jQuery.now(),i=e-g_temp.playTimeLastStep;if(g_temp.playTimePassed+=i,g_temp.playTimeLastStep=e,g_temp.objProgress){var n=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(n)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){if(null==g_selectedItem)return!0;g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,g_selectedItemIndex=-1}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}var t=this,g_galleryID,g_objGallery=jQuery(t),g_objWrapper,g_objParent,g_objThumbs,g_objSlider,g_functions=new UGFunctions,g_objTabs,g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1,g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_cache:!0,gallery_initial_catid:""},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};this.onItemBigImageLoaded=function(e,t){if(!t)t=jQuery(this);var i=t.data("itemIndex"),n=g_arrItems[i];n.isBigImageLoaded=!0;var r=g_functions.getImageOriginalSize(t);n.imageWidth=r.width,n.imageHeight=r.height},this.checkFillImageSize=function(e,t){if(!t){var i=e.data("itemIndex");if(void 0===i)throw new Error("Wrong image given to gallery.checkFillImageSize");t=g_arrItems[i]}var n=g_functions.getImageOriginalSize(e);t.imageWidth=n.width,t.imageHeight=n.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.attachThumbsPanel=function(e,t){g_temp.thumbsType=e,g_objThumbs=t},this.initSlider=function(e,i){if(!e)e={};e=jQuery.extend(g_temp.objCustomOptions,e),(g_objSlider=new UGSlider).init(t,e,i)},this.onGalleryMouseWheel=function(e,i,n,r){e.preventDefault(),i>0?t.prevItem():t.nextItem()},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var e=g_objSlider.getElement();e.off("mouseenter"),e.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}1==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){return{g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems}},this.getObjSlider=function(){return g_objSlider},this.getItem=function(e){if(e<0)throw new Error("item with index: "+e+" not found");if(e>=g_numItems)throw new Error("item with index: "+e+" not found");return g_arrItems[e]},this.getWidth=function(){return t.getSize().width},this.getHeight=function(){return t.getSize().height},this.getSize=function(){var e=g_functions.getElementSize(g_objWrapper);return e.orig_width=g_options.gallery_width,e.orig_height=g_options.gallery_height,e.orig_ratio=e.orig_width/e.orig_height,e},this.getGalleryID=function(){return g_galleryID.replace("#","")},this.getNextItem=function(e,t){"object"==typeof e&&(e=e.index);var i=e+1;if(!0!==t&&1==g_numItems)return null;if(i>=g_numItems){if(1!=g_options.gallery_carousel&&!0!==t)return null;i=0}return g_arrItems[i]},this.getPrevItem=function(e){"object"==typeof e&&(e=e.index);var t=e-1;if(t<0){if(1!=g_options.gallery_carousel&&!0!==forceCarousel)return null;t=g_numItems-1}return g_arrItems[t]},this.getSelectedItem=function(){return g_selectedItem},this.getSelectedItemIndex=function(){return g_selectedItemIndex},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1},this.isFirstItem=function(){return 0==g_selectedItemIndex},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.nextItem)},this.setPrevButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.prevItem)},this.setFullScreenToggleButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){e.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){e.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){e.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){e.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(e){g_temp.objProgress=e},this.setTextContainers=function(e,i){g_objGallery.on(t.events.ITEM_CHANGE,function(){var n=t.getSelectedItem();e.html(n.title),i.html(n.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var e=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),e.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&&1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){if(0==g_temp.isPlayMode)return!0;g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now()},this.pausePlaying=function(){if(1==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),g_objGallery.trigger(t.events.PAUSE_PLAYING)},this.continuePlaying=function(){if(0==g_temp.isPlayModePaused)return!0;g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)},this.stopPlayMode=function(){if(g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress){g_temp.objProgress.getElement().hide()}g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){0==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){g_arrItems=g_functions.arrayShuffle(g_arrItems);for(var e in g_arrItems)g_arrItems[e].index=parseInt(e)},this.setOptions=function(e){g_options=jQuery.extend(g_options,e)},this.selectItem=function(e,i){"number"==typeof e&&(e=t.getItem(e));var n=e.index;if(n==g_selectedItemIndex)return!0;if(unselectSeletedItem(),g_selectedItem=e,g_selectedItemIndex=n,g_objGallery.trigger(t.events.ITEM_CHANGE,[e,i]),1==g_temp.isPlayMode){t.resetPlaying();1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()}},this.nextItem=function(){var e=g_selectedItemIndex+1;return 0==g_numItems||(0==g_options.gallery_carousel&&e>=g_numItems||(e>=g_numItems&&(e=0),void t.selectItem(e,"next")))},this.prevItem=function(){var e=g_selectedItemIndex-1;return-1==g_selectedItemIndex&&(e=0),0==g_numItems||(0==g_options.gallery_carousel&&e<0||(e<0&&(e=g_numItems-1),void t.selectItem(e,"prev")))},this.isFullScreen=function(){return 1==g_temp.isFakeFullscreen||1==g_functions.isFullScreen()},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var e=g_objWrapper.get(0);0==g_functions.toFullscreen(e)&&toFakeFullScreen()},this.exitFullScreen=function(){1==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){0==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(e,t,i){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",e+"px"),t&&g_objWrapper.height(t),i||!0===i||onGalleryResized()},this.setSizeClass=function(e,i){if(!e)e=g_objWrapper;if(!i)i=t.getSize().width;if(0==i)i=jQuery(window).width();var n="";if(i<=480?n="ug-under-480":i<=780?n="ug-under-780":i<960&&(n="ug-under-960"),1==e.hasClass(n))return!0;removeAllSizeClasses(e),""!=n&&e.addClass(n)},this.isMobileMode=function(){return!!g_objWrapper.hasClass("ug-under-480")},this.isSmallWindow=function(){var e=jQuery(window).width();return!e||e<=480},this.changeItems=function(e,t){if(!e)e="noitems";runGallery(g_galleryID,"nochange",e,t)},this.showErrorMessageReplaceGallery=function(e){showErrorMessage(e)},this.setFuncCustomHeight=function(e){g_temp.funcCustomHeight=e},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,t,i,n){if(1==i&&"json",!n||"function"!=typeof n)throw new Error("ajaxRequest error: success function should be passed");if(""==g_options.gallery_urlajax)throw new Error("ajaxRequest error: Ajax url don't passed");if(void 0===t)t={};var r={action:"unitegallery_ajax_action",client_action:e,galleryID:g_galleryID,data:t};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:r,success:function(e){return e?-1==e||0===e?(showErrorMessage("ajax error!!!"),!1):void 0===e.success?(showErrorMessage("The 'success' param is a must!"),!1):0==e.success?(showErrorMessage(e.message),!1):void n(e):(showErrorMessage("Empty ajax response!","Ajax Error"),!1)},error:function(e,t,i){console.log("Ajax Error!!! "+t)}})},this.requestNewItems=function(e,i,n){var r=g_options.gallery_enable_cache;if(n||(n=e),1==i&&(r=!1),1==r&&g_objCache.hasOwnProperty(n)){var o=g_objCache[n];t.changeItems(o,n)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:e},!0,function(e){var i=e.html;t.changeItems(i,n)})},this.run=function(e,t){g_options.gallery_debug_errors;if(t&&t.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=t.gallery_debug_errors),1==g_options.gallery_debug_errors)try{runGallery(e,t)}catch(e){if("object"==typeof e){var i=e.message,n=e.lineNumber,r=e.fileName;e.stack;i+=" <br><br> in file: "+r,i+=" <b> line "+n+"</b>",trace(e)}else i=e;showErrorMessage(i=i.replace("Error:",""))}else runGallery(e,t)}}function UGLightbox(){function e(){1==Z.isCompact&&1==X.lightbox_show_textpanel&&(X.lightbox_slider_image_padding_bottom=Z.initTextPanelHeight),1==Z.isCompact&&"inside"==X.lightbox_arrows_position&&(Z.isArrowsInside=!0),1==Z.isArrowsInside&&0==X.lightbox_arrows_inside_alwayson&&(Z.isArrowsOnHoverMode=!0),0==X.lightbox_show_textpanel&&(Z.isTopPanelEnabled=!1,Z.topPanelHeight=0,X.lightbox_slider_image_padding_top=0)}function t(e){if(!Y)return!0;var t={slider_image_padding_top:e};Y.setOptions(t),Y.refreshSlideItems()}function i(e){if(!Q)return!1;if(!V)return!1;var i=Q.height();if(0==i)return!1;if(0==Q.is(":visible"))return!1;var n=i,r=V.getSize().height;i!=Z.topPanelHeight&&(n=Z.topPanelHeight),r>n&&(n=r),i!=n&&(Q.height(n),Y&&0==Y.isAnimating()&&t(n))}function n(e){if(0==Z.isOpened)return!1;if(!V)return!1;if(!Y)return!1;var t=U.getElementSize(H),i=V.getSize();if(0==i.width||i.height>120)return!1;if(!e){var n=Y.getSlideImage();e=U.getElementSize(n)}if(0==e.height||0==e.width)return!1;if(e.bottom+i.height<t.height)return!1;var r=Y.getOptions(),o=i.height;if(o!=r.slider_image_padding_bottom){var a={slider_image_padding_bottom:o};if(0==Y.isAnimating())return Y.setOptions(a),Y.refreshSlideItems(),!0}return!1}function r(e){U.getElementSize(H);var t=Y.getSlideImage(),i=U.getElementSize(t);if(0==i.width)return!1;Z.textPanelLeft=i.left,Z.textPanelTop=i.bottom;var r=i.width;if(D){var o=U.getElementSize(D);r-=o.width;var a=i.right-o.width;U.placeElement(D,a,Z.textPanelTop)}V&&(V.show(),V.refresh(!0,!0,r),function(e,t){if(!e){var i=Y.getSlideImage();e=U.getElementSize(i)}Z.textPanelTop=e.bottom,!0===t&&V.positionPanel(Z.textPanelTop,Z.textPanelLeft)}(i));0==n(i)&&(Z.positionFrom="handleCompactTextpanelSizes",V&&(V.positionPanel(Z.textPanelTop,Z.textPanelLeft),!0===e&&(e(),b())))}function o(){if(0==Y.isCurrentSlideType("image"))return!0;return 1==Y.isCurrentImageInPlace()}function a(e,t){if(0==Z.isArrowsInside)return!1;if(!k)return!1;var i=o();if(k.show(),R.show(),Z.positionFrom="positionArrowsInside",1==Z.isArrowsOnHoverMode&&1==i&&0==g()&&c(!0),0==i)var n=U.getElementRelativePos(k,"left",X.lightbox_arrows_offset),r=U.getElementRelativePos(k,"middle"),a=U.getElementRelativePos(R,"right",X.lightbox_arrows_offset),s=r;else{var l=Y.getSlideImage(),u=U.getElementSize(l);U.getElementSize(Y.getElement()),n=U.getElementRelativePos(k,"left",0,l)+u.left+X.lightbox_arrows_inside_offset,r=U.getElementRelativePos(k,"middle",0,l)+u.top,a=U.getElementRelativePos(k,"right",0,l)+u.left-X.lightbox_arrows_inside_offset,s=r}if(!0===t){var d={left:n,top:r},_={left:a,top:s};k.stop().animate(d,{duration:Z.fadeDuration}),R.stop().animate(_,{duration:Z.fadeDuration})}else k.stop(),R.stop(),U.placeElement(k,n,r),U.placeElement(R,a,s);1==e&&h(t)}function s(e,t){Z.positionFrom=null;var i=o(),n=U.getElementRelativePos(G,"right",2,H);if(0==i)var r=2,a=n;else{var s=Y.getSlideImage(),l=U.getElementSize(s),u=U.getElementSize(Y.getElement()),d=U.getElementSize(G);u.top==u.height&&(u.top=0);a=u.left+l.right-d.width/2+X.lightbox_compact_closebutton_offsetx;(r=u.top+l.top-d.height/2-X.lightbox_compact_closebutton_offsety)<2&&(r=2),a>n&&(a=n)}if(!0===t){var _={left:a,top:r};G.stop().animate(_,{duration:Z.fadeDuration})}else G.stop(),U.placeElement(G,a,r);!0===e&&function(e){!0!==e&&G.stop();G.fadeTo(Z.fadeDuration,1)}(t)}function l(){G&&G.stop().fadeTo(Z.fadeDuration,0),d(),_(),Z.positionFrom="hideCompactElements",1==Z.isArrowsInside&&c()}function u(){var e=U.getElementSize(H);Q&&U.setElementSizeAndPosition(Q,0,0,e.width,Z.topPanelHeight),k&&0==Z.isArrowsInside&&(1==X.lightbox_hide_arrows_onvideoplay&&(k.show(),R.show()),U.placeElement(k,"left","middle",X.lightbox_arrows_offset),U.placeElement(R,"right","middle",X.lightbox_arrows_offset)),0==Z.isCompact&&U.placeElement(G,"right","top",2,2),V&&(Z.positionFrom="positionElements",0==Z.isCompact?function(e){var t={},n=X.lightbox_textpanel_width;n>e.width-47-40?(t.textpanel_padding_left=47,t.textpanel_padding_right=40,t.textpanel_title_text_align="center",t.textpanel_desc_text_align="center"):(t.textpanel_padding_left=Math.floor((e.width-n)/2),t.textpanel_padding_right=t.textpanel_padding_left,t.textpanel_title_text_align="left",t.textpanel_desc_text_align="left",X.lightbox_textpanel_title_text_align&&(t.textpanel_title_text_align=X.lightbox_textpanel_desc_text_align),X.lightbox_textpanel_desc_text_align&&(t.textpanel_desc_text_align=X.lightbox_textpanel_desc_text_align)),V.setOptions(t),V.refresh(!0,!0),i(),V.positionPanel()}(e):(f(),b()));var t=e.width,n=e.height;if(Y){if(Q){var r={slider_image_padding_top:Q.height()};Y.setOptions(r)}Y.setSize(t,n),Y.setPosition(0,0)}}function d(){V&&V.getElement().stop().fadeTo(Z.fadeDuration,0)}function _(){D&&D.stop().fadeTo(Z.fadeDuration,0)}function g(){if(!Z.lastMouseX)return!0;var e={pageX:Z.lastMouseX,pageY:Z.lastMouseY};return Y.isMouseInsideSlideImage(e)}function c(e,t){return!!k&&(1==Z.isArrowsOnHoverMode&&!1===t?(g(),!0):void(!0===e?(k.stop().fadeTo(0,0),R.stop().fadeTo(0,0)):(k.stop().fadeTo(Z.fadeDuration,0),R.stop().fadeTo(Z.fadeDuration,0))))}function h(e,t){return!!k&&(1==Z.isArrowsOnHoverMode&&!0!==t&&1==o()||(1==Y.isSwiping()||(!0!==e&&(k.stop(),R.stop()),k.fadeTo(Z.fadeDuration,1),void R.fadeTo(Z.fadeDuration,1))))}function p(e){if(!V)return!1;if(!e)e=Y.getCurrentItem();V.setTextPlain(e.title,e.description)}function m(e){if(!D)return!1;if(!e)e=Y.getCurrentItem();var t=B.getNumItems(),i=e.index+1;D.html(i+" / "+t)}function f(){if(!V)return!1;V.getElement().show().stop().fadeTo(Z.fadeDuration,1)}function b(){D&&D.stop().fadeTo(Z.fadeDuration,1)}function v(){if(0==Z.isCompact)return!0;l()}function y(){if(0==Z.isCompact)return!0;if(Z.positionFrom="onZoomChange",s(!1,!0),a(!1,!0),1==Z.isCompact){0==(Y.isCurrentSlideType("image")&&1==Y.isCurrentImageInPlace())?(d(),_()):(Z.positionFrom="onZoomChange",f(),b())}}function I(){if(0==Z.isCompact)return!0;Z.positionFrom="onSliderAfterReturn",s(!0),a(!0);0==n()&&r(),f(),b()}function w(e,t){return t=jQuery(t),0==Z.isCompact||(0==Y.isSlideCurrent(t)||(Z.positionFrom="onSliderAfterPutImage",s(!0),a(!0),void r()))}function E(){var e=Y.getOptions().slider_image_padding_top;if(Q){var i=Q.height();i!=e&&t(i)}if(1==Z.isCompact){if(p(),m(),Z.positionFrom="onSliderTransitionEnd",s(!0),a(!0),0==Y.isSlideActionActive()){0==n()&&r()}f(),b()}}function T(e,t){0==Z.isCompact?(D&&m(t),V&&(p(t),0==Z.isRightNowOpened&&(V.positionElements(!1),i(),V.positionPanel()))):0==Y.isAnimating()&&(V&&p(t),D&&m(t)),0==Z.isSliderChangedOnce&&(Z.isSliderChangedOnce=!0,F.trigger(W.events.LIGHTBOX_INIT))}function S(e,t){if("image"!=Y.getSlideType()&&0==Z.isCompact&&Y.isSlideActionActive())return!0;if(1==Y.isPreloading())return W.close("slider"),!0;if(1==X.lightbox_close_on_emptyspace){0==Y.isMouseInsideSlideImage(t)&&W.close("slider_inside")}}function P(){u()}function x(){Q?function(){if(!Q)return!1;Q.hide()}():D&&D.hide(),k&&1==X.lightbox_hide_arrows_onvideoplay&&(k.hide(),R.hide())}function j(){Q?(!function(){if(!Q)return!1;Q.show()}(),i()):D&&D.show(),k&&1==X.lightbox_hide_arrows_onvideoplay&&(k.show(),R.show())}function C(e,t,i){var n=!1;switch(t){case 27:1==Z.isOpened&&W.close("keypress");break;case 38:case 40:case 33:case 34:n=!0}1==Z.isOpened&&1==n&&i.preventDefault()}function A(){1==Z.isArrowsOnHoverMode&&h(!1,!0)}function M(e){Z.positionFrom="hideCompactElements",1==Z.isArrowsOnHoverMode&&1==o()&&c(!1,!0)}function O(e){Z.lastMouseX=e.pageX,Z.lastMouseY=e.pageY;1==(!k||0==k.is(":visible")||1!=k.css("opacity"))&&g()&&0==Y.isAnimating()&&(Z.positionFrom="onMouseMove",k&&0==k.is(":animated")&&h(!1,!0))}function z(e,t,i,n){if(0==Z.isOpened)return!0;switch(X.gallery_mousewheel_role){default:case"zoom":"image"!=Y.getSlideType()&&e.preventDefault();break;case"none":e.preventDefault();break;case"advance":B.onGalleryMouseWheel(e,t,i,n)}}var L,H,N,k,R,G,D,Q,W=this,F=jQuery(this),B=new UniteGalleryMain,Y=new UGSlider,U=new UGFunctions,V=new UGTextPanel,X={lightbox_type:"wide",lightbox_show_textpanel:!0,lightbox_textpanel_width:550,lightbox_hide_arrows_onvideoplay:!0,lightbox_arrows_position:"sides",lightbox_arrows_offset:10,lightbox_arrows_inside_offset:10,lightbox_arrows_inside_alwayson:!1,lightbox_overlay_color:null,lightbox_overlay_opacity:1,lightbox_top_panel_opacity:null,lightbox_show_numbers:!0,lightbox_numbers_size:null,lightbox_numbers_color:null,lightbox_numbers_padding_top:null,lightbox_numbers_padding_right:null,lightbox_compact_closebutton_offsetx:1,lightbox_compact_closebutton_offsety:1,lightbox_close_on_emptyspace:!0};this.events={LIGHTBOX_INIT:"lightbox_init"};var Z={topPanelHeight:44,initTextPanelHeight:26,isOpened:!1,isRightNowOpened:!1,putSlider:!0,isCompact:!1,fadeDuration:300,positionFrom:null,textPanelTop:null,textPanelLeft:null,isArrowsInside:!1,isArrowsOnHoverMode:!1,lastMouseX:null,lastMouseY:null,originalOptions:null,isSliderChangedOnce:!1,isTopPanelEnabled:!0},q={lightbox_slider_controls_always_on:!0,lightbox_slider_enable_bullets:!1,lightbox_slider_enable_arrows:!1,lightbox_slider_enable_progress_indicator:!1,lightbox_slider_enable_play_button:!1,lightbox_slider_enable_fullscreen_button:!1,lightbox_slider_enable_zoom_panel:!1,lightbox_slider_enable_text_panel:!1,lightbox_slider_scale_mode_media:"down",lightbox_slider_scale_mode:"down",lightbox_slider_loader_type:3,lightbox_slider_loader_color:"black",lightbox_slider_transition:"fade",lightbox_slider_image_padding_top:Z.topPanelHeight,lightbox_slider_image_padding_bottom:0,lightbox_slider_video_padding_top:0,lightbox_slider_video_padding_bottom:0,lightbox_textpanel_align:"middle",lightbox_textpanel_padding_top:5,lightbox_textpanel_padding_bottom:5,slider_video_constantsize:!1,lightbox_slider_image_border:!1,lightbox_textpanel_enable_title:!0,lightbox_textpanel_enable_description:!1,lightbox_textpanel_desc_style_as_title:!0,lightbox_textpanel_enable_bg:!1,video_enable_closebutton:!1,lightbox_slider_video_enable_closebutton:!1,video_youtube_showinfo:!1,lightbox_slider_enable_links:!1},K={lightbox_overlay_opacity:.6,lightbox_slider_image_border:!0,lightbox_slider_image_shadow:!0,lightbox_slider_image_padding_top:30,lightbox_slider_image_padding_bottom:30,slider_video_constantsize:!0,lightbox_textpanel_align:"bottom",lightbox_textpanel_title_text_align:"left",lightbox_textpanel_desc_text_align:"left",lightbox_textpanel_padding_left:10,lightbox_textpanel_padding_right:10};this.destroy=function(){if(jQuery(document).unbind("mousemove"),N.off("touchstart"),N.off("touchend"),G.off("click"),L.off(B.events.ITEM_CHANGE),Y){jQuery(Y).off(Y.events.TRANSITION_END),jQuery(Y).off(Y.events.CLICK),jQuery(Y).off(Y.events.START_DRAG),jQuery(Y).off(Y.events.TRANSITION_START),jQuery(Y).off(Y.events.AFTER_DRAG_CHANGE),jQuery(Y).off(Y.events.AFTER_RETURN);var e=Y.getVideoObject();jQuery(e).off(e.events.PLAY_START),jQuery(e).off(e.events.PLAY_STOP),jQuery(Y).on(Y.events.IMAGE_MOUSEENTER,A),jQuery(Y).on(Y.events.IMAGE_MOUSELEAVE,M),Y.destroy()}jQuery(window).unbind("resize"),L.off(B.events.GALLERY_KEYPRESS,C),H.off("mousewheel"),H.remove()},this.open=function(e){var t=B.getItem(e);if(Z.isOpened=!0,Z.isRightNowOpened=!0,setTimeout(function(){Z.isRightNowOpened=!1},100),Y&&Y.setItem(t,"lightbox_open"),V&&V.setTextPlain(t.title,t.description),N.stop().fadeTo(0,0),H.show(),H.fadeTo(0,1),N.stop().fadeTo(Z.fadeDuration,X.lightbox_overlay_opacity),u(),1==Z.isCompact){1==Y.isPreloading()?(G&&G.hide(),k&&1==Z.isArrowsInside&&(k.hide(),R.hide()),D&&D.hide(),V&&V.hide()):1==Z.isArrowsInside&&(k.hide(),R.hide())}Y&&Y.startSlideAction(),L.trigger(B.events.OPEN_LIGHTBOX,t)},this.close=function(e){Z.isOpened=!1,1==Z.isCompact&&l(),Y&&Y.stopSlideAction();"image"!=Y.getSlideType()?H.hide():H.fadeTo(Z.fadeDuration,0,function(){H.hide()}),L.trigger(B.events.CLOSE_LIGHTBOX)},this.init=function(t,i){!function(t,i){B=t,L=jQuery(t),X=jQuery.extend(X,q),X=jQuery.extend(X,i),Z.originalOptions=jQuery.extend({},X),"compact"==X.lightbox_type&&(Z.isCompact=!0,X=jQuery.extend(X,K),X=jQuery.extend(X,i)),e(),1==Z.putSlider?(B.initSlider(X,"lightbox"),g_objects=t.getObjects(),Y=g_objects.g_objSlider):Y=null,1==X.lightbox_show_textpanel?V.init(B,X,"lightbox"):V=null}(t,i)},this.putHtml=function(){B.isSmallWindow()&&1==Z.isCompact&&(Z.isCompact=!1,e(),Z.isArrowsInside=!1,Z.isArrowsOnHoverMode=!1,(X=jQuery.extend({},Z.originalOptions)).lightbox_arrows_position="sides",Y.setOptions(X)),function(){var e="",t="";1==Z.isCompact&&(t=" ug-lightbox-compact"),e+="<div class='ug-gallery-wrapper ug-lightbox"+t+"'>",e+="<div class='ug-lightbox-overlay'></div>",0==Z.isCompact&&Z.isTopPanelEnabled?(e+="<div class='ug-lightbox-top-panel'>",e+="<div class='ug-lightbox-top-panel-overlay'></div>",X.lightbox_show_numbers&&(e+="<div class='ug-lightbox-numbers'></div>"),e+="</div>"):X.lightbox_show_numbers&&(e+="<div class='ug-lightbox-numbers'></div>"),e+="<div class='ug-lightbox-button-close'></div>",e+="<div class='ug-lightbox-arrow-left'></div>",e+="<div class='ug-lightbox-arrow-right'></div>",e+="</div>",H=jQuery(e),jQuery("body").append(H),Y&&Y.setHtml(H),N=H.children(".ug-lightbox-overlay"),0==Z.isCompact&&1==Z.isTopPanelEnabled&&0==(Q=H.children(".ug-lightbox-top-panel")).length&&(Q=null),G=H.find(".ug-lightbox-button-close"),X.lightbox_show_numbers&&(D=H.find(".ug-lightbox-numbers")),k=H.children(".ug-lightbox-arrow-left"),R=H.children(".ug-lightbox-arrow-right"),V&&(Q?V.appendHTML(Q):V.appendHTML(H))}()},this.run=function(){!function(){if(null!==X.lightbox_overlay_color&&N.css("background-color",X.lightbox_overlay_color),null!==X.lightbox_overlay_opacity&&N.fadeTo(0,X.lightbox_overlay_opacity),Q&&null!==X.lightbox_top_panel_opacity&&Q.children(".ug-lightbox-top-panel-overlay").fadeTo(0,X.lightbox_top_panel_opacity),D){var e={};null!==X.lightbox_numbers_size&&(e["font-size"]=X.lightbox_numbers_size+"px"),X.lightbox_numbers_color&&(e.color=X.lightbox_numbers_color),null!==X.lightbox_numbers_padding_right&&(e["padding-right"]=X.lightbox_numbers_padding_right+"px"),null!==X.lightbox_numbers_padding_top&&(e["padding-top"]=X.lightbox_numbers_padding_top+"px"),D.css(e)}}(),Y&&Y.run(),function(){if(N.on("touchstart",function(e){e.preventDefault()}),N.on("touchend",function(e){W.close("overlay")}),U.addClassOnHover(R,"ug-arrow-hover"),U.addClassOnHover(k,"ug-arrow-hover"),U.addClassOnHover(G),B.setNextButton(R),B.setPrevButton(k),G.click(function(){W.close("button")}),L.on(B.events.ITEM_CHANGE,T),Y){jQuery(Y).on(Y.events.TRANSITION_END,E),jQuery(Y).on(Y.events.CLICK,S);var e=Y.getVideoObject();jQuery(e).on(e.events.PLAY_START,x),jQuery(e).on(e.events.PLAY_STOP,j),jQuery(Y).on(Y.events.START_DRAG,v),jQuery(Y).on(Y.events.TRANSITION_START,v),jQuery(Y).on(Y.events.AFTER_DRAG_CHANGE,I),jQuery(Y).on(Y.events.AFTER_RETURN,I),jQuery(Y).on(Y.events.AFTER_PUT_IMAGE,w),jQuery(Y).on(Y.events.ZOOM_CHANGE,y),jQuery(Y).on(Y.events.IMAGE_MOUSEENTER,A),jQuery(Y).on(Y.events.IMAGE_MOUSELEAVE,M)}jQuery(window).resize(function(){if(0==Z.isOpened)return!0;U.whenContiniousEventOver("lightbox_resize",P,100)}),L.on(B.events.GALLERY_KEYPRESS,C),1==Z.isArrowsOnHoverMode&&jQuery(document).bind("mousemove",O),H.on("mousewheel",z)}()}}function UGCarousel(){function e(e,t){if(!t)t=H.initTileHeight/H.initTileWidth*e;H.tileWidth=e;var i={tile_width:e,tile_height:t};O.setOptions(i),L.tile_width=e,L.tile_height=t,O.resizeAllTiles(e),u(!0)}function t(){if(null===H.carouselMaxWidth)throw new Error("The carousel width not set");if(H.tileWidth<H.initTileWidth){(i=H.carouselMaxWidth-2*L.carousel_padding)>H.initTileWidth&&(i=H.initTileWidth),e(i);var t=M.getNumItemsInSpace(H.carouselMaxWidth,i,L.carousel_space_between_tiles)}else{if((t=M.getNumItemsInSpace(H.carouselMaxWidth,H.tileWidth,L.carousel_space_between_tiles))<=0){t=1;var i;e(i=H.carouselMaxWidth-2*L.carousel_padding)}}var n=M.getSpaceByNumItems(t,H.tileWidth,L.carousel_space_between_tiles);n+=2*L.carousel_padding,P.width(n),1==H.isFirstTimeRun?(O.initEvents(),P.bind("mousedown touchstart",f),jQuery("body").bind("mousemove touchmove",b),jQuery(window).add("body").bind("mouseup touchend",v),P.hover(y,I),O.run(),jQuery.each(S,function(e,t){t.objThumbWrapper.data("index",e),T.trigger(H.eventSizeChange,[t.objThumbWrapper,!0]),t.objTileOriginal=t.objThumbWrapper.clone(!0,!0)}),u(!0),1==L.carousel_autoplay&&j.startAutoplay()):(1==L.carousel_autoplay&&j.pauseAutoplay(),c(0,!1),1==L.carousel_autoplay&&j.startAutoplay()),M.placeElement(x,0,L.carousel_padding),p(),H.isFirstTimeRun=!1}function i(){return M.getElementSize(x).left}function n(e){return M.getMousePosition(e).pageX}function r(){return x.children(".ug-thumb-wrapper")}function o(e){return M.getNumItemsInSpace(e,H.tileWidth,L.carousel_space_between_tiles)}function a(){return r().length}function s(e){d(e);var t=r();return jQuery(t[e])}function l(){return o(M.getElementSize(P).width)}function u(e){if(!e)e=!1;var t,i=r(),n=0,o=0;return jQuery.each(i,function(e,r){r=jQuery(r),M.placeElement(r,n,0);var a=M.getElementSize(r);n+=a.width+L.carousel_space_between_tiles,o=Math.max(o,a.height),e==i.length-1&&(t=a.right)}),x.width(t),o+=2*L.carousel_padding,!0===e&&(x.height(o),P.height(o)),c(H.numCurrent,!1),t}function d(e){if(e>r().length-1)throw new Error("Wrogn tile number: "+e)}function _(e,t){if("left"==t)var i=x.children(".ug-thumb-wrapper").first();else i=x.children(".ug-thumb-wrapper").last();var n=function(e,t,i){var n=e.data("index");if(void 0==n)throw new Error("every tile should have index!");for(var r=[],o=0;o<t;o++){if("prev"==i)var a=A.getPrevItem(n,!0);else a=A.getNextItem(n,!0);if(!a)throw new Error("the item to add is empty");var s=a.objTileOriginal.clone(!0,!0);n=a.index,s.addClass("cloned"),r.push(s)}return r}(i,e,"left"==t?"prev":"next");jQuery.each(n,function(e,i){"left"==t?x.prepend(i):x.append(i),T.trigger(H.eventSizeChange,i),O.loadTileImage(i)})}function g(e,t){d(n);for(var i=r(),n=i.length,o=0;o<e;o++)"left"==t?jQuery(i[o]).remove():jQuery(i[n-1-o]).remove()}function c(e,t,i){if(void 0===t){t=!0;if(x.is(":animated"))return!0}var n=s(e),r={left:-M.getElementSize(n).left+L.carousel_padding+"px"};if(!0===t){var o=L.carousel_scroll_duration,a=L.carousel_scroll_easing;!0===i&&(o=H.scrollShortDuration,a=H.scrollShortEasing),x.stop(!0).animate(r,{duration:o,easing:a,queue:!1,complete:function(){H.numCurrent=e,p()}})}else H.numCurrent=e,x.css(r)}function h(){c(function(){var e=-i(),t=o(e),n=M.getElementSize(s(t)).left,r=M.getElementSize(s(t+1)).left;return Math.abs(n-e)<Math.abs(r-e)?t:t+1}(),!0,!0)}function p(){var e=function(){var e=-i();return H.sideSpace-e}(),t=function(){var e=M.getElementSize(P),t=M.getElementSize(x),i=t.width-e.width+t.left;return H.sideSpace-i}(),n=0,r=0,s=0,l=0,d=a();if(e>H.spaceActionSize)_(n=o(e),"left"),H.numCurrent+=n;else if(e<-H.spaceActionSize){g(s=o(Math.abs(e)),"left"),H.numCurrent-=s}if(t>H.spaceActionSize?_(r=o(t),"right"):t<-H.spaceActionSize&&g(l=o(Math.abs(t)),"right"),l>d)throw new Error("Can't remove more then num tiles");var c=!1;return(n||r||s||l)&&(u(),c=!0),c}function m(){"left"==L.carousel_autoplay_direction?j.scrollRight(1):j.scrollLeft(1)}function f(e){if(1==H.touchActive)return!0;H.touchActive=!0,j.pauseAutoplay(),H.startTime=jQuery.now(),H.startMousePos=n(e),H.startInnerPos=i(),H.lastTime=H.startTime,H.lastMousePos=H.startMousePos,M.storeEventData(e,H.storedEventID)}function b(e){if(0==H.touchActive)return!0;M.updateStoredEventData(e,H.storedEventID),e.preventDefault();var t=null;if(1==L.carousel_vertical_scroll_ondrag&&(t=M.handleScrollTop(H.storedEventID)),"vert"===t)return!0;H.lastMousePos=n(e);var i=H.lastMousePos-H.startMousePos,r=H.startInnerPos+i,o=i>0?"prev":"next",a=M.getElementSize(x).width;r>0&&"prev"==o&&(r/=3),r<-a&&"next"==o&&(r=H.startInnerPos+i/3),function(e){var t={left:e+"px"};x.css(t)}(r)}function v(e){if(0==H.touchActive)return!0;H.touchActive=!1,h(),j.unpauseAutoplay()}function y(e){if(0==L.carousel_autoplay_pause_onhover)return!0;1==H.isPlayMode&&0==H.isPaused&&j.pauseAutoplay()}function I(e){if(0==L.carousel_autoplay_pause_onhover)return!0;j.unpauseAutoplay()}function w(){var e=H.lastTime-H.startTime,t=Math.abs(H.lastMousePos-H.startMousePos);return!(e>300)&&!(t>30)}var E,T,S,P,x,j=this,C=jQuery(this),A=new UniteGalleryMain,M=new UGFunctions,O=new UGTileDesign,z=new UGThumbsGeneral,L={carousel_padding:8,carousel_space_between_tiles:20,carousel_navigation_numtiles:3,carousel_scroll_duration:500,carousel_scroll_easing:"easeOutCubic",carousel_autoplay:!0,carousel_autoplay_timeout:3e3,carousel_autoplay_direction:"right",carousel_autoplay_pause_onhover:!0,carousel_vertical_scroll_ondrag:!1};this.events={START_PLAY:"carousel_start_play",PAUSE_PLAY:"carousel_pause_play",STOP_PLAY:"carousel_stop_play"};var H={eventSizeChange:"thumb_size_change",isFirstTimeRun:!0,carouselMaxWidth:null,tileWidth:0,initTileWidth:0,initTileHeight:0,sideSpace:1500,spaceActionSize:500,numCurrent:0,touchActive:!1,startInnerPos:0,lastTime:0,startTime:0,startMousePos:0,lastMousePos:0,scrollShortDuration:200,scrollShortEasing:"easeOutQuad",handle:null,isPlayMode:!1,isPaused:!1,storedEventID:"carousel"};this.startAutoplay=function(){H.isPlayMode=!0,H.isPaused=!1,C.trigger(j.events.START_PLAY),H.handle&&clearInterval(H.handle),H.handle=setInterval(m,L.carousel_autoplay_timeout)},this.unpauseAutoplay=function(){return 0==H.isPlayMode||(0==H.isPaused||void j.startAutoplay())},this.pauseAutoplay=function(){if(0==H.isPlayMode)return!0;H.isPaused=!0,H.handle&&clearInterval(H.handle),C.trigger(j.events.PAUSE_PLAY)},this.stopAutoplay=function(){if(0==H.isPlayMode)return!0;H.isPaused=!1,H.isPlayMode=!1,H.handle&&clearInterval(H.handle),C.trigger(j.events.STOP_PLAY)},this.destroy=function(){H.handle&&clearInterval(H.handle),C.off(j.events.START_PLAY),C.off(j.events.STOP_PLAY),P.unbind("mousedown"),P.unbind("touchstart"),jQuery("body").unbind("mousemove"),jQuery("body").unbind("touchmove"),jQuery(window).add("body").unbind("mouseup").unbind("touchend"),P.off("mouseenter").off("mouseleave"),O.destroy()},this.init=function(e,t,i){i&&this.setMaxWidth(i),function(e,t){g_objects=e.getObjects(),A=e,E=jQuery(e),T=g_objects.g_objWrapper,S=g_objects.g_arrItems,L=jQuery.extend(L,t),O.setFixedMode(),O.setApproveClickFunction(w),O.init(e,L),z=O.getObjThumbs(),L=O.getOptions(),H.initTileWidth=L.tile_width,H.initTileHeight=L.tile_height,H.tileWidth=L.tile_width}(e,t)},this.setMaxWidth=function(e){H.carouselMaxWidth=e},this.setHtml=function(e){!function(e){e||(e=T);T.append("<div class='ug-carousel-wrapper'><div class='ug-carousel-inner'></div></div>"),P=T.children(".ug-carousel-wrapper"),x=P.children(".ug-carousel-inner"),O.setHtml(x),z.getThumbs().fadeTo(0,1)}(e)},this.getElement=function(){return P},this.getObjTileDesign=function(){return O},this.getEstimatedHeight=function(){return L.tile_height+2*L.carousel_padding},this.run=function(){t()},this.scrollRight=function(e){if(!e||"object"==typeof e)e=L.carousel_navigation_numtiles;var t=l();e>t&&(e=t);var i=H.numCurrent-e;i<=0&&(i=0),c(i)},this.scrollLeft=function(e){if(!e||"object"==typeof e)e=L.carousel_navigation_numtiles;var t=l();e>t&&(e=t);var i=a(),n=H.numCurrent+e;n>=i&&(n=i-1),c(n)},this.setScrollLeftButton=function(e){M.setButtonMobileReady(e),M.setButtonOnClick(e,j.scrollLeft)},this.setScrollRightButton=function(e){M.setButtonMobileReady(e),M.setButtonOnClick(e,j.scrollRight)},this.setPlayPauseButton=function(e){M.setButtonMobileReady(e),1==H.isPlayMode&&0==H.isPaused&&e.addClass("ug-pause-icon"),C.on(j.events.START_PLAY,function(){e.addClass("ug-pause-icon")}),C.on(j.events.STOP_PLAY,function(){e.removeClass("ug-pause-icon")}),M.setButtonOnClick(e,function(){0==H.isPlayMode||1==H.isPaused?j.startAutoplay():j.stopAutoplay()})}}function UGTabs(){function e(){"select"==l.tabs_type?a.change(n):o.click(i)}function t(e){s.requestNewItems(e)}function i(){var e=l.tabs_class_selected,i=jQuery(this);if(i.hasClass(e))return!0;o.not(i).removeClass(e),i.addClass(e);var n=i.data("catid");if(!n)return!0;t(n)}function n(){var e=jQuery(this).val();if(!e)return!0;t(e)}jQuery(this);var r,o,a,s=new UniteGalleryMain,l=(new UGFunctions,{tabs_type:"tabs",tabs_container:"#ug_tabs",tabs_class_selected:"ug-tab-selected"});this.events={},this.destroy=function(){a&&a.off("change"),o&&o.off("click")},this.init=function(e,t){!function(e,t){s=e,r=jQuery(s),"select"==(l=jQuery.extend(l,t)).tabs_type?a=jQuery(l.tabs_container):o=jQuery(l.tabs_container+" .ug-tab")}(e,t)},this.run=function(){e()}}function UG_API(e){function t(e){var t={index:e.index,title:e.title,description:e.description,urlImage:e.urlImage,urlThumb:e.urlThumb},i=e.objThumbImage.data();for(var n in i){switch(n){case"image":case"description":continue}t[n]=i[n]}return t}var i,n=this,r=(jQuery(n),new UniteGalleryMain),o=[];r=e,i=jQuery(e),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(e,a,s){switch(!0!==s&&o.push({event:e,func:a}),e){case"item_change":i.on(r.events.ITEM_CHANGE,function(){var e=t(r.getSelectedItem());a(e.index,e)});break;case"resize":i.on(r.events.SIZE_CHANGE,a);break;case"enter_fullscreen":i.on(r.events.ENTER_FULLSCREEN,a);break;case"exit_fullscreen":i.on(r.events.EXIT_FULLSCREEN,a);break;case"play":i.on(r.events.START_PLAY,a);break;case"stop":i.on(r.events.STOP_PLAY,a);break;case"pause":i.on(r.events.PAUSE_PLAYING,a);break;case"continue":i.on(r.events.CONTINUE_PLAYING,a);break;case"open_lightbox":i.on(r.events.OPEN_LIGHTBOX,a);break;case"close_lightbox":i.on(r.events.CLOSE_LIGHTBOX,a);break;default:console&&console.log("wrong api event: "+e)}i.trigger(n.events.API_ON_EVENT,[e,a])},this.play=function(){r.startPlayMode()},this.stop=function(){r.stopPlayMode()},this.togglePlay=function(){r.togglePlayMode()},this.enterFullscreen=function(){r.toFullScreen()},this.exitFullscreen=function(){r.exitFullScreen()},this.toggleFullscreen=function(){r.toggleFullscreen()},this.resetZoom=function(){var e=r.getObjSlider();if(!e)return!1;e.zoomBack()},this.zoomIn=function(){var e=r.getObjSlider();if(!e)return!1;e.zoomIn()},this.zoomOut=function(){var e=r.getObjSlider();if(!e)return!1;e.zoomOut()},this.nextItem=function(){r.nextItem()},this.prevItem=function(){r.prevItem()},this.selectItem=function(e){r.selectItem(e)},this.resize=function(e,t){t?r.resize(e,t):r.resize(e)},this.getItem=function(e){return t(r.getItem(e))},this.getNumItems=function(){return r.getNumItems()},this.reloadGallery=function(e){if(!e)e={};r.run(null,e),o.map(function(e){n.on(e.event,e.func,!0)})},this.destroy=function(){r.destroy()},i.trigger(n.events.API_INIT_FUNCTIONS,n)}var g_ugFunctions=new UGFunctions;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,_=0,g=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(_=-1*a.detail),"wheelDelta"in a&&(_=a.wheelDelta),"wheelDeltaY"in a&&(_=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*_,_=0),u=0===_?d:_,"deltaY"in a&&(_=-1*a.deltaY,u=_),"deltaX"in a&&(d=a.deltaX,0===_&&(u=-1*d)),0!==_||0!==d){if(1===a.deltaMode){var c=e.data(this,"mousewheel-line-height");u*=c,_*=c,d*=c}else if(2===a.deltaMode){var h=e.data(this,"mousewheel-page-height");u*=h,_*=h,d*=h}return g=Math.max(Math.abs(_),Math.abs(d)),(!o||o>g)&&(o=g,n(a,g)&&(o/=40)),n(a,g)&&(u/=40,d/=40,_/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),_=Math[_>=1?"floor":"ceil"](_/o),t.deltaX=d,t.deltaY=_,t.deltaFactor=o,t.deltaMode=0,s.unshift(t,u,d,_),r&&clearTimeout(r),r=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function i(){o=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var i=s.length;i;)this.addEventListener(s[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t)}):"object"==typeof module&&"object"==typeof module.exports?exports=e(require("jquery")):e(jQuery)}(function(e){function t(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}e.easing.jswing=e.easing.swing;var i=Math.pow,n=Math.sqrt,r=Math.sin,o=Math.cos,a=Math.PI,s=2*a/3,l=2*a/4.5;e.extend(e.easing,{def:"easeOutQuad",swing:function(t){return e.easing[e.easing.def](t)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-o(e*a/2)},easeOutSine:function(e){return r(e*a/2)},easeInOutSine:function(e){return-(o(a*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-n(1-i(e,2))},easeOutCirc:function(e){return n(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-n(1-i(2*e,2)))/2:(n(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*r((10*e-10.75)*s)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*r((10*e-.75)*s)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-i(2,20*e-10)*r((20*e-11.125)*l)/2:i(2,-20*e+10)*r((20*e-11.125)*l)/2+1},easeInBack:function(e){return 2.70158*e*e*e-1.70158*e*e},easeOutBack:function(e){return 1+2.70158*i(e-1,3)+1.70158*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(7.189819*e-2.5949095)/2:(i(2*e-2,2)*(3.5949095*(2*e-2)+2.5949095)+2)/2},easeInBounce:function(e){return 1-t(1-e)},easeOutBounce:t,easeInOutBounce:function(e){return e<.5?(1-t(1-2*e))/2:(1+t(2*e-1))/2}})}),function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=l(),n=i._rgba=[];return t=t.toLowerCase(),c(s,function(e,r){var o,a=r.re.exec(t),s=a&&r.parse(a),l=r.space||"rgba";return s?(o=i[l](s),i[u[l].cache]=o[u[l].cache],n=i._rgba=o._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,o.transparent),i):o[t]}function r(e,t,i){return 1>6*(i=(i+1)%1)?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}if(void 0===e.cssHooks)return!1;var o,a=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],l=e.Color=function(t,i,n,r){return new e.Color.fn.parse(t,i,n,r)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},_=l.support={},g=e("<p>")[0],c=e.each;g.style.cssText="background-color:rgba(1,1,1,.5)",_.rgba=g.style.backgroundColor.indexOf("rgba")>-1,c(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),l.fn=e.extend(l.prototype,{parse:function(t,r,a,s){if(void 0===t)return this._rgba=[null,null,null,null],this;(t.jquery||t.nodeType)&&(t=e(t).css(r),r=void 0);var d=this,_=e.type(t),g=this._rgba=[];return void 0!==r&&(t=[t,r,a,s],_="array"),"string"===_?this.parse(n(t)||o._default):"array"===_?(c(u.rgba.props,function(e,n){g[n.idx]=i(t[n.idx],n)}),this):"object"===_?(t instanceof l?c(u,function(e,i){t[i.cache]&&(d[i.cache]=t[i.cache].slice())}):c(u,function(n,r){var o=r.cache;c(r.props,function(e,n){if(!d[o]&&r.to){if("alpha"===e||null==t[e])return;d[o]=r.to(d._rgba)}d[o][n.idx]=i(t[e],n,!0)}),d[o]&&e.inArray(null,d[o].slice(0,3))<0&&(d[o][3]=1,r.from&&(d._rgba=r.from(d[o])))}),this):void 0},is:function(e){var t=l(e),i=!0,n=this;return c(u,function(e,r){var o,a=t[r.cache];return a&&(o=n[r.cache]||r.to&&r.to(n._rgba)||[],c(r.props,function(e,t){return null!=a[t.idx]?i=a[t.idx]===o[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return c(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=l(e),r=n._space(),o=u[r],a=0===this.alpha()?l("transparent"):this,s=a[o.cache]||o.to(a._rgba),_=s.slice();return n=n[o.cache],c(o.props,function(e,r){var o=r.idx,a=s[o],l=n[o],u=d[r.type]||{};null!==l&&(null===a?_[o]=l:(u.mod&&(l-a>u.mod/2?a+=u.mod:a-l>u.mod/2&&(a-=u.mod)),_[o]=i((l-a)*t+a,r)))}),this[r](_)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),r=l(t)._rgba;return l(e.map(i,function(e,t){return(1-n)*r[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return 1===(e=(e||0).toString(16)).length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),l.fn.parse.prototype=l.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(n,r,o),l=Math.min(n,r,o),u=s-l,d=s+l,_=.5*d;return t=l===s?0:n===s?60*(r-o)/u+360:r===s?60*(o-n)/u+120:60*(n-r)/u+240,i=0===u?0:.5>=_?u/d:u/(2-d),[Math.round(t)%360,i,_,null==a?1:a]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],o=e[3],a=.5>=n?n*(1+i):n+i-n*i,s=2*n-a;return[Math.round(255*r(s,a,t+1/3)),Math.round(255*r(s,a,t)),Math.round(255*r(s,a,t-1/3)),o]},c(u,function(t,n){var r=n.props,o=n.cache,s=n.to,u=n.from;l.fn[t]=function(t){if(s&&!this[o]&&(this[o]=s(this._rgba)),void 0===t)return this[o].slice();var n,a=e.type(t),d="array"===a||"object"===a?t:arguments,_=this[o].slice();return c(r,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=_[t.idx]),_[t.idx]=i(n,t)}),u?(n=l(u(_)),n[o]=_,n):l(_)},c(r,function(i,n){l.fn[i]||(l.fn[i]=function(r){var o,s=e.type(r),l="alpha"===i?this._hsla?"hsla":"rgba":t,u=this[l](),d=u[n.idx];return"undefined"===s?d:("function"===s&&(r=r.call(this,d),s=e.type(r)),null==r&&n.empty?this:("string"===s&&(o=a.exec(r))&&(r=d+parseFloat(o[2])*("+"===o[1]?1:-1)),u[n.idx]=r,this[l](u)))})})}),l.hook=function(t){var i=t.split(" ");c(i,function(t,i){e.cssHooks[i]={set:function(t,r){var o,a,s="";if("transparent"!==r&&("string"!==e.type(r)||(o=n(r)))){if(r=l(o||r),!_.rgba&&1!==r._rgba[3]){for(a="backgroundColor"===i?t.parentNode:t;(""===s||"transparent"===s)&&a&&a.style;)try{s=e.css(a,"backgroundColor"),a=a.parentNode}catch(e){}r=r.blend(s&&"transparent"!==s?s:"_default")}r=r.toRgbaString()}try{t.style[i]=r}catch(e){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=l(t.elem,i),t.end=l(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},l.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(e){function t(){try{var i=this===document?e(this):e(this).contents()}catch(e){return!1}i.mousemove(function(t){e.mlp={x:t.pageX,y:t.pageY}}),i.find("iframe").on("load",t)}e.mlp={x:0,y:0},e(t),e.fn.ismouseover=function(){var t=!1;return this.eq(0).each(function(){var i=e(this).is("iframe")?e(this).contents().find("body"):e(this),n=i.offset();t=n.left<=e.mlp.x&&n.left+i.outerWidth()>e.mlp.x&&n.top<=e.mlp.y&&n.top+i.outerHeight()>e.mlp.y}),t}}(jQuery);var g_ugYoutubeAPI=new UGYoutubeAPI,g_ugVimeoAPI=new UGVimeoAPI,g_ugHtml5MediaAPI=new UGHtml5MediaAPI,g_ugSoundCloudAPI=new UGSoundCloudAPI,g_ugWistiaAPI=new UGWistiaAPI;jQuery.fn.unitegallery=function(e){var t="#"+jQuery(this).attr("id");if(!e)e={};var i=new UniteGalleryMain;i.run(t,e);return new UG_API(i)};