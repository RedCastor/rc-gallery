!function(e){"use strict";angular.module("rcGallery",[])}(),function(e){"use strict";e.module("rcGallery").directive("rcgMedia",[function(){return{restrict:"EA",require:"^rc-gallery",transclude:!0,priority:100,scope:{id:"@rcgId",width:"@rcgWidth",height:"@rcgHeight",theme:"@rcgTheme",options:"&rcgOptions",sources:"=?rcgSources"},templateUrl:function(e,r){return r.templateUrl||"rcg-media.tpl.html"},link:function(r,t,l,n,i){var a=e.element(t).find("[rcg-transclude]");r.id=e.isDefined(r.id)?r.id:"rcg_media_"+Math.random().toString(36).substr(2,10),r.options=e.isObject(r.options())?r.options():{},r.onChangeSources=function(t,l){t!==l&&e.isArray(t)&&(r.sources=t,n.sources=t)},n.mediaElement=e.element(t),n.mediaId=r.id,n.theme=r.theme,n.width=r.width,n.height=r.height,n.options=r.options,n.sources=r.sources,r.rcGalleryApi=n,l.id||e.element(t).find("[rcg-transclude]").attr("id",r.id),i(r,function(e,r){a.append(e)}),n.onMediaReady(),r.$watchCollection("sources",r.onChangeSources),r.$watchCollection("rcGalleryApi.sources",r.onChangeSources)}}}])}(angular),function(e){"use strict";e.module("rcGallery").directive("rcgSource",[function(){return{restrict:"A",link:function(r,t,l){if(l.rcgSource){var n=r.$eval(l.rcgSource);e.isObject(n)&&e.forEach(n,function(e,r){if(0!==r.indexOf("$")){var t=r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});t.length>0&&l.$set(t,e)}})}}}}])}(angular),function(e){"use strict";e.module("rcGallery").directive("rcGallery",[function(){return{restrict:"EA",scope:{loadUrls:"&rcgLoadUrls",onGalleryReady:"&rcgOnGalleryReady"},controller:"rcGalleryCtrl",controllerAs:"rcGalleryApi",link:{pre:function(r,t,l,n){r.rcGalleryApi.rcGalleryElement=e.element(t)}}}}])}(angular),function(e){"use strict";e.module("rcGallery").controller("rcGalleryCtrl",["$scope","$log","rcGallery","rcGalleryLazyload",function(r,t,l,n){var i=this;this.rcGalleryElement=null,this.init=function(){this.isReady=!1,this.isMediaReady=!1,this.mediaElement=null,this.mediaGalleryElement=null,this.mediaId=null,this.loadUrls=l.getLoadUrls(),r.loadUrls=e.isDefined(r.loadUrls())?r.loadUrls():void 0,r.loadUrls&&this.addLoadUrls(r.loadUrls)},this.onMediaReady=function(){0!==i.mediaElement.length?n.get(i.loadUrls).then(function(e){t.debug("rcGallery Ready: "+i.mediaId),i.mediaGalleryElement=i.mediaElement.find("#"+i.mediaId),i.isReady=!0,r.onGalleryReady({$rcGalleryApi:i})},function(e){t.error("rcGallery Error to load urls")}):t.error("rcGallery Media Element ID not found")},this.addLoadUrls=function(r){if(r&&r.length>0){this.loadUrls;e.isArray(r)?e.forEach(r,function(e,r){-1===this.indexOf(e)&&this.push(e)},this.loadUrls):e.isString(r)&&-1===this.loadUrls.indexOf(r)&&this.loadUrls.push(r)}},this.setMediaReady=function(){this.isMediaReady=!0},this.init()}])}(angular),function(e){"use strict";var r=e.module("rcGallery");r.provider("rcGallery",[function(){this.loadUrls=[],this.setUrls=function(r){e.isArray(r)&&(this.loadUrls=r)},this.$get=[function(){var e=this.loadUrls;return{getLoadUrls:function(){return e}}}]}]),r.factory("rcGalleryLazyload",["$q",function(r){return{get:function(t){var l=[];return e.forEach(t,function(t){var l,n=r.defer();switch(t.split(".").pop()){case"css":(l=e.element('link[href="'+t+'"]'))[0]||((l=document.createElement("link")).rel="stylesheet",l.type="text/css",l.async=!1,l.href=t);break;case"js":(l=e.element('script[src="'+t+'"]'))[0]||((l=document.createElement("script")).type="text/javascript",l.async=!1,l.src=t)}if(l[0])l[0]?(l[0].addEventListener("onRcGalleryLazyloadComplete",function(){l[0].removeEventListener("onRcGalleryLazyloadComplete",this),n.resolve(l)}),l[0].addEventListener("onRcGalleryLazyloadError",function(){l[0].removeEventListener("onRcGalleryLazyloadError",this),n.reject(l)})):n.resolve(l);else{var i=new Event("onRcGalleryLazyloadComplete"),a=new Event("onRcGalleryLazyloadError");l.onload=function(){l.dispatchEvent(i),n.resolve(l)},l.onError=function(){l.dispatchEvent(a),n.reject(l)},document.head.appendChild(l)}this.push(n.promise)},l),r.all(l)}}}])}(angular),angular.module("rcGallery").run(["$templateCache",function(e){e.put("rcg-media.tpl.html",'<div data-ng-show="rcGalleryApi.isMediaReady" class="rcg-media" rcg-transclude ></div>')}]);