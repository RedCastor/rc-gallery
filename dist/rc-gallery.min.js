!function(e){"use strict";angular.module("rcGallery",[])}(),function(e){"use strict";e.module("rcGallery").directive("rcgMedia",[function(){return{restrict:"EA",require:"^rc-gallery",transclude:!0,priority:100,scope:{id:"@rcgId",width:"@rcgWidth",height:"@rcgHeight",theme:"@rcgTheme",options:"&rcgOptions",sources:"=?rcgSources"},templateUrl:function(e,t){return t.templateUrl||"rcg-media.tpl.html"},link:function(t,r,n,l,i){var a=e.element(r).find("[rcg-transclude]");t.id=e.isDefined(t.id)?t.id:"rcg_media_"+Math.random().toString(36).substr(2,10),t.options=e.isObject(t.options())?t.options():{},t.onChangeSources=function(r,n){r!==n&&e.isArray(r)&&(t.sources=r,l.sources=r)},l.mediaElement=e.element(r),l.mediaId=t.id,l.theme=t.theme,l.width=t.width,l.height=t.height,l.options=t.options,l.sources=t.sources,t.rcGalleryApi=l,n.id||e.element(r).find("[rcg-transclude]").attr("id",t.id),i(t,function(e,t){a.append(e)}),l.onMediaReady(),t.$watchCollection("sources",t.onChangeSources),t.$watchCollection("rcGalleryApi.sources",t.onChangeSources)}}}])}(angular),function(e){"use strict";e.module("rcGallery").directive("rcgSource",[function(){return{restrict:"A",link:function(t,r,n){if(n.rcgSource){var l=t.$eval(n.rcgSource);e.isObject(l)&&e.forEach(l,function(e,t){if(0!==t.indexOf("$")){var r=t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()});r.length>0&&!n[r]&&n.$set(r,e)}})}}}}])}(angular),function(e){"use strict";e.module("rcGallery").directive("rcGallery",[function(){return{restrict:"EA",scope:{loadUrls:"&rcgLoadUrls",onGalleryReady:"&rcgOnGalleryReady"},controller:"rcGalleryCtrl",controllerAs:"rcGalleryApi",link:{pre:function(t,r,n,l){t.rcGalleryApi.rcGalleryElement=e.element(r)}}}}])}(angular),function(e){"use strict";e.module("rcGallery").controller("rcGalleryCtrl",["$scope","$log","rcGallery","rcGalleryLazyload",function(t,r,n,l){var i=this;this.rcGalleryElement=null,this.init=function(){this.isReady=!1,this.isMediaReady=!1,this.mediaElement=null,this.mediaGalleryElement=null,this.mediaId=null,this.loadUrls=n.getLoadUrls(),t.loadUrls=e.isDefined(t.loadUrls())?t.loadUrls():void 0,t.loadUrls&&this.addLoadUrls(t.loadUrls)},this.onMediaReady=function(){0!==i.mediaElement.length?l.get(i.loadUrls).then(function(e){r.debug("rcGallery Ready: "+i.mediaId),i.mediaGalleryElement=i.mediaElement.find("#"+i.mediaId),i.isReady=!0,t.onGalleryReady({$rcGalleryApi:i})},function(e){r.error("rcGallery Error to load urls")}):r.error("rcGallery Media Element ID not found")},this.addLoadUrls=function(t){if(t&&t.length>0){this.loadUrls;e.isArray(t)?e.forEach(t,function(e,t){-1===this.indexOf(e)&&this.push(e)},this.loadUrls):e.isString(t)&&-1===this.loadUrls.indexOf(t)&&this.loadUrls.push(t)}},this.setMediaReady=function(){this.isMediaReady=!0},this.vwTOpx=function(e){var t=window,r=document,n=r.documentElement,l=r.getElementsByTagName("body")[0],i=t.innerWidth||n.clientWidth||l.clientWidth;t.innerHeight||n.clientHeight||l.clientHeight;return i*e/100},this.vhTOpx=function(e){var t=window,r=document,n=r.documentElement,l=r.getElementsByTagName("body")[0];t.innerWidth||n.clientWidth||l.clientWidth;return(t.innerHeight||n.clientHeight||l.clientHeight)*e/100},this.init()}])}(angular),function(e){"use strict";var t=e.module("rcGallery");t.provider("rcGallery",[function(){this.loadUrls=[],this.setUrls=function(t){e.isArray(t)&&(this.loadUrls=t)},this.$get=[function(){var e=this.loadUrls;return{getLoadUrls:function(){return e}}}]}]),t.factory("rcGalleryLazyload",["$q",function(t){function r(e){if("function"==typeof Event)return new Event(e);var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}return{get:function(n){var l=[];return console.log("Get source plugin"),e.forEach(n,function(n){var l,i=t.defer();switch(n.split(".").pop()){case"css":(l=e.element('link[href="'+n+'"]'))[0]||((l=document.createElement("link")).rel="stylesheet",l.type="text/css",l.async=!1,l.href=n);break;case"js":(l=e.element('script[src="'+n+'"]'))[0]||((l=document.createElement("script")).type="text/javascript",l.async=!1,l.src=n)}if(!l[0]){var a=r("onRcGalleryLazyloadComplete"),o=r("onRcGalleryLazyloadError");l.onload=function(){l.setAttribute("loaded","true"),l.dispatchEvent(a),i.resolve(l)},l.onError=function(){l.setAttribute("loaded","false"),l.dispatchEvent(o),i.reject(l)},document.head.appendChild(l)}l.lenght>1&&!l.getAttribute("loaded")?(l[0].addEventListener("onRcGalleryLazyloadComplete",function(){l[0].removeEventListener("onRcGalleryLazyloadComplete",this),i.resolve(l)}),l[0].addEventListener("onRcGalleryLazyloadError",function(){l[0].removeEventListener("onRcGalleryLazyloadError",this),i.reject(l)})):i.resolve(l),this.push(i.promise)},l),console.log(l),t.all(l)}}}])}(angular),angular.module("rcGallery").run(["$templateCache",function(e){e.put("rcg-media.tpl.html",'<div data-ng-show="rcGalleryApi.isMediaReady" class="rcg-media" rcg-transclude ></div>')}]);