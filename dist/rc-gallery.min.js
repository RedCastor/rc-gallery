!function(e){"use strict";angular.module("rcGallery",[])}(),function(e){"use strict";e.module("rcGallery").directive("rcgMedia",["$log","$timeout",function(r,t){return{restrict:"EA",require:"^rc-gallery",transclude:!0,priority:100,scope:{id:"@rcgId",width:"@rcgWidth",height:"@rcgHeight",theme:"@rcgTheme",options:"&rcgOptions",sources:"=?rcgSources"},templateUrl:function(e,r){return r.templateUrl||"rcg-media.tpl.html"},link:function(r,t,l,i,n){var a=e.element(t).find("[rcg-transclude]");r.id=e.isDefined(r.id)?r.id:"rcg_media_"+Math.random().toString(36).substr(2,10),r.options=e.isObject(r.options())?r.options():{},r.onChangeSources=function(t,l){t!==l&&e.isArray(t)&&(r.sources=t,i.sources=t)},i.mediaElement=e.element(t),i.mediaId=r.id,i.theme=r.theme,i.width=r.width,i.height=r.height,i.options=r.options,i.sources=r.sources,r.rcGalleryApi=i,l.id||e.element(t).find("[rcg-transclude]").attr("id",r.id),n(r,function(e,r){a.append(e)}),i.onMediaReady(),r.$watchCollection("sources",r.onChangeSources),r.$watchCollection("rcGalleryApi.sources",r.onChangeSources)}}}])}(angular),function(e){"use strict";e.module("rcGallery").directive("rcGallery",["$log","$timeout",function(r,t){return{restrict:"EA",scope:{loadUrls:"&rcgLoadUrls",onGalleryReady:"&rcgOnGalleryReady"},controller:"rcGalleryCtrl",controllerAs:"rcGalleryApi",link:{pre:function(r,t,l,i){r.rcGalleryApi.rcGalleryElement=e.element(t)}}}}])}(angular),function(e){"use strict";e.module("rcGallery").controller("rcGalleryCtrl",["$scope","$log","$timeout","rcGallery","rcGalleryLazyload",function(r,t,l,i,n){var a=this;this.rcGalleryElement=null,this.init=function(){this.isReady=!1,this.isMediaReady=!1,this.mediaElement=null,this.mediaGalleryElement=null,this.mediaId=null,this.loadUrls=i.getLoadUrls(),r.loadUrls=e.isDefined(r.loadUrls())?r.loadUrls():void 0,r.loadUrls&&this.addLoadUrls(r.loadUrls)},this.onMediaReady=function(){0!==a.mediaElement.length?n.get(a.loadUrls).then(function(e){t.debug("rcGallery Ready: "+a.mediaId),a.mediaGalleryElement=a.mediaElement.find("#"+a.mediaId),a.isReady=!0,r.onGalleryReady({$rcGalleryApi:a})},function(e){t.error("rcGallery Error to load urls")}):t.error("rcGallery Media Element ID not found")},this.addLoadUrls=function(r){if(r&&r.length>0){this.loadUrls;e.isArray(r)?e.forEach(r,function(e,r){-1===this.indexOf(e)&&this.push(e)},this.loadUrls):e.isString(r)&&-1===this.loadUrls.indexOf(r)&&this.loadUrls.push(r)}},this.setMediaReady=function(){this.isMediaReady=!0},this.init()}])}(angular),function(e){"use strict";var r=e.module("rcGallery");r.provider("rcGallery",[function(){this.loadUrls=[],this.setUrls=function(r){e.isArray(r)&&(this.loadUrls=r)},this.$get=[function(){var e=this.loadUrls;return{getLoadUrls:function(){return e}}}]}]),r.factory("rcGalleryLazyload",["$q",function(r){return{get:function(t){var l=[];return e.forEach(t,function(t){var l,i=r.defer();switch(t.split(".").pop()){case"css":(l=e.element('link[href="'+t+'"]'))[0]||((l=document.createElement("link")).rel="stylesheet",l.type="text/css",l.async=!1,l.href=t);break;case"js":(l=e.element('script[src="'+t+'"]'))[0]||((l=document.createElement("script")).type="text/javascript",l.async=!1,l.src=t)}if(l[0])l[0]?(l[0].addEventListener("onRcGalleryLazyloadComplete",function(){l[0].removeEventListener("onRcGalleryLazyloadComplete",this),i.resolve(l)}),l[0].addEventListener("onRcGalleryLazyloadError",function(){l[0].removeEventListener("onRcGalleryLazyloadError",this),i.reject(l)})):i.resolve(l);else{var n=new Event("onRcGalleryLazyloadComplete"),a=new Event("onRcGalleryLazyloadError");l.onload=function(){l.dispatchEvent(n),i.resolve(l)},l.onError=function(){l.dispatchEvent(a),i.reject(l)},document.head.appendChild(l)}this.push(i.promise)},l),r.all(l)}}}])}(angular),angular.module("rcGallery").run(["$templateCache",function(e){e.put("rcg-media.tpl.html",'<div data-ng-show="rcGalleryApi.isMediaReady" class="rcg-media" rcg-transclude ></div>')}]);