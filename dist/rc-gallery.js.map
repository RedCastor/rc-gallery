{"version":3,"sources":["rc-gallery.js","rc-gallery-media.js","rc-gallery-controller.js","rc-gallery-services.js","rc-gallery-tpls.js"],"names":["angular","module","directive","$log","$timeout","restrict","require","transclude","priority","scope","id","width","height","theme","options","sources","templateUrl","elem","attrs","link","rcGalleryApi","gallery_elem","element","find","isDefined","Math","random","toString","substr","isObject","onChangeSources","newValue","oldValue","isArray","mediaElement","mediaId","attr","clone","append","onMediaReady","$watchCollection","loadUrls","onGalleryReady","controller","controllerAs","pre","rcGalleryElement","$scope","rcGallery","rcGalleryLazyload","this","init","isReady","isMediaReady","mediaGalleryElement","getLoadUrls","undefined","addLoadUrls","length","get","then","response_success","debug","$rcGalleryApi","response_error","error","urls","theme_urls","forEach","value","key","indexOf","push","isString","setMediaReady","provider","rcGalleryProvider","setUrls","$get","load_urls","factory","$q","lazyload","promises","url","url_deferred","defer","script","split","pop","document","createElement","rel","type","async","href","src","event_on_complete","Event","event_on_error","onload","dispatchEvent","resolve","onError","reject","head","appendChild","addEventListener","removeEventListener","promise","all","run","$templateCache","put"],"mappings":"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","file":"rc-gallery.js","sourcesContent":["(function (angular) {\n\n    'use strict';\n\n\n    var module = angular.module('rcGallery');\n\n\n    module.directive('rcGallery', [ '$log', '$timeout', function ( $log, $timeout ) {\n        return {\n            restrict: 'EA',\n            scope: {\n                loadUrls: '&rcgLoadUrls',\n                onGalleryReady : '&rcgOnGalleryReady'\n            },\n            controller: \"rcGalleryCtrl\",\n            controllerAs: \"rcGalleryApi\",\n            link: {\n                pre: function (scope, elem, attrs, controller) {\n\n                    scope.rcGalleryApi.rcGalleryElement = angular.element(elem);\n\n                }\n            }\n        };\n    }]);\n\n}(angular));\n","(function (angular) {\n\n    'use strict';\n\n    var module = angular.module('rcGallery');\n\n\n    //rcg Media run link at priority 100 to answer plugin is linked before.\n    module.directive('rcgMedia', [ '$log', '$timeout', function ( $log, $timeout ) {\n        return {\n            restrict: 'EA',\n            require: \"^rc-gallery\",\n            transclude: true,\n            priority: 100,\n            scope: {\n                id: '@rcgId',\n                width: '@rcgWidth',\n                height: '@rcgHeight',\n                theme: '@rcgTheme',\n                options: '&rcgOptions',\n                sources: '=?rcgSources'\n            },\n            templateUrl: function (elem, attrs) {\n                return attrs.templateUrl  || 'rcg-media.tpl.html';\n            },\n            link: function (scope, elem, attrs, rcGalleryApi, transclude) {\n\n                var gallery_elem = angular.element(elem).find('[rcg-transclude]');\n\n                scope.id = angular.isDefined(scope.id) ? scope.id : 'rcg_media_' + Math.random().toString(36).substr(2, 10);\n                scope.options = angular.isObject(scope.options()) ? scope.options() : {};\n\n\n                // FUNCTIONS\n                scope.onChangeSources = function (newValue, oldValue) {\n\n                    if ( (newValue !== oldValue) && angular.isArray(newValue) ) {\n\n                        scope.sources = newValue;\n                        rcGalleryApi.sources = newValue;\n\n                    }\n                };\n\n                rcGalleryApi.mediaElement = angular.element(elem);\n                rcGalleryApi.mediaId = scope.id;\n                rcGalleryApi.theme = scope.theme;\n                rcGalleryApi.width = scope.width;\n                rcGalleryApi.height = scope.height;\n                rcGalleryApi.options = scope.options;\n                rcGalleryApi.sources = scope.sources;\n\n                scope.rcGalleryApi = rcGalleryApi;\n\n                //Add Id to element transclude\n                if ( !attrs.id ) {\n                    angular.element(elem).find('[rcg-transclude]').attr('id' , scope.id);\n                }\n\n                //Transclude and pass scope.\n                transclude(scope, function(clone, scope) {\n                    gallery_elem.append(clone);\n                });\n\n                rcGalleryApi.onMediaReady();\n\n                //Watchers\n                scope.$watchCollection('sources', scope.onChangeSources);\n                scope.$watchCollection('rcGalleryApi.sources', scope.onChangeSources);\n            }\n        };\n    }]);\n\n}(angular));\n","(function(angular) {\n    'use strict';\n\n\n    var module = angular.module('rcGallery');\n\n    module.controller(\"rcGalleryCtrl\", [ '$scope', '$log', '$timeout', 'rcGallery', 'rcGalleryLazyload', function ($scope, $log, $timeout, rcGallery, rcGalleryLazyload) {\n\n        var rcGalleryApi = this;\n        this.rcGalleryElement = null;\n\n\n        /**\n         * Init Controller\n         */\n        this.init = function () {\n\n            this.isReady = false;\n            this.isMediaReady = false;\n            this.mediaElement = null;\n            this.mediaGalleryElement = null;\n            this.mediaId = null;\n\n            this.loadUrls = rcGallery.getLoadUrls();\n\n            $scope.loadUrls = angular.isDefined($scope.loadUrls()) ? $scope.loadUrls() : undefined;\n\n            if ( $scope.loadUrls) {\n                this.addLoadUrls($scope.loadUrls);\n            }\n        };\n\n\n        this.onMediaReady = function () {\n\n            if (rcGalleryApi.mediaElement.length !== 0) {\n\n                rcGalleryLazyload.get(rcGalleryApi.loadUrls).then(\n                    function (response_success) {\n\n                        $log.debug('rcGallery Ready: ' + rcGalleryApi.mediaId );\n\n                        rcGalleryApi.mediaGalleryElement = rcGalleryApi.mediaElement.find('#' + rcGalleryApi.mediaId);\n\n                        rcGalleryApi.isReady = true;\n                        $scope.onGalleryReady({$rcGalleryApi: rcGalleryApi});\n\n                    },\n                    function (response_error) {\n                        $log.error('rcGallery Error to load urls');\n                    }\n                );\n\n            }\n            else {\n                $log.error('rcGallery Media Element ID not found');\n            }\n        };\n\n\n        this.addLoadUrls = function (urls) {\n\n            if ( urls && urls.length > 0 ) {\n                var theme_urls = this.loadUrls;\n\n                if ( angular.isArray(urls) ) {\n                    angular.forEach(urls, function(value, key) {\n\n                        if( this.indexOf(value) === -1 ){\n                            this.push(value);\n                        }\n                    }, this.loadUrls );\n                }\n                else if ( angular.isString(urls) ) {\n                    if( this.loadUrls.indexOf(urls) === -1 ){\n                        this.loadUrls.push(urls);\n                    }\n                }\n            }\n        };\n\n\n        this.setMediaReady = function () {\n            this.isMediaReady = true;\n        };\n\n\n        //Init\n        this.init();\n    }]);\n\n})(angular);\n","(function(angular){\n    'use strict';\n\n    // Load module rcGallery\n    var module = angular.module('rcGallery');\n\n\n    module.provider('rcGallery', [ function rcGalleryProvider() {\n\n        this.loadUrls = [];\n\n        this.setUrls = function( urls ){\n            if ( angular.isArray(urls) ) {\n                this.loadUrls = urls;\n            }\n        };\n\n        this.$get = [ function() {\n\n            var load_urls = this.loadUrls;\n\n            return {\n                getLoadUrls: function () {\n                    return load_urls;\n                }\n            };\n        }];\n\n    }]);\n\n\n    module.factory('rcGalleryLazyload', [ '$q', function ( $q ) {\n\n\n        var lazyload = {\n\n            /**\n             * Load urls async for js or css extension\n             * this insert in dom the tag script or link and return a promise for all url.\n             *\n             * @param urls\n             * @return promise\n             */\n            get: function (urls){\n                var promises = [];\n\n                angular.forEach(urls , function(url) {\n                    var url_deferred = $q.defer();\n                    var script;\n\n                    switch(url.split('.').pop()) {\n                        case 'css':\n                            script = angular.element('link[href=\"' + url + '\"]');\n\n                            if (!script[0]) {\n                                script = document.createElement('link');\n                                script.rel = 'stylesheet';\n                                script.type = 'text/css';\n                                script.async = false;\n                                script.href = url;\n                            }\n                            break;\n                        case 'js':\n                            script = angular.element('script[src=\"' + url + '\"]');\n\n                            if (!script[0]) {\n                                script = document.createElement('script');\n                                script.type = 'text/javascript';\n                                script.async = false;\n                                script.src = url;\n                            }\n                            break;\n                    }\n\n                    //If script dom element not exist create the dom element.\n                    if (!script[0]) {\n\n                        //Create event for other instance of rcGAlleria to catch same script loaded or error.\n                        var event_on_complete = new Event('onRcGalleryLazyloadComplete');\n                        var event_on_error = new Event('onRcGalleryLazyloadError');\n\n                        script.onload = function(){\n                            script.dispatchEvent(event_on_complete);\n                            url_deferred.resolve(script);\n                        };\n\n                        script.onError = function(){\n                            script.dispatchEvent(event_on_error);\n                            url_deferred.reject(script);\n                        };\n\n                        document.head.appendChild(script);\n                    }\n                    //If script dom exist attach event for catch script loaded complete or loaded error.\n                    else if (script[0]) {\n                        script[0].addEventListener('onRcGalleryLazyloadComplete', function () {\n                            script[0].removeEventListener('onRcGalleryLazyloadComplete', this);\n                            url_deferred.resolve(script);\n                        });\n\n                        script[0].addEventListener('onRcGalleryLazyloadError', function () {\n                            script[0].removeEventListener('onRcGalleryLazyloadError', this);\n                            url_deferred.reject(script);\n                        });\n                    }\n                    else {\n                        url_deferred.resolve(script);\n                    }\n\n\n                    this.push(url_deferred.promise);\n                }, promises);\n\n\n                return $q.all(promises);\n            }\n        };\n\n\n        return lazyload;\n    }]);\n})(angular);","angular.module('rcGallery').run(['$templateCache', function($templateCache) {$templateCache.put('rcg-media.tpl.html','<div data-ng-show=\"rcGalleryApi.isMediaReady\" class=\"rcg-media\" rcg-transclude ></div>');}]);"],"sourceRoot":"scripts/"}