{"version":3,"sources":["rc-gallery.js","rc-gallery-media.js","rc-gallery-source.js","rc-gallery-controller.js","rc-gallery-services.js","rc-gallery-tpls.js"],"names":["angular","module","directive","restrict","require","transclude","priority","scope","id","width","height","theme","options","sources","templateUrl","elem","attrs","link","rcGalleryApi","gallery_elem","element","find","isDefined","Math","random","toString","substr","isObject","onChangeSources","newValue","oldValue","isArray","mediaElement","mediaId","attr","clone","append","onMediaReady","$watchCollection","rcgSource","source","$eval","forEach","value","key","indexOf","replace","$1","toLowerCase","length","$set","loadUrls","onGalleryReady","controller","controllerAs","pre","rcGalleryElement","$scope","$log","rcGallery","rcGalleryLazyload","this","init","isReady","isMediaReady","mediaGalleryElement","getLoadUrls","undefined","addLoadUrls","get","then","response_success","debug","$rcGalleryApi","response_error","error","urls","theme_urls","push","isString","setMediaReady","provider","rcGalleryProvider","setUrls","$get","load_urls","factory","$q","_createNewEvent","eventName","Event","_custom_event","document","createEvent","initEvent","lazyload","promises","url","url_deferred","defer","script","split","pop","createElement","rel","type","async","href","src","event_on_complete","event_on_error","onload","dispatchEvent","resolve","onError","reject","head","appendChild","addEventListener","removeEventListener","promise","all","run","$templateCache","put"],"mappings":"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","file":"rc-gallery.js","sourcesContent":["(function (angular) {\n\n    'use strict';\n\n\n    var module = angular.module('rcGallery');\n\n\n    module.directive('rcGallery', [ function () {\n        return {\n            restrict: 'EA',\n            scope: {\n                loadUrls: '&rcgLoadUrls',\n                onGalleryReady : '&rcgOnGalleryReady'\n            },\n            controller: \"rcGalleryCtrl\",\n            controllerAs: \"rcGalleryApi\",\n            link: {\n                pre: function (scope, elem, attrs, controller) {\n\n                    scope.rcGalleryApi.rcGalleryElement = angular.element(elem);\n\n                }\n            }\n        };\n    }]);\n\n}(angular));\n","(function (angular) {\n\n    'use strict';\n\n    var module = angular.module('rcGallery');\n\n\n    //rcg Media run link at priority 100 to answer plugin is linked before.\n    module.directive('rcgMedia', [ function () {\n        return {\n            restrict: 'EA',\n            require: \"^rc-gallery\",\n            transclude: true,\n            priority: 100,\n            scope: {\n                id: '@rcgId',\n                width: '@rcgWidth',\n                height: '@rcgHeight',\n                theme: '@rcgTheme',\n                options: '&rcgOptions',\n                sources: '=?rcgSources'\n            },\n            templateUrl: function (elem, attrs) {\n                return attrs.templateUrl  || 'rcg-media.tpl.html';\n            },\n            link: function (scope, elem, attrs, rcGalleryApi, transclude) {\n\n                var gallery_elem = angular.element(elem).find('[rcg-transclude]');\n\n                scope.id = angular.isDefined(scope.id) ? scope.id : 'rcg_media_' + Math.random().toString(36).substr(2, 10);\n                scope.options = angular.isObject(scope.options()) ? scope.options() : {};\n\n\n                // FUNCTIONS\n                scope.onChangeSources = function (newValue, oldValue) {\n\n                    if ( (newValue !== oldValue) && angular.isArray(newValue) ) {\n\n                        scope.sources = newValue;\n                        rcGalleryApi.sources = newValue;\n\n                    }\n                };\n\n                rcGalleryApi.mediaElement = angular.element(elem);\n                rcGalleryApi.mediaId = scope.id;\n                rcGalleryApi.theme = scope.theme;\n                rcGalleryApi.width = scope.width;\n                rcGalleryApi.height = scope.height;\n                rcGalleryApi.options = scope.options;\n                rcGalleryApi.sources = scope.sources;\n\n                scope.rcGalleryApi = rcGalleryApi;\n\n                //Add Id to element transclude\n                if ( !attrs.id ) {\n                    angular.element(elem).find('[rcg-transclude]').attr('id' , scope.id);\n                }\n\n                //Transclude and pass scope.\n                transclude(scope, function(clone, scope) {\n                    gallery_elem.append(clone);\n                });\n\n                rcGalleryApi.onMediaReady();\n\n                //Watchers\n                scope.$watchCollection('sources', scope.onChangeSources);\n                scope.$watchCollection('rcGalleryApi.sources', scope.onChangeSources);\n            }\n        };\n    }]);\n\n}(angular));\n","(function (angular) {\n\n    'use strict';\n\n    var module = angular.module('rcGallery');\n\n\n    /**\n     * Set attribute to element by object\n     *\n     * rcg Source eval the attribute directive and set attribute to element from source object by key val.\n     * For attribute with dash use the Camel case notation. (Like angular directive)\n     *\n     * For solve the problem with unitegallery and different source video or image on the same gallery.\n     * Example combine image and video on the same gallery.\n     */\n    module.directive('rcgSource', [ function () {\n        return {\n            restrict: 'A',\n            link: function (scope, elem, attrs) {\n\n                //Only if attribute is set\n                if (attrs.rcgSource) {\n                    var source = scope.$eval(attrs.rcgSource);\n\n                    if (angular.isObject(source)) {\n                        angular.forEach(source, function(value, key) {\n\n                            if (key.indexOf('$') !== 0) {\n                                //Camel case to dash convertion\n                                var attr = key.replace(/([A-Z])/g, function($1){return \"-\"+$1.toLowerCase();});\n\n                                if (attr.length > 0 && !attrs[attr]) {\n                                    attrs.$set( attr, value);\n                                }\n                            }\n                        });\n                    }\n\n                }\n            }\n        };\n    }]);\n\n}(angular));\n","(function(angular) {\n    'use strict';\n\n\n    var module = angular.module('rcGallery');\n\n    module.controller(\"rcGalleryCtrl\", [ '$scope', '$log', 'rcGallery', 'rcGalleryLazyload', function ($scope, $log, rcGallery, rcGalleryLazyload) {\n\n        var rcGalleryApi = this;\n        this.rcGalleryElement = null;\n\n\n        /**\n         * Init Controller\n         */\n        this.init = function () {\n\n            this.isReady = false;\n            this.isMediaReady = false;\n            this.mediaElement = null;\n            this.mediaGalleryElement = null;\n            this.mediaId = null;\n\n            this.loadUrls = rcGallery.getLoadUrls();\n\n            $scope.loadUrls = angular.isDefined($scope.loadUrls()) ? $scope.loadUrls() : undefined;\n\n            if ( $scope.loadUrls) {\n                this.addLoadUrls($scope.loadUrls);\n            }\n        };\n\n\n        this.onMediaReady = function () {\n\n            if (rcGalleryApi.mediaElement.length !== 0) {\n\n                rcGalleryLazyload.get(rcGalleryApi.loadUrls).then(\n                    function (response_success) {\n\n                        $log.debug('rcGallery Ready: ' + rcGalleryApi.mediaId );\n\n                        rcGalleryApi.mediaGalleryElement = rcGalleryApi.mediaElement.find('#' + rcGalleryApi.mediaId);\n\n                        rcGalleryApi.isReady = true;\n                        $scope.onGalleryReady({$rcGalleryApi: rcGalleryApi});\n\n                    },\n                    function (response_error) {\n                        $log.error('rcGallery Error to load urls');\n                    }\n                );\n\n            }\n            else {\n                $log.error('rcGallery Media Element ID not found');\n            }\n        };\n\n\n        this.addLoadUrls = function (urls) {\n\n            if ( urls && urls.length > 0 ) {\n                var theme_urls = this.loadUrls;\n\n                if ( angular.isArray(urls) ) {\n                    angular.forEach(urls, function(value, key) {\n\n                        if( this.indexOf(value) === -1 ){\n                            this.push(value);\n                        }\n                    }, this.loadUrls );\n                }\n                else if ( angular.isString(urls) ) {\n                    if( this.loadUrls.indexOf(urls) === -1 ){\n                        this.loadUrls.push(urls);\n                    }\n                }\n            }\n        };\n\n\n        this.setMediaReady = function () {\n            this.isMediaReady = true;\n        };\n\n\n        //Init\n        this.init();\n    }]);\n\n})(angular);\n","(function(angular){\n    'use strict';\n\n    // Load module rcGallery\n    var module = angular.module('rcGallery');\n\n\n    module.provider('rcGallery', [ function rcGalleryProvider() {\n\n        this.loadUrls = [];\n\n        this.setUrls = function( urls ){\n            if ( angular.isArray(urls) ) {\n                this.loadUrls = urls;\n            }\n        };\n\n        this.$get = [ function() {\n\n            var load_urls = this.loadUrls;\n\n            return {\n                getLoadUrls: function () {\n                    return load_urls;\n                }\n            };\n        }];\n\n    }]);\n\n\n    module.factory('rcGalleryLazyload', [ '$q', function ( $q ) {\n\n        /**\n         * Create Event compatibility for IE\n         *\n         * @param eventName\n         * @returns {Event}\n         * @private\n         */\n        function _createNewEvent( eventName ) {\n\n            if( typeof(Event) === 'function' ) {\n                return new Event( eventName );\n            }\n            else {\n                var _custom_event = document.createEvent('Event');\n                _custom_event.initEvent(eventName, true, true);\n\n                return _custom_event;\n            }\n        }\n\n        var lazyload = {\n\n            /**\n             * Load urls async for js or css extension\n             * this insert in dom the tag script or link and return a promise for all url.\n             *\n             * @param urls\n             * @return promise\n             */\n            get: function (urls){\n                var promises = [];\n\n                angular.forEach(urls , function(url) {\n                    var url_deferred = $q.defer();\n                    var script;\n\n                    switch(url.split('.').pop()) {\n                        case 'css':\n                            script = angular.element('link[href=\"' + url + '\"]');\n\n                            if (!script[0]) {\n                                script = document.createElement('link');\n                                script.rel = 'stylesheet';\n                                script.type = 'text/css';\n                                script.async = false;\n                                script.href = url;\n                            }\n                            break;\n                        case 'js':\n                            script = angular.element('script[src=\"' + url + '\"]');\n\n                            if (!script[0]) {\n                                script = document.createElement('script');\n                                script.type = 'text/javascript';\n                                script.async = false;\n                                script.src = url;\n                            }\n                            break;\n                    }\n\n                    //If script dom element not exist create the dom element.\n                    if (!script[0]) {\n\n                        //Create event for other instance of rcGAlleria to catch same script loaded or error.\n                        var event_on_complete = _createNewEvent('onRcGalleryLazyloadComplete');\n                        var event_on_error = _createNewEvent('onRcGalleryLazyloadError');\n\n                        script.onload = function(){\n                            script.dispatchEvent(event_on_complete);\n                            url_deferred.resolve(script);\n                        };\n\n                        script.onError = function(){\n                            script.dispatchEvent(event_on_error);\n                            url_deferred.reject(script);\n                        };\n\n                        document.head.appendChild(script);\n                    }\n                    //If script dom exist attach event for catch script loaded complete or loaded error.\n                    else if (script[0]) {\n                        script[0].addEventListener('onRcGalleryLazyloadComplete', function () {\n                            script[0].removeEventListener('onRcGalleryLazyloadComplete', this);\n                            url_deferred.resolve(script);\n                        });\n\n                        script[0].addEventListener('onRcGalleryLazyloadError', function () {\n                            script[0].removeEventListener('onRcGalleryLazyloadError', this);\n                            url_deferred.reject(script);\n                        });\n                    }\n                    else {\n                        url_deferred.resolve(script);\n                    }\n\n\n                    this.push(url_deferred.promise);\n                }, promises);\n\n\n                return $q.all(promises);\n            }\n        };\n\n\n        return lazyload;\n    }]);\n})(angular);","angular.module('rcGallery').run(['$templateCache', function($templateCache) {$templateCache.put('rcg-media.tpl.html','<div data-ng-show=\"rcGalleryApi.isMediaReady\" class=\"rcg-media\" rcg-transclude ></div>');}]);"],"sourceRoot":"scripts/"}